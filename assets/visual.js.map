{"version":3,"file":"visual.js","sources":["../../node_modules/d3-view/src/utils/debug.js","../../node_modules/d3-view/src/utils/providers.js","../../node_modules/d3-view/src/utils/warn.js","../../node_modules/d3-view/src/directives/attr.js","../../node_modules/d3-view/src/directives/html.js","../../node_modules/d3-view/src/utils/debounce.js","../../node_modules/d3-view/src/utils/sel.js","../../node_modules/d3-view/src/directives/types/type.js","../../node_modules/d3-view/src/directives/types/input.js","../../node_modules/d3-view/src/directives/types/checkbox.js","../../node_modules/d3-view/src/directives/types/select.js","../../node_modules/d3-view/src/directives/types/index.js","../../node_modules/d3-view/src/directives/value.js","../../node_modules/d3-view/src/directives/on.js","../../node_modules/d3-view/src/utils/html.js","../../node_modules/d3-view/src/utils/errors.js","../../node_modules/d3-view/src/utils/select.js","../../node_modules/d3-view/src/core/base.js","../../node_modules/d3-view/src/core/transition.js","../../node_modules/d3-view/src/parser/jsep.js","../../node_modules/d3-view/src/parser/eval.js","../../node_modules/d3-view/src/parser/expression.js","../../node_modules/d3-view/src/utils/uid.js","../../node_modules/d3-view/src/model/dispatch.js","../../node_modules/d3-view/src/model/as.js","../../node_modules/d3-view/src/model/string.js","../../node_modules/d3-view/src/utils/object.js","../../node_modules/d3-view/src/model/set.js","../../node_modules/d3-view/src/model/on.js","../../node_modules/d3-view/src/model/update.js","../../node_modules/d3-view/src/model/off.js","../../node_modules/d3-view/src/utils/slice.js","../../node_modules/d3-view/src/model/change.js","../../node_modules/d3-view/src/model/isreactive.js","../../node_modules/d3-view/src/model/owner.js","../../node_modules/d3-view/src/model/array.js","../../node_modules/d3-view/src/model/main.js","../../node_modules/d3-view/src/core/directive.js","../../node_modules/d3-view/src/utils/maybeJson.js","../../node_modules/d3-view/src/utils/data.js","../../node_modules/d3-view/src/core/events.js","../../node_modules/d3-view/src/core/component.js","../../node_modules/d3-view/src/core/getdirs.js","../../node_modules/d3-view/src/core/selection.js","../../node_modules/d3-view/src/core/view.js","../../node_modules/d3-view/src/directives/for.js","../../node_modules/d3-view/src/directives/if.js","../../node_modules/d3-view/src/directives/index.js","../../node_modules/d3-view/src/core/clean.js","../../node_modules/d3-view/src/main.js","../../node_modules/d3-view/src/utils/dom.js","../../node_modules/d3-view/src/forms/providers.js","../../node_modules/d3-view/src/forms/warn.js","../../node_modules/d3-view/src/forms/field.js","../../node_modules/d3-view/src/forms/utils.js","../../node_modules/d3-view/src/forms/field-set.js","../../node_modules/d3-view/src/forms/validators.js","../../node_modules/d3-view/src/forms/field-input.js","../../node_modules/d3-view/src/forms/field-textarea.js","../../node_modules/d3-view/src/forms/field-select.js","../../node_modules/d3-view/src/forms/field-submit.js","../../node_modules/d3-view/src/forms/responses.js","../../node_modules/d3-view/src/forms/actions.js","../../node_modules/d3-view/src/forms/form.js","../../node_modules/d3-view/src/forms/plugin.js","../../node_modules/d3-view/src/forms/bootstrap/label.js","../../node_modules/d3-view/src/forms/bootstrap/form-group.js","../../node_modules/d3-view/src/forms/bootstrap/input-group.js","../../node_modules/d3-view/src/forms/bootstrap/check.js","../../node_modules/d3-view/src/forms/bootstrap/submit.js","../../node_modules/d3-view/src/forms/bootstrap/plugin.js","../../node_modules/d3-visualize/src/require.js","../../node_modules/crossfilter/crossfilter.js","../../node_modules/crossfilter/index.js","../../node_modules/d3-visualize/src/utils/accessor.js","../../node_modules/d3-visualize/src/data/dataframe.js","../../node_modules/d3-visualize/src/data/array.js","../../node_modules/d3-visualize/src/data/warn.js","../../node_modules/d3-visualize/src/utils/isurl.js","../../node_modules/d3-visualize/src/data/remote.js","../../node_modules/d3-visualize/src/data/composite.js","../../node_modules/d3-visualize/src/data/expression.js","../../node_modules/d3-visualize/src/transforms/base.js","../../node_modules/d3-visualize/src/transforms/filter.js","../../node_modules/d3-visualize/src/utils/warn.js","../../node_modules/d3-visualize/src/utils/fillarray.js","../../node_modules/d3-visualize/src/transforms/aggregate.js","../../node_modules/d3-visualize/src/transforms/crossfilter.js","../../node_modules/d3-visualize/src/transforms/timeseries.js","../../node_modules/d3-visualize/src/core/options.js","../../node_modules/d3-visualize/src/transforms/mapfields.js","../../node_modules/d3-visualize/src/utils/minmax.js","../../node_modules/d3-visualize/src/transforms/moving-average.js","../../node_modules/d3-visualize/src/transforms/group-small.js","../../node_modules/d3-visualize/src/transforms/diff.js","../../node_modules/d3-visualize/src/transforms/index.js","../../node_modules/d3-visualize/src/data/events.js","../../node_modules/d3-visualize/src/data/sources.js","../../node_modules/d3-visualize/src/data/store.js","../../node_modules/d3-visualize/src/utils/round.js","../../node_modules/d3-visualize/src/utils/size.js","../../node_modules/d3-visualize/src/utils/clone.js","../../node_modules/d3-visualize/src/core/base.js","../../node_modules/d3-visualize/src/core/visual.js","../../node_modules/d3-visualize/src/core/chart.js","../../node_modules/d3-visualize/src/core/paper.js","../../node_modules/d3-visualize/src/utils/extend-object.js","../../node_modules/d3-visualize/src/plugins/scale.js","../../node_modules/d3-visualize/src/plugins/menu.js","../../node_modules/d3-visualize/src/plugins/data.js","../../node_modules/d3-visualize/src/utils/format.js","../../node_modules/d3-visualize/src/utils/format-time.js","../../node_modules/d3-visualize/src/plugins/format.js","../../node_modules/d3-visualize/src/plugins/font.js","../../node_modules/d3-visualize/src/plugins/responsive.js","../../node_modules/d3-visualize/src/plugins/title.js","../../node_modules/d3-visualize/src/plugins/margin.js","../../node_modules/d3-visualize/src/plugins/axis.js","../../node_modules/d3-visualize/src/plugins/shapes.js","../../node_modules/d3-color/src/define.js","../../node_modules/d3-color/src/color.js","../../node_modules/d3-color/src/math.js","../../node_modules/d3-color/src/lab.js","../../node_modules/d3-color/src/cubehelix.js","../../node_modules/d3-visualize/src/plugins/color.js","../../node_modules/d3-visualize/src/plugins/legend.js","../../node_modules/d3-visualize/src/utils/constant.js","../../node_modules/d3-visualize/src/utils/functor.js","../../node_modules/d3-visualize/src/utils/identity.js","../../node_modules/d3-visualize/src/plugins/mouse.js","../../node_modules/d3-visualize/src/plugins/tooltip.js","../../node_modules/d3-visualize/src/plugins/expand.js","../../node_modules/d3-visualize/src/plugins/transition.js","../../node_modules/d3-visualize/src/plugins/brush.js","../../node_modules/d3-visualize/src/core/container.js","../../node_modules/d3-visualize/src/components/dashboard.js","../../node_modules/d3-visualize/src/components/visual.js","../../node_modules/d3-visualize/src/components/index.js","../../node_modules/d3-visualize/src/utils/descending.js","../../node_modules/d3-visualize/src/transforms/pyramid.js","../../node_modules/d3-visualize/src/utils/nicerange.js","../../node_modules/d3-visualize/src/utils/contrast.js","../../node_modules/d3-visualize/src/utils/text-wrapping.js","../../node_modules/d3-visualize/src/charts/defs.js","../../node_modules/d3-visualize/src/charts/bar.js","../../node_modules/d3-visualize/src/transforms/groups.js","../../node_modules/d3-visualize/src/charts/line.js","../../node_modules/d3-visualize/src/charts/area.js","../../node_modules/d3-visualize/src/charts/pie.js","../../node_modules/d3-visualize/src/transforms/funnel.js","../../node_modules/d3-visualize/src/utils/polygon.js","../../node_modules/d3-visualize/src/charts/pyramid.js","../../node_modules/d3-visualize/src/utils/camelfunction.js","../../node_modules/d3-visualize/src/charts/treemap.js","../../node_modules/d3-visualize/src/charts/text.js","../../node_modules/d3-visualize/src/charts/heatmap.js","../../node_modules/d3-visualize/src/charts/geo.js","../../node_modules/d3-visualize/index.js","../../visual/bytes.js","../../visual/marked.js","../../visual/info.js","../../visual/index.js"],"sourcesContent":["import providers from './providers';\n\nconst prefix = '[d3-view-debug]';\n\nexport default function (msg) {\n    if (providers.logger.debug)\n        providers.logger.debug(msg);\n}\n\n\nexport function defaultDebug (msg) {\n    providers.logger.info(`${prefix} ${msg}`);\n}\n","import {logger, inBrowser, isFunction} from 'd3-let';\nimport {defaultDebug} from './debug';\n\n\nlogger.debug = null;\n\n\nexport default {\n    // log messages\n    logger: logger,\n    // fetch remote resources\n    fetch: fetch(),\n    // callbacks when page is loaded in browser\n    readyCallbacks: [],\n    // Set/unset debug\n    setDebug (active) {\n        if (!arguments.length || active)\n            this.logger.debug = isFunction(active) ? active : defaultDebug;\n        else\n            this.logger.debug = null;\n    },\n    require: d3Require()\n};\n\n\nfunction fetch() {\n    if (inBrowser) return window.fetch;\n}\n\n\nfunction d3Require () {\n    var require = null;\n    if (inBrowser) {\n        if (window.d3) require =window.d3.require;\n    }\n    return require || unsupportedRequire;\n}\n\n\nfunction unsupportedRequire () {\n    return Promise.reject(new Error('Cannot requires libraries, d3-require is not available'));\n}\n","import providers from './providers';\n\nconst prefix = '[d3-view]';\n\n\nexport default function (msg) {\n    providers.logger.warn(`${prefix} ${msg}`);\n}\n","import {isArray} from 'd3-let';\nimport {map} from 'd3-collection';\n\nimport warn from '../utils/warn';\n\nconst properties = map({\n    disabled: 'disabled',\n    readonly: 'readOnly',\n    required: 'required'\n});\n\n//\n//  d3-attr-<attr> directive\n//  ==============================\n//\n//  Create a one-way binding between a model and a HTML element attribute\n//\nexport default {\n\n    create (expression) {\n        if (!this.arg) return warn('Cannot bind to empty attribute. Specify :<attr-name>');\n        return expression;\n    },\n\n    refresh (model, value) {\n        if (this.arg === 'class') return this.refreshClass(value);\n        if (isArray(value)) return warn(`Cannot apply array to attribute ${this.arg}`);\n        var prop = properties.get(this.arg);\n        if (prop) this.sel.property(prop, value || false);\n        else this.sel.attr(this.arg, value || null);\n    },\n\n    refreshClass (value) {\n        var sel = this.sel;\n\n        if (!isArray(value)) value = [value];\n\n        if (this.oldValue)\n            this.oldValue.forEach((entry) => {\n                if (entry)\n                    sel.classed(entry, false);\n            });\n\n        this.oldValue = value.map((entry) => {\n            var exist = true;\n            if (isArray(entry)) {\n                exist = entry[1];\n                entry = entry[0];\n            }\n            if (entry)\n                sel.classed(entry, exist);\n            return entry;\n        });\n    }\n\n};\n","import {isString, isNumber} from 'd3-let';\n//\n//  d3-html\n//  =============\n//  attach html or text to the innerHtml property and mount components if required\n//\n//  Usage:\n//      <div id=\"foo\" d3-html=\"output\"></div>\nexport default {\n\n    refresh (model, html) {\n        if (isNumber(html)) html = ''+html;\n        if (isString(html)) {\n            var dir = this,\n                sel = this.sel,\n                transition = this.passes ? this.transition(sel) : null;\n            if (transition) {\n                transition.style('opacity', 0).on('end', () => {\n                    sel.html(html);\n                    dir.selectChildren().mount();\n                    dir.transition(sel).style('opacity', 1);\n                });\n            } else {\n                sel.html(html);\n                this.selectChildren().mount();\n            }\n        }\n    }\n};\n","import {timeout} from 'd3-timer';\n\n//\n// Evaluate a callback (optional) with given delay (optional)\n//\n// if delay is not given or 0, the callback is evaluated at the next tick\n// of the event loop.\n// Calling this method multiple times in the dsame event loop tick produces\n// always the initial promise\nexport default function (callback, delay) {\n    var promise = null;\n\n    function debounce () {\n        if (promise !== null) return promise;\n        var self = this,\n            args = arguments;\n\n        promise = new Promise((resolve, reject) => {\n\n            timeout(() => {\n                promise = null;\n                try {\n                    resolve(callback ? callback.apply(self, args) : undefined);\n                } catch (err) {\n                    reject(err);\n                }\n            }, delay);\n        });\n\n        return promise;\n    }\n\n    debounce.promise = function () {\n        return promise;\n    };\n\n    return debounce;\n}\n","import {select} from 'd3-selection';\n\n\nexport default function (o) {\n\n    Object.defineProperty(o, 'sel', {\n        get () {\n            return select(this.el);\n        }\n    });\n\n    return o;\n}\n","import {assign} from 'd3-let';\n\nimport debounce from '../../utils/debounce';\nimport sel from '../../utils/sel';\n\n\nconst base = {\n\n    on (model, attrName) {\n        var refresh = refreshFunction(this, model, attrName);\n\n        // DOM => model binding\n        this.sel\n            .on('input', refresh)\n            .on('change', refresh);\n    },\n\n    off () {\n        this.sel\n            .on('input', null)\n            .on('change', null);\n    },\n\n    value (value) {\n        if (arguments.length)\n            this.sel.property('value', value);\n        else\n            return this.sel.property('value');\n    }\n};\n\n\nexport function createValueType (proto) {\n\n    function ValueType(el) {\n        sel(this).el = el;\n    }\n\n    ValueType.prototype = assign({}, base, proto);\n\n    return ValueType;\n}\n\n\nexport function refreshFunction (vType, model, attrName) {\n\n    return debounce(() => {\n        model.$set(attrName, vType.value());\n    });\n}\n","import {createValueType} from './type';\n\nexport default createValueType();\n","import {createValueType} from './type';\n\nexport default createValueType({\n    value (value) {\n        if (arguments.length)\n            this.sel.property('checked', value);\n        else\n            return this.sel.property('checked');\n    }\n});\n","import {isArray} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport {createValueType} from './type';\n\n\nexport default createValueType({\n\n    value (value) {\n        var sel = this.sel,\n            options = sel.selectAll('option'),\n            values = value,\n            opt;\n\n        if (arguments.length) {\n            if (!isArray(values)) values = [value || ''];\n            options.each(function () {\n                opt = select(this);\n                value = opt.attr('value') || '';\n                opt.property('selected', values.indexOf(value) > -1);\n            });\n        } else {\n            values = [];\n            options.each(function () {\n                opt = select(this);\n                if (opt.property('selected'))\n                    values.push(opt.attr('value') || '');\n            });\n            if (sel.property('multiple')) return values;\n            else return values[0] || '';\n        }\n    }\n});\n","import input from './input';\nimport checkbox from './checkbox';\nimport select from './select';\n\nexport default {\n    input,\n    textarea: input,\n    select,\n    checkbox\n};\n","import types from './types/index';\n\nimport warn from '../utils/warn';\n\n//\n//  d3-value directive\n//  ===================\n//\n//  Two-way data binding for HTML elements supporting the value property\nexport default {\n\n    create (expression) {\n        var type = this.sel.attr('type'),\n            tag = this.el.tagName.toLowerCase(),\n            ValueType = types[type] || types[tag];\n\n        if (!ValueType) return warn(`Cannot apply d3-value directive to ${tag}`);\n        this.tag = new ValueType(this.el);\n        return expression;\n    },\n\n    mount (model) {\n        var expr = this.expression;\n        // TODO: relax this constraint\n        if (expr.parsed.type !== expr.codes.IDENTIFIER)\n            return warn(`d3-value expression support identifiers only, got \"${expr.parsed.type}\": ${this.expression}`);\n        var attrName = this.expression.expr;\n        //\n        // Create the model reactive attribute\n        model.$set(attrName, this.tag.value());\n        // register dom event\n        this.tag.on(model, attrName);\n        return model;\n    },\n\n    refresh (model, value) {\n        this.tag.value(value);\n    },\n\n    destroy () {\n        this.tag.off();\n    }\n};\n","//\n//  d3-on directive\n//\n//  A one-way data binding from dom events to model properties/methods\n//  Event listeners are on the DOM, not on the model\nexport default {\n\n    mount (model) {\n        var eventName = this.arg || 'click',\n            expr = this.expression;\n\n        // DOM event => model binding\n        this.on(this.sel, `${eventName}.${this.uid}`, (event) => {\n            var md = model.$child();\n            md.$event = event;\n            expr.eval(md);\n        });\n\n        this.bindDestroy(model);\n        // Does not return the model so that model data binding is not performed\n    },\n\n    destroy () {\n        var eventName = this.arg || 'click';\n        this.on(this.sel, `${eventName}.${this.uid}`, null);\n    }\n};\n","import {inBrowser, isString} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport warn from './warn';\nimport providers from './providers';\n\n\n// require handlebar\nexport function compile (text) {\n    var handlebars = providers.handlebars;\n    if (!handlebars) handlebars = inBrowser ? window.handlebars : require('handlebars');\n    if (handlebars) return handlebars.compile(text);\n    warn('compile function requires handlebars');\n}\n\n\nexport function html (source, context) {\n    if (isString(source)) {\n        if (context) {\n            var s = compile(source);\n            if (!s) return source;\n            source = s;\n        }\n        else\n            return source;\n    }\n    return source(context);\n}\n\n\nexport function htmlElement (source, context) {\n    var el = select(document.createElement('div'));\n    el.html(html(source, context));\n    var children = el.node().children;\n    if (children.length !== 1) warn(`HtmlElement function should return one root element only, got ${children.length}`);\n    return children[0];\n}\n","\n\nexport function HttpError (response) {\n    this.response = response;\n    this.description = response.statusText;\n}\n\n\nHttpError.prototype = Error.prototype;\n","import {isFunction} from 'd3-let';\nimport {select} from 'd3-selection';\n\n\nexport default function (el) {\n    if (el && !isFunction(el.size)) return select(el);\n    return el;\n}\n","import {select, selectAll, event} from 'd3-selection';\n\nimport providers from '../utils/providers';\nimport {htmlElement, html} from '../utils/html';\nimport {HttpError} from '../utils/errors';\nimport asSelect from '../utils/select';\n//\n//  Base d3-view Object\n//  =====================\n//\nexport default {\n    // d3-view object\n    isd3: true,\n    //\n    providers: providers,\n    //\n    // Create a view element, same as createElement but compile it\n    viewElement: htmlElement,\n    //\n    select (el) {\n        return select(el);\n    },\n    //\n    selectAll (el) {\n        return selectAll(el);\n    },\n    //\n    createElement (tag) {\n        return select(document.createElement(tag));\n    },\n    // Shortcut for fetch function in providers\n    fetch (url, options) {\n        var fetch = providers.fetch;\n        return arguments.length == 1 ? fetch(url) : fetch(url, options);\n    },\n    //\n    fetchText (url, ...x) {\n        return this.fetch(url, ...x).then(response => response.text());\n    },\n    //\n    json (url, ...x) {\n        return this.fetch(url, ...x).then(jsonResponse);\n    },\n    //\n    // render a template from a url\n    renderFromUrl (url, context, asElement=true) {\n        var cache = this.cache;\n        if (url in cache)\n            return Promise.resolve(render(cache[url], context, asElement));\n        return this.fetchText(url).then(template => {\n            cache[url] = template;\n            return render(template, context, asElement);\n        });\n    },\n    //\n    on (el, name, callback) {\n        el = asSelect(el);\n        if (callback === null) return el.on(name, null);\n        else el.on(name, () => callback(event));\n    },\n    //\n    selectChildren (el) {\n        if (!arguments.length) el = this.el;\n        return this.selectAll(Array.prototype.slice.call(el.children));\n    },\n    //\n    domEvent () {\n        return event;\n    }\n};\n\n\nexport function jsonResponse (response) {\n    if (response.status >= 300) throw new HttpError(response);\n    var ct = (response.headers.get('content-type') || '').split(';')[0];\n    if (ct === 'application/json')\n        return response.json();\n    else\n        throw new Error(`Expected JSON content type, got ${ct}`);\n}\n\n\nfunction render (template, context, asElement) {\n    return asElement ? htmlElement(template, context) : html(template, context);\n}\n","import {assign, isFunction} from 'd3-let';\n\nimport providers from '../utils/providers';\nimport base from './base';\n\n\nproviders.transition = {\n    duration: 0\n};\n\n\nexport default assign(base, {\n    //\n    // return a transition object if possible\n    transition (sel) {\n        if (!arguments.length) sel = this.sel;\n        var duration = this.transitionDuration(sel);\n        if (duration > 0) return sel.transition(this.uid).duration(duration);\n    },\n\n    transitionDuration (sel) {\n        if (!arguments.length) sel = this.sel;\n        if (sel && isFunction(sel.transition) && sel.size()) {\n            var duration = sel.attr('data-transition-duration');\n            return +(duration === null ? providers.transition.duration : duration);\n        }\n        return 0;\n    }\n});\n","// Code originally from https://github.com/soney/jsep\n// Copyright (c) 2013 Stephen Oney, http://jsep.from.so/\n// Code modified and adapted to work with d3-view\n\n// This is the full set of types that any JSEP node can be.\n// Store them here to save space when minified\nexport const code = {\n    COMPOUND: 'Compound',\n    IDENTIFIER: 'Identifier',\n    MEMBER_EXP: 'MemberExpression',\n    LITERAL: 'Literal',\n    THIS_EXP: 'ThisExpression',\n    CALL_EXP: 'CallExpression',\n    UNARY_EXP: 'UnaryExpression',\n    BINARY_EXP: 'BinaryExpression',\n    LOGICAL_EXP: 'LogicalExpression',\n    CONDITIONAL_EXP: 'ConditionalExpression',\n    ARRAY_EXP: 'ArrayExpression'\n};\n\nvar PERIOD_CODE = 46, // '.'\n    COMMA_CODE  = 44, // ','\n    SQUOTE_CODE = 39, // single quote\n    DQUOTE_CODE = 34, // double quotes\n    OPAREN_CODE = 40, // (\n    CPAREN_CODE = 41, // )\n    OBRACK_CODE = 91, // [\n    CBRACK_CODE = 93, // ]\n    QUMARK_CODE = 63, // ?\n    SEMCOL_CODE = 59, // ;\n    COLON_CODE  = 58, // :\n\n    throwError = function(message, index) {\n        var error = new Error(message + ' at character ' + index);\n        error.index = index;\n        error.description = message;\n        throw error;\n    },\n\n// Operations\n// ----------\n\n// Set `t` to `true` to save space (when minified, not gzipped)\n    t = true,\n// Use a quickly-accessible map to store all of the unary operators\n// Values are set to `true` (it really doesn't matter)\n    unary_ops = {'-': t, '!': t, '~': t, '+': t},\n// Also use a map for the binary operations but set their values to their\n// binary precedence for quick reference:\n// see [Order of operations](http://en.wikipedia.org/wiki/Order_of_operations#Programming_language)\n    binary_ops = {\n        '||': 1, '&&': 2, '|': 3,  '^': 4,  '&': 5,\n        '==': 6, '!=': 6, '===': 6, '!==': 6,\n        '<': 7,  '>': 7,  '<=': 7,  '>=': 7,\n        '<<':8,  '>>': 8, '>>>': 8,\n        '+': 9, '-': 9,\n        '*': 10, '/': 10, '%': 10\n    },\n// Get return the longest key length of any object\n    getMaxKeyLen = function(obj) {\n        var max_len = 0, len;\n        for(var key in obj) {\n            if((len = key.length) > max_len && obj.hasOwnProperty(key)) {\n                max_len = len;\n            }\n        }\n        return max_len;\n    },\n    max_unop_len = getMaxKeyLen(unary_ops),\n    max_binop_len = getMaxKeyLen(binary_ops),\n// Literals\n// ----------\n// Store the values to return for the various literals we may encounter\n    literals = {\n        'true': true,\n        'false': false,\n        'null': null\n    },\n// Except for `this`, which is special. This could be changed to something like `'self'` as well\n    this_str = 'this',\n// Returns the precedence of a binary operator or `0` if it isn't a binary operator\n    binaryPrecedence = function(op_val) {\n        return binary_ops[op_val] || 0;\n    },\n// Utility function (gets called from multiple places)\n// Also note that `a && b` and `a || b` are *logical* expressions, not binary expressions\n    createBinaryExpression = function (operator, left, right) {\n        var type = (operator === '||' || operator === '&&') ? code.LOGICAL_EXP : code.BINARY_EXP;\n        return {\n            type: type,\n            operator: operator,\n            left: left,\n            right: right\n        };\n    },\n    // `ch` is a character code in the next three functions\n    isDecimalDigit = function(ch) {\n        return (ch >= 48 && ch <= 57); // 0...9\n    },\n    isIdentifierStart = function(ch) {\n        return (ch === 36) || (ch === 95) || // `$` and `_`\n                (ch >= 65 && ch <= 90) || // A...Z\n                (ch >= 97 && ch <= 122) || // a...z\n                (ch >= 128 && !binary_ops[String.fromCharCode(ch)]); // any non-ASCII that is not an operator\n    },\n    isIdentifierPart = function(ch) {\n        return (ch === 36) || (ch === 95) || // `$` and `_`\n                (ch >= 65 && ch <= 90) || // A...Z\n                (ch >= 97 && ch <= 122) || // a...z\n                (ch >= 48 && ch <= 57) || // 0...9\n                (ch >= 128 && !binary_ops[String.fromCharCode(ch)]); // any non-ASCII that is not an operator\n    },\n\n    // Parsing\n    // -------\n    // `expr` is a string with the passed in expression\n    jsep = function(expr) {\n        // `index` stores the character number we are currently at while `length` is a constant\n        // All of the gobbles below will modify `index` as we move along\n        var index = 0,\n            charAtFunc = expr.charAt,\n            charCodeAtFunc = expr.charCodeAt,\n            exprI = function(i) { return charAtFunc.call(expr, i); },\n            exprICode = function(i) { return charCodeAtFunc.call(expr, i); },\n            length = expr.length,\n\n            // Push `index` up to the next non-space character\n            gobbleSpaces = function() {\n                var ch = exprICode(index);\n                // space or tab\n                while(ch === 32 || ch === 9) {\n                    ch = exprICode(++index);\n                }\n            },\n\n            // The main parsing function. Much of this code is dedicated to ternary expressions\n            gobbleExpression = function() {\n                var test = gobbleBinaryExpression(),\n                    consequent, alternate;\n                gobbleSpaces();\n                if(exprICode(index) === QUMARK_CODE) {\n                    // Ternary expression: test ? consequent : alternate\n                    index++;\n                    consequent = gobbleExpression();\n                    if(!consequent) {\n                        throwError('Expected expression', index);\n                    }\n                    gobbleSpaces();\n                    if(exprICode(index) === COLON_CODE) {\n                        index++;\n                        alternate = gobbleExpression();\n                        if(!alternate) {\n                            throwError('Expected expression', index);\n                        }\n                        return {\n                            type: code.CONDITIONAL_EXP,\n                            test: test,\n                            consequent: consequent,\n                            alternate: alternate\n                        };\n                    } else {\n                        throwError('Expected :', index);\n                    }\n                } else {\n                    return test;\n                }\n            },\n\n            // Search for the operation portion of the string (e.g. `+`, `===`)\n            // Start by taking the longest possible binary operations (3 characters: `===`, `!==`, `>>>`)\n            // and move down from 3 to 2 to 1 character until a matching binary operation is found\n            // then, return that binary operation\n            gobbleBinaryOp = function() {\n                gobbleSpaces();\n                var to_check = expr.substr(index, max_binop_len), tc_len = to_check.length;\n                while(tc_len > 0) {\n                    if(binary_ops.hasOwnProperty(to_check)) {\n                        index += tc_len;\n                        return to_check;\n                    }\n                    to_check = to_check.substr(0, --tc_len);\n                }\n                return false;\n            },\n\n            // This function is responsible for gobbling an individual expression,\n            // e.g. `1`, `1+2`, `a+(b*2)-Math.sqrt(2)`\n            gobbleBinaryExpression = function() {\n                var node, biop, prec, stack, biop_info, left, right, i;\n\n                // First, try to get the leftmost thing\n                // Then, check to see if there's a binary operator operating on that leftmost thing\n                left = gobbleToken();\n                biop = gobbleBinaryOp();\n\n                // If there wasn't a binary operator, just return the leftmost node\n                if(!biop) {\n                    return left;\n                }\n\n                // Otherwise, we need to start a stack to properly place the binary operations in their\n                // precedence structure\n                biop_info = { value: biop, prec: binaryPrecedence(biop)};\n\n                right = gobbleToken();\n                if(!right) {\n                    throwError(\"Expected expression after \" + biop, index);\n                }\n                stack = [left, biop_info, right];\n\n                // Properly deal with precedence using [recursive descent](http://www.engr.mun.ca/~theo/Misc/exp_parsing.htm)\n                while((biop = gobbleBinaryOp())) {\n                    prec = binaryPrecedence(biop);\n\n                    if(prec === 0) {\n                        break;\n                    }\n                    biop_info = { value: biop, prec: prec };\n\n                    // Reduce: make a binary expression from the three topmost entries.\n                    while ((stack.length > 2) && (prec <= stack[stack.length - 2].prec)) {\n                        right = stack.pop();\n                        biop = stack.pop().value;\n                        left = stack.pop();\n                        node = createBinaryExpression(biop, left, right);\n                        stack.push(node);\n                    }\n\n                    node = gobbleToken();\n                    if(!node) {\n                        throwError(\"Expected expression after \" + biop, index);\n                    }\n                    stack.push(biop_info, node);\n                }\n\n                i = stack.length - 1;\n                node = stack[i];\n                while(i > 1) {\n                    node = createBinaryExpression(stack[i - 1].value, stack[i - 2], node);\n                    i -= 2;\n                }\n                return node;\n            },\n\n            // An individual part of a binary expression:\n            // e.g. `foo.bar(baz)`, `1`, `\"abc\"`, `(a % 2)` (because it's in parenthesis)\n            gobbleToken = function() {\n                var ch, to_check, tc_len;\n\n                gobbleSpaces();\n                ch = exprICode(index);\n\n                if(isDecimalDigit(ch) || ch === PERIOD_CODE) {\n                    // Char code 46 is a dot `.` which can start off a numeric literal\n                    return gobbleNumericLiteral();\n                } else if(ch === SQUOTE_CODE || ch === DQUOTE_CODE) {\n                    // Single or double quotes\n                    return gobbleStringLiteral();\n                } else if(isIdentifierStart(ch) || ch === OPAREN_CODE) { // open parenthesis\n                    // `foo`, `bar.baz`\n                    return gobbleVariable();\n                } else if (ch === OBRACK_CODE) {\n                    return gobbleArray();\n                } else {\n                    to_check = expr.substr(index, max_unop_len);\n                    tc_len = to_check.length;\n                    while(tc_len > 0) {\n                        if(unary_ops.hasOwnProperty(to_check)) {\n                            index += tc_len;\n                            return {\n                                type: code.UNARY_EXP,\n                                operator: to_check,\n                                argument: gobbleToken(),\n                                prefix: true\n                            };\n                        }\n                        to_check = to_check.substr(0, --tc_len);\n                    }\n\n                    return false;\n                }\n            },\n            // Parse simple numeric literals: `12`, `3.4`, `.5`. Do this by using a string to\n            // keep track of everything in the numeric literal and then calling `parseFloat` on that string\n            gobbleNumericLiteral = function() {\n                var number = '', ch, chCode;\n                while(isDecimalDigit(exprICode(index))) {\n                    number += exprI(index++);\n                }\n\n                if(exprICode(index) === PERIOD_CODE) { // can start with a decimal marker\n                    number += exprI(index++);\n\n                    while(isDecimalDigit(exprICode(index))) {\n                        number += exprI(index++);\n                    }\n                }\n\n                ch = exprI(index);\n                if(ch === 'e' || ch === 'E') { // exponent marker\n                    number += exprI(index++);\n                    ch = exprI(index);\n                    if(ch === '+' || ch === '-') { // exponent sign\n                        number += exprI(index++);\n                    }\n                    while(isDecimalDigit(exprICode(index))) { //exponent itself\n                        number += exprI(index++);\n                    }\n                    if(!isDecimalDigit(exprICode(index-1)) ) {\n                        throwError('Expected exponent (' + number + exprI(index) + ')', index);\n                    }\n                }\n\n\n                chCode = exprICode(index);\n                // Check to make sure this isn't a variable name that start with a number (123abc)\n                if(isIdentifierStart(chCode)) {\n                    throwError('Variable names cannot start with a number (' +\n                                number + exprI(index) + ')', index);\n                } else if(chCode === PERIOD_CODE) {\n                    throwError('Unexpected period', index);\n                }\n\n                return {\n                    type: code.LITERAL,\n                    value: parseFloat(number),\n                    raw: number\n                };\n            },\n\n            // Parses a string literal, staring with single or double quotes with basic support for escape codes\n            // e.g. `\"hello world\"`, `'this is\\nJSEP'`\n            gobbleStringLiteral = function() {\n                var str = '', quote = exprI(index++), closed = false, ch;\n\n                while(index < length) {\n                    ch = exprI(index++);\n                    if(ch === quote) {\n                        closed = true;\n                        break;\n                    } else if(ch === '\\\\') {\n                        // Check for all of the common escape codes\n                        ch = exprI(index++);\n                        switch(ch) {\n                            case 'n': str += '\\n'; break;\n                            case 'r': str += '\\r'; break;\n                            case 't': str += '\\t'; break;\n                            case 'b': str += '\\b'; break;\n                            case 'f': str += '\\f'; break;\n                            case 'v': str += '\\x0B'; break;\n                            default : str += '\\\\' + ch;\n                        }\n                    } else {\n                        str += ch;\n                    }\n                }\n\n                if(!closed) {\n                    throwError('Unclosed quote after \"'+str+'\"', index);\n                }\n\n                return {\n                    type: code.LITERAL,\n                    value: str,\n                    raw: quote + str + quote\n                };\n            },\n\n            // Gobbles only identifiers\n            // e.g.: `foo`, `_value`, `$x1`\n            // Also, this function checks if that identifier is a literal:\n            // (e.g. `true`, `false`, `null`) or `this`\n            gobbleIdentifier = function() {\n                var ch = exprICode(index), start = index, identifier;\n\n                if(isIdentifierStart(ch)) {\n                    index++;\n                } else {\n                    throwError('Unexpected ' + exprI(index), index);\n                }\n\n                while(index < length) {\n                    ch = exprICode(index);\n                    if(isIdentifierPart(ch)) {\n                        index++;\n                    } else {\n                        break;\n                    }\n                }\n                identifier = expr.slice(start, index);\n\n                if(literals.hasOwnProperty(identifier)) {\n                    return {\n                        type: code.LITERAL,\n                        value: literals[identifier],\n                        raw: identifier\n                    };\n                } else if(identifier === this_str) {\n                    return { type: code.THIS_EXP };\n                } else {\n                    return {\n                        type: code.IDENTIFIER,\n                        name: identifier\n                    };\n                }\n            },\n\n            // Gobbles a list of arguments within the context of a function call\n            // or array literal. This function also assumes that the opening character\n            // `(` or `[` has already been gobbled, and gobbles expressions and commas\n            // until the terminator character `)` or `]` is encountered.\n            // e.g. `foo(bar, baz)`, `my_func()`, or `[bar, baz]`\n            gobbleArguments = function(termination) {\n                var ch_i, args = [], node, closed = false;\n                while(index < length) {\n                    gobbleSpaces();\n                    ch_i = exprICode(index);\n                    if(ch_i === termination) { // done parsing\n                        closed = true;\n                        index++;\n                        break;\n                    } else if (ch_i === COMMA_CODE) { // between expressions\n                        index++;\n                    } else {\n                        node = gobbleExpression();\n                        if(!node || node.type === code.COMPOUND) {\n                            throwError('Expected comma', index);\n                        }\n                        args.push(node);\n                    }\n                }\n                if (!closed) {\n                    throwError('Expected ' + String.fromCharCode(termination), index);\n                }\n                return args;\n            },\n\n            // Gobble a non-literal variable name. This variable name may include properties\n            // e.g. `foo`, `bar.baz`, `foo['bar'].baz`\n            // It also gobbles function calls:\n            // e.g. `Math.acos(obj.angle)`\n            gobbleVariable = function() {\n                var ch_i, node;\n                ch_i = exprICode(index);\n\n                if(ch_i === OPAREN_CODE) {\n                    node = gobbleGroup();\n                } else {\n                    node = gobbleIdentifier();\n                }\n                gobbleSpaces();\n                ch_i = exprICode(index);\n                while(ch_i === PERIOD_CODE || ch_i === OBRACK_CODE || ch_i === OPAREN_CODE) {\n                    index++;\n                    if(ch_i === PERIOD_CODE) {\n                        gobbleSpaces();\n                        node = {\n                            type: code.MEMBER_EXP,\n                            computed: false,\n                            object: node,\n                            property: gobbleIdentifier()\n                        };\n                    } else if(ch_i === OBRACK_CODE) {\n                        node = {\n                            type: code.MEMBER_EXP,\n                            computed: true,\n                            object: node,\n                            property: gobbleExpression()\n                        };\n                        gobbleSpaces();\n                        ch_i = exprICode(index);\n                        if(ch_i !== CBRACK_CODE) {\n                            throwError('Unclosed [', index);\n                        }\n                        index++;\n                    } else if(ch_i === OPAREN_CODE) {\n                        // A function call is being made; gobble all the arguments\n                        node = {\n                            type: code.CALL_EXP,\n                            'arguments': gobbleArguments(CPAREN_CODE),\n                            callee: node\n                        };\n                    }\n                    gobbleSpaces();\n                    ch_i = exprICode(index);\n                }\n                return node;\n            },\n\n            // Responsible for parsing a group of things within parentheses `()`\n            // This function assumes that it needs to gobble the opening parenthesis\n            // and then tries to gobble everything within that parenthesis, assuming\n            // that the next thing it should see is the close parenthesis. If not,\n            // then the expression probably doesn't have a `)`\n            gobbleGroup = function() {\n                index++;\n                var node = gobbleExpression();\n                gobbleSpaces();\n                if(exprICode(index) === CPAREN_CODE) {\n                    index++;\n                    return node;\n                } else {\n                    throwError('Unclosed (', index);\n                }\n            },\n\n            // Responsible for parsing Array literals `[1, 2, 3]`\n            // This function assumes that it needs to gobble the opening bracket\n            // and then tries to gobble the expressions as arguments.\n            gobbleArray = function() {\n                index++;\n                return {\n                    type: code.ARRAY_EXP,\n                    elements: gobbleArguments(CBRACK_CODE)\n                };\n            },\n\n            nodes = [], ch_i, node;\n\n        while(index < length) {\n            ch_i = exprICode(index);\n\n            // Expressions can be separated by semicolons, commas, or just inferred without any\n            // separators\n            if(ch_i === SEMCOL_CODE || ch_i === COMMA_CODE) {\n                index++; // ignore separators\n            } else {\n                // Try to gobble each expression individually\n                if((node = gobbleExpression())) {\n                    nodes.push(node);\n                // If we weren't able to find a binary expression and are out of room, then\n                // the expression passed in probably has too much\n                } else if(index < length) {\n                    throwError('Unexpected \"' + exprI(index) + '\"', index);\n                }\n            }\n        }\n\n        // If there's only one expression just try returning the expression\n        if(nodes.length === 1) {\n            return nodes[0];\n        } else {\n            return {\n                type: code.COMPOUND,\n                body: nodes\n            };\n        }\n    };\n\n\n/**\n * @method jsep.addUnaryOp\n * @param {string} op_name The name of the unary op to add\n * @return jsep\n */\njsep.addUnaryOp = function(op_name) {\n    max_unop_len = Math.max(op_name.length, max_unop_len);\n    unary_ops[op_name] = t; return this;\n};\n\n/**\n * @method jsep.addBinaryOp\n * @param {string} op_name The name of the binary op to add\n * @param {number} precedence The precedence of the binary op (can be a float)\n * @return jsep\n */\njsep.addBinaryOp = function(op_name, precedence) {\n    max_binop_len = Math.max(op_name.length, max_binop_len);\n    binary_ops[op_name] = precedence;\n    return this;\n};\n\n/**\n * @method jsep.addLiteral\n * @param {string} literal_name The name of the literal to add\n * @param {*} literal_value The value of the literal\n * @return jsep\n */\njsep.addLiteral = function(literal_name, literal_value) {\n    literals[literal_name] = literal_value;\n    return this;\n};\n\n/**\n * @method jsep.removeUnaryOp\n * @param {string} op_name The name of the unary op to remove\n * @return jsep\n */\njsep.removeUnaryOp = function(op_name) {\n    delete unary_ops[op_name];\n    if(op_name.length === max_unop_len) {\n        max_unop_len = getMaxKeyLen(unary_ops);\n    }\n    return this;\n};\n\n/**\n * @method jsep.removeBinaryOp\n * @param {string} op_name The name of the binary op to remove\n * @return jsep\n */\njsep.removeBinaryOp = function(op_name) {\n    delete binary_ops[op_name];\n    if(op_name.length === max_binop_len) {\n        max_binop_len = getMaxKeyLen(binary_ops);\n    }\n    return this;\n};\n\n/**\n * @method jsep.removeLiteral\n * @param {string} literal_name The name of the literal to remove\n * @return jsep\n */\njsep.removeLiteral = function(literal_name) {\n    delete literals[literal_name];\n    return this;\n};\n\n\nexport default jsep;\n","import {set} from 'd3-collection';\n\nimport {code} from './jsep';\n\n\nexport function evaluate (self, expr, nested) {\n    switch(expr.type) {\n        case code.IDENTIFIER: return self[expr.name];\n        case code.LITERAL: return nested ? self[expr.value] : expr.value;\n        case code.ARRAY_EXP: return expr.elements.map((elem) => {return evaluate(self, elem);});\n        case code.LOGICAL_EXP:\n        case code.BINARY_EXP: return binaryExp(expr.operator, evaluate(self, expr.left), evaluate(self, expr.right));\n        case code.CALL_EXP: return callExpression(self, expr.callee, expr.arguments);\n        case code.MEMBER_EXP: return evaluate(evaluate(self, expr.object), expr.property, true);\n        case code.CONDITIONAL_EXP: return evaluate(self, expr.test) ? evaluate(self, expr.consequent) : evaluate(self, expr.alternate);\n        case code.UNARY_EXP: return unaryExp(expr.operator, evaluate(self, expr.argument));\n    }\n}\n\n// extract identifiers\nexport function identifiers (expr, all) {\n    if (arguments.length === 1) all = set();\n    switch(expr.type) {\n        case code.IDENTIFIER:\n            all.add(expr.name); break;\n        case code.ARRAY_EXP:\n            expr.elements.forEach(elem => identifiers(elem, all));\n            break;\n        case code.LOGICAL_EXP:\n        case code.BINARY_EXP:\n            identifiers(expr.left, all);\n            identifiers(expr.right, all);\n            break;\n        case code.CALL_EXP:\n            identifiers(expr.callee, all);\n            expr.arguments.forEach(elem => identifiers(elem, all));\n            break;\n        case code.MEMBER_EXP:\n            all.add(fullName(expr));\n            break;\n        case code.CONDITIONAL_EXP:\n            identifiers(expr.test, all);\n            identifiers(expr.consequent, all);\n            evaluate(expr.alternate, all);\n            break;\n        case code.UNARY_EXP:\n            identifiers(expr.argument, all);\n            break;\n    }\n    return all;\n}\n\n\n\nfunction callExpression (self, callee, args) {\n    var func;\n\n    args = args.map((arg) => {\n        return evaluate(self, arg);\n    });\n\n    if (callee.type !== code.IDENTIFIER) {\n        self = evaluate(self, callee.object);\n        callee = callee.property;\n    }\n\n    func = self[callee.name];\n    if (!func)\n        throw new EvalError(`callable \"${callee.name}\" not found in context`);\n    return func.apply(self, args);\n}\n\n\nfunction unaryExp (op, arg) {\n    if (!unaryFunctions[op])\n        unaryFunctions[op] = new Function(\"arg\", `return ${op} arg`);\n    return unaryFunctions[op](arg);\n}\n\n\nfunction binaryExp(op, a, b) {\n    if (!binaryFunctions[op])\n        binaryFunctions[op] = new Function(\"a\", \"b\", `return a ${op} b`);\n    return binaryFunctions[op](a, b);\n}\n\n\nfunction fullName (expr) {\n    if (expr.type === code.IDENTIFIER) return expr.name;\n    else return `${fullName(expr.object)}.${expr.property.name}`;\n}\n\nconst unaryFunctions = {};\nconst binaryFunctions = {};\n","// tiny javascript expression parser\nimport jsep, {code} from './jsep';\nimport {evaluate, identifiers} from './eval';\nimport warn from '../utils/warn';\n\n\nconst proto = {\n\n    eval: function (model) {\n        return evaluate(model, this.parsed);\n    },\n\n    safeEval: function (model) {\n        try {\n            return evaluate(model, this.parsed);\n        } catch (msg) {\n            warn(`Could not evaluate <<${this.expr}>> expression: ${msg}`);\n        }\n    },\n\n    // evaluate identifiers from a model\n    identifiers: function () {\n        return identifiers(this.parsed).values();\n    }\n};\n\n\nfunction Expression (expr) {\n    this.codes = code;\n    this.expr = expr;\n    this.parsed = jsep(expr);\n}\n\nExpression.prototype = proto;\n\n\nexport default function (expr) {\n    return new Expression(expr);\n}\n","let UID = 0;\nconst prefix = 'd3v';\n\n// Add a unique identifier to an object\nexport default function (o) {\n    var uid = prefix + (++UID);\n\n    if (arguments.length) {\n        Object.defineProperty(o, 'uid', {\n            get: function () {\n                return uid;\n            }\n        });\n\n        return o;\n    } else\n        return uid;\n}\n","import {dispatch} from 'd3-dispatch';\n\nimport debounce from '../utils/debounce';\n\n\nexport default function () {\n    var events = dispatch('change'),\n        triggered = 0;\n\n    return {\n        on (typename, callback) {\n            if (arguments.length < 2)\n                return events.on(typename);\n            events.on(typename, callback);\n            return this;\n        },\n        trigger: debounce(function () {\n            events.apply('change', this, arguments);\n            triggered +=1;\n        }),\n        triggered () {\n            return triggered;\n        }\n    };\n}\n","import {map} from 'd3-collection';\n\nimport uid from '../utils/uid';\nimport ddispatch from './dispatch';\n\n//\n// Initialise a model\nexport default function asModel (model, initials, parent, isolated) {\n    var events = map(),\n        Child = null;\n\n    // event handler for any change in the model\n    events.set('', ddispatch());\n\n    Object.defineProperties(uid(model), {\n        $events: {\n            get () {\n                return events;\n            }\n        },\n        parent: {\n            get () {\n                return parent;\n            }\n        },\n        isolated: {\n            get () {\n                return isolated;\n            }\n        }\n    });\n    model.$child = $child;\n    model.$update(initials);\n\n    function $child (o) {\n        if (Child === null) Child = createChildConstructor(model);\n        return new Child(o);\n    }\n}\n\nfunction createChildConstructor (model) {\n\n    function Child (initials) {\n        asModel(this, initials, model, false);\n    }\n\n    Child.prototype = model;\n    return Child;\n}\n","const modelStr = \"[object d3Model]\";\n\n\nexport default function () {\n    return modelStr;\n}\n","// Check if a value is a vanilla javascript object\nexport default function (value) {\n    return value && value.constructor === Object;\n}\n","import {isFunction, isArray, isObject} from 'd3-let';\n\nimport warn from '../utils/warn';\nimport debug from '../utils/debug';\nimport isVanillaObject from '../utils/object';\nimport ddispatch from './dispatch';\n\n\n//  $set a reactive attribute for a Model\n//\n//  Set the value of an attribute in the model\n//  If the attribute is not already reactive make it as such.\n//\nexport default function (key, value) {\n    // property not reactive - make it as such\n    if (!this.$events.get(key)) reactive(this, key, value);\n    else this[key] = value;\n}\n\n\nfunction isModel (value) {\n    return isObject(value) && value.toString() === '[object d3Model]';\n}\n\n\nfunction reactive (model, key, value) {\n    var lazy;\n\n    model.$events.set(key, ddispatch());\n\n    Object.defineProperty(model, key, property());\n\n    // Create a new model if value is an object\n    value = typeValue(value);\n    // Trigger the callback once for initialization\n    model.$change(key);\n\n    function update (newValue) {\n        if (lazy) newValue = lazy.get.call(model);\n        if (newValue === value) return;\n        // trigger lazy callbacks\n        //\n        // Fire model events\n        var modelName = model.$$name || 'model';\n        debug(`updating ${modelName}.${key}`);\n        model.$change(key, value).$change();\n        value = typeValue (newValue, value);\n    }\n\n    function property () {\n        var prop = {\n                get: function () {\n                    return value;\n                }\n            };\n\n        if (isFunction(value)) value = {get: value};\n\n        // calculated attribute\n        if (isVanillaObject(value) && isFunction(value.get)) {\n            lazy = value;\n            value = lazy.get.call(model);\n\n            if (lazy.reactOn)\n                lazy.reactOn.forEach((name) => {\n                    model.$on(`${name}.${key}`, update);\n                });\n            else\n                warn(`reactive lazy property ${key} does not specify 'reactOn' list or properties`);\n\n            if (isFunction(lazy.set)) prop.set = lazy.set;\n        } else\n            prop.set = update;\n\n        return prop;\n    }\n\n    function typeValue (newValue, oldValue) {\n        if (newValue === oldValue)\n            return oldValue;\n        else if (isArray(newValue))\n            return arrayValue(newValue, oldValue);\n        else if (isModel(oldValue))\n            return modelValue(newValue, oldValue);\n        else\n            return isVanillaObject(newValue) ? model.$new(newValue) : newValue;\n    }\n\n    function arrayValue (newValue, oldValue) {\n        if (isModel(oldValue)) oldValue.$off();\n        if (!isArray(oldValue)) oldValue = [];\n        for (let i=0; i<newValue.length; ++i)\n            newValue[i] = typeValue(newValue[i], oldValue[i]);\n        return newValue;\n    }\n\n    function modelValue (newValue, oldValue) {\n        if (isVanillaObject(newValue)) {\n            oldValue.$update(newValue);\n            return oldValue;\n        } else {\n            oldValue.$off();\n            return typeValue(newValue);\n        }\n    }\n}\n","import {isFunction} from 'd3-let';\n\nimport warn from '../utils/warn';\n\n\n// Add change callback to a model reactive attribute\nexport default function (name, callback) {\n\n    // When no name is provided, whait for changes on this model - no its parents\n    if (arguments.length === 1 && isFunction(name)) {\n        callback = name;\n        name = '';\n    }\n\n    var bits = name.split('.'),\n        key = bits[0],\n        event = getEvent(this, key);\n\n    if (!event) return warn(`Cannot bind to \"${key}\" - no such reactive property`);\n\n    // event from a parent model, add model uid to distinguish it from other child callbacks\n    if (!this.$events.get(key)) bits.push(this.uid);\n\n    bits[0] = 'change';\n    return event.on(bits.join('.'), callback);\n}\n\n\nfunction getEvent(model, name) {\n    var event = model.$events.get(name);\n    if (!event && model.parent) return getEvent(model.parent, name);\n    return event;\n}\n","import warn from '../utils/warn';\n\n// Update a model with reactive model data\nexport default function (data, replace) {\n    if (data) {\n        replace = arguments.length === 2 ? replace : true;\n        for (var key in data) {\n            if (replace || this[key] === undefined) {\n                if (key.substring(0, 1) === '$') {\n                    if (this.constructor.prototype[key]) warn(`Cannot set attribute method ${key}, it is protected`);\n                    else this[key] = data[key];\n                } else\n                    this.$set(key, data[key]);\n            }\n        }\n    }\n    return this;\n}\n","// remove event handlers\nexport default function (attr) {\n    if (attr === undefined)\n        this.$events.each((event) => removeEvent(event));\n    else {\n        var bits = attr.split('.'),\n            type = bits.splice(0, 1)[0],\n            event = this.$events.get(type);\n        if (event) removeEvent(event, bits.join('.'));\n    }\n}\n\n\nfunction removeEvent (event, name) {\n    if (name) event.on(`change.${name}`, null);\n    else event.on('change', null);\n}\n","export default function (obj, idx=0) {\n    return Array.prototype.slice.call(obj, idx);\n}\n","import warn from '../utils/warn';\nimport slice from '../utils/slice';\n\n\n// trigger change event on a model reactive attribute\nexport default function (attribute) {\n    var name = arguments.length ? attribute : '',\n        event = this.$events.get(name),\n        args = slice(arguments, 1);\n    if (event) event.trigger.apply(this, args);\n    else if (!this.isolated) this.parent.$change(name);\n    else warn(`attribute '${name}' is not a reactive property this model`);\n    return this;\n}\n","//\n//check if an attribute is a reactive attribute for the model (or its prototypical parent)\nexport default function (attr) {\n    if (!this.$events.has(attr)) {\n        if (!this.parent || this.isolated) return false;\n        return this.parent.$isReactive(attr);\n    }\n    return true;\n}\n","//\n//  Return the model owning the reactive attribute attr\nexport default function (attr) {\n    if (!this.$events.has(attr)) {\n        if (!this.parent || this.isolated) return;\n        return this.parent.$owner(attr);\n    }\n    return this;\n}\n","export function $push (attr, value) {\n    var array = this[attr].slice();\n    array.push(value);\n    this[attr] = array;\n    return this;\n}\n\nexport function $splice (attr, idx, count) {\n    var array = this[attr].slice();\n    if (arguments.length == 2) array.splice(idx);\n    else if (arguments.length == 3) array.splice(idx, count);\n    this[attr] = array;\n    return this;\n}\n","import asModel from './as';\nimport toString from './string';\nimport $set from './set';\nimport $on from './on';\nimport $update from './update';\nimport $off from './off';\nimport $change from './change';\nimport $isReactive from './isreactive';\nimport $owner from './owner';\nimport {$push, $splice} from './array';\n\n//\n//  Model class\n//\n//  The model is at the core of d3-view reactive data component\nfunction Model (initials, parent) {\n    asModel(this, initials, parent, true);\n}\n\nexport default function model (initials) {\n    return new Model(initials);\n}\n\nmodel.prototype = Model.prototype = {\n    constructor: Model,\n    // Public API methods\n    toString,\n    $on,\n    $change,\n    $update,\n    $set,\n    $new,\n    $off,\n    $isReactive,\n    $owner,\n    $push,\n    $splice\n};\n\nObject.defineProperty(Model.prototype, 'root', {\n    get: function () {\n        return this.parent ? this.parent.root : this;\n    }\n});\n\n\nfunction $new (initials) {\n    return new Model(initials, this);\n}\n","import {isFunction, isObject, assign} from 'd3-let';\nimport {map, set} from 'd3-collection';\n\nimport viewExpression from '../parser/expression';\nimport viewModel from '../model/main';\nimport warn from '../utils/warn';\nimport uid from '../utils/uid';\nimport sel from '../utils/sel';\nimport base from './transition';\n\n//\n// Directive Prototype\n//\n// Directives are special attributes with the d3- prefix.\n// Directive attribute values are expected to be binding expressions.\n// A directives job is to reactively apply special behavior to the DOM\n// when the value of its expression changes.\n//\n// A directive can implement one or more of the directive methods:\n//\n//  * create\n//  * mount\n//  * refresh\n//  * destroy\n//\nconst prototype = {\n\n    // hooks\n    create (expression) {\n        return expression;\n    },\n\n    // pre mount\n    preMount () {\n\n    },\n\n    mount (model) {\n        return model;\n    },\n\n    refresh () {\n\n    },\n\n    destroy () {\n\n    },\n\n    removeAttribute () {\n        this.el.removeAttribute(this.name);\n    },\n\n    // Execute directive\n    execute (model) {\n        if (!this.active) return;\n        this.removeAttribute();\n        this.identifiers = [];\n        model = this.mount(model);\n        // If model returned, bind the element to its properties\n        if (model) this.bindModel(model);\n    },\n\n    bindModel (model) {\n        var dir = this,\n            refresh = function () {\n                let value = dir.expression ? dir.expression.eval(model) : undefined;\n                dir.refresh(model, value);\n                dir.passes++;\n            };\n\n        // Bind expression identifiers with model\n        let bits, target, attr, i;\n        if (!this.expression) {\n            dir.identifiers.push({\n                model: model,\n                attr: ''\n            });\n        } else {\n            var modelEvents = map();\n            this.expression.identifiers().forEach(identifier => {\n                bits = identifier.split('.');\n                target = model;\n                attr = null;\n\n                for (i=0; i<bits.length-1; ++i) {\n                    target = target[bits[i]];\n                    if (!isObject(target)) {\n                        attr = bits.slice(0, i+1).join('.');\n                        warn(`Property ${attr} is not an object. Directive ${dir.name} cannot bind to ${identifier}`);\n                        break;\n                    }\n                }\n\n                // process attribute\n                if (attr === null) {\n                    if (!(target instanceof viewModel))\n                        return warn(`${identifier} is not a reactive model. Directive ${dir.name} cannot bind to it`);\n                    addTarget(modelEvents, target, bits[bits.length-1]);\n                }\n            });\n\n            // register with model reactive properties\n            modelEvents.each(target => {\n                // if we are listening to all event simply bind to the model changes\n                if (target.events.has(''))\n                    dir.identifiers.push({\n                        model: target.model,\n                        attr: ''\n                    });\n                else\n                    target.events.each(attr => {\n                        dir.identifiers.push({\n                            model: target.model,\n                            attr: attr\n                        });\n                    });\n            });\n        }\n\n        this.identifiers.forEach(identifier => {\n            var event = `${identifier.attr}.${dir.uid}`;\n            identifier.model.$on(event, refresh);\n        });\n\n        this.bindDestroy(model);\n\n        refresh();\n    },\n\n    bindDestroy (model) {\n        var dir = this,\n            destroy = this.destroy;\n        // bind destroy to the model\n        dir.destroy = () => destroy.call(dir, model);\n\n        this.sel.on(`remove.${dir.uid}`, () => {\n            this.identifiers.forEach(identifier => {\n                identifier.model.$off(`${identifier.attr}.${dir.uid}`);\n            });\n            dir.destroy();\n        });\n    }\n};\n\n// Directive constructor\nexport default function (obj) {\n\n    function Directive (el, attr, arg) {\n        this.el = el;\n        this.name = attr.name;\n        this.arg = arg;\n        this.passes = 0;\n        var expr = sel(uid(this)).create(attr.value);\n        if (expr) this.expression = viewExpression(expr);\n        if (!this.active)\n            this.active = !attr.value || this.expression;\n    }\n\n    Directive.prototype = assign({}, base, prototype, obj);\n\n    function directive (el, attr, arg) {\n        return new Directive(el, attr, arg);\n    }\n\n    directive.prototype = Directive.prototype;\n    return directive;\n}\n\n\nfunction addTarget (modelEvents, model, attr) {\n    var value = arguments.length === 3 ? model[attr] : undefined;\n    //\n    // a method of the model, event is at model level\n    if (isFunction(value) || arguments.length === 2)\n        getTarget(modelEvents, model).events.add('');\n    // value is another model, events at both target model level and value model level\n    else if (value instanceof viewModel) {\n        addTarget(modelEvents, value);\n        model = model.$owner(attr);\n        if (model) getTarget(modelEvents, model).events.add('');\n    } else {\n        // make sure attr is a reactive property of model\n        model = model.$owner(attr) || model;\n        if (!model.$isReactive(attr)) model.$set(attr, value);\n        getTarget(modelEvents, model).events.add(attr);\n    }\n}\n\nfunction getTarget(modelEvents, model) {\n    var target = modelEvents.get(model.uid);\n    if (!target) {\n        target = {\n            model: model,\n            events: set()\n        };\n        modelEvents.set(model.uid, target);\n    }\n    return target;\n}\n","import {isString} from 'd3-let';\n\nexport default function (value) {\n    if (isString(value)) {\n        try {\n            return JSON.parse(value);\n        } catch (msg) {\n            return value;\n        }\n    }\n    return value;\n}\n","import {pop} from 'd3-let';\n\nconst DATAPREFIX = 'data-';\n\n\nexport default function (attrs) {\n    var keys = Object.keys(attrs);\n    let p;\n    return keys.reduce((o, key) => {\n        if (key.substring(0, 5) === DATAPREFIX) {\n            p = key.split('-').splice(1).reduce((s, key, idx) => {\n                s += idx ? key.substring(0, 1).toUpperCase() + key.substring(1) : key;\n                return s;\n            }, '');\n            o[p] = pop(attrs, key);\n        }\n        return o;\n    }, {});\n}\n","import {dispatch} from 'd3-dispatch';\n\n\nexport default dispatch(\n    'message',\n    'component-created',\n    'component-mount',\n    'component-mounted'\n);\n","import {isFunction, isArray, isObject, isString, pop, assign} from 'd3-let';\nimport {map} from 'd3-collection';\nimport {dispatch} from 'd3-dispatch';\n\nimport base from './transition';\nimport createDirective from './directive';\nimport warn from '../utils/warn';\nimport asSelect from '../utils/select';\nimport maybeJson from '../utils/maybeJson';\nimport sel from '../utils/sel';\nimport dataAttributes from '../utils/data';\nimport viewEvents from './events';\n\n\n// prototype for both views and components\nconst protoComponent = {\n    //\n    // hooks\n    render () {},\n    childrenMounted () {},\n    mounted () {},\n    destroy () {},\n    //\n    // Mount the component into an element\n    // If this component is already mounted, or it is mounting, it does nothing\n    mount (el, data, onMounted) {\n        if (mounted(this)) warn('already mounted');\n        else {\n            viewEvents.call('component-mount', undefined, this, el, data);\n            var sel = this.select(el),\n                directives = sel.directives(),\n                dattrs = directives ? directives.attrs : attributes(el),\n                parentModel = this.parent.model,\n                datum = sel.datum();\n\n            let props = this.props,\n                model = this.model,\n                modelData = assign(dataAttributes(dattrs), datum, data),\n                key, value;\n\n            data = assign({}, datum, data);\n\n            // override model keys from data object and element attributes\n            for (key in model) {\n                value = pop(modelData, key);\n                if (value !== undefined) {\n                    if (isString(value)) {\n                        if (parentModel.$isReactive(value)) {\n                            if (value !== key) model[key] = reactiveParentProperty(value);\n                            else delete model[key];\n                        } else model[key] = maybeJson(value);\n                    } else model[key] = value;\n                }\n            }\n\n            // Create model\n            this.model = model = parentModel.$child(model);\n            model.$$view = this;\n            model.$$name = this.name;\n            if (isArray(props)) props = props.reduce((o, key) => {\n                o[key] = undefined;\n                return o;\n            }, {});\n\n            if (isObject(props)) {\n                Object.keys(props).forEach(key => {\n                    value = maybeJson(modelData[key] === undefined ? (data[key] === undefined ? dattrs[key] : data[key]) : modelData[key]);\n                    if (value !== undefined) {\n                        // data point to a model attribute\n                        if (isString(value) && model[value]) value = model[value];\n                        data[key] = value;\n                    } else if (props[key] !== undefined) {\n                        data[key] = props[key];\n                    }\n                });\n            }\n            //\n            // create the new element from the render function\n            var newEl = this.render(data, dattrs, el);\n            if (!newEl.then) newEl = Promise.resolve(newEl);\n            return newEl.then(element => compile(this, el, element, onMounted));\n        }\n    }\n};\n\n// factory of View and Component constructors\nexport function createComponent (name, o, coreDirectives) {\n    if (isFunction(o)) o = {render: o};\n\n    var obj = assign({}, o),\n        classComponents = extendComponents(map(), pop(obj, 'components')),\n        classDirectives = extendDirectives(map(), pop(obj, 'directives')),\n        model = pop(obj, 'model'),\n        props = pop(obj, 'props');\n\n    function Component (options) {\n        var parent = pop(options, 'parent'),\n            components = map(parent ? parent.components : null),\n            directives = map(parent ? parent.directives : coreDirectives),\n            events = dispatch('message', 'mounted'),\n            cache = {};\n\n        classComponents.each((comp, key) => {\n            components.set(key, comp);\n        });\n        classDirectives.each((comp, key) => {\n            directives.set(key, comp);\n        });\n        extendComponents(components, pop(options, 'components'));\n        extendDirectives(directives, pop(options, 'directives'));\n\n        Object.defineProperties(this, {\n            name : {\n                get () {\n                    return name;\n                }\n            },\n            components: {\n                get: function () {\n                    return components;\n                }\n            },\n            directives: {\n                get: function () {\n                    return directives;\n                }\n            },\n            parent: {\n                get: function () {\n                    return parent;\n                }\n            },\n            root: {\n                get: function () {\n                    return parent ? parent.root : this;\n                }\n            },\n            cache: {\n                get: function () {\n                    return parent ? parent.cache : cache;\n                }\n            },\n            props: {\n                get: function () {\n                    return props;\n                }\n            },\n            uid: {\n                get: function () {\n                    return this.model.uid;\n                }\n            },\n            events: {\n                get: function () {\n                    return events;\n                }\n            }\n        });\n        this.model = assign({}, isFunction(model) ? model() : model, pop(options, 'model'));\n        viewEvents.call('component-created', undefined, this);\n    }\n\n    Component.prototype = assign({}, base, protoComponent, obj);\n\n    function component (options) {\n        return new Component(options);\n    }\n\n    component.prototype = Component.prototype;\n\n    return component;\n}\n\n\n// Used by both Component and view\n\nexport function extendComponents (container, components) {\n    map(components).each((obj, key) => {\n        container.set(key, createComponent(key, obj, protoComponent));\n    });\n    return container;\n}\n\nexport function extendDirectives (container, directives) {\n    map(directives).each((obj, key) => {\n        container.set(key, createDirective(obj));\n    });\n    return container;\n}\n\n// Finalise the binding between the view and the model\n// inject the model into the view element\n// call the mounted hook and can return a Promise\nexport function asView(vm, element, onMounted) {\n    Object.defineProperty(sel(vm), 'el', {\n        get: function () {\n            return element;\n        }\n    });\n    // Apply model to element and mount\n    return vm.select(element).view(vm).mount(null, onMounted).then(() => vmMounted(vm, onMounted));\n}\n\nexport function mounted (vm, onMounted) {\n    if (vm.isMounted === undefined) {\n        vm.isMounted = false;\n        return false;\n    }\n    else if (vm.isMounted) {\n        warn(`view ${vm.name} already mounted`);\n    }\n    else {\n        vm.isMounted = true;\n        // invoke mounted component hook\n        vm.mounted();\n        // invoke onMounted callback if available\n        if (onMounted) onMounted(vm);\n        // last invoke the view mounted events\n        vm.events.call('mounted', undefined, vm, onMounted);\n        // remove mounted events\n        vm.events.on('mounted', null);\n        // fire global event\n        viewEvents.call('component-mounted', undefined, vm);\n    }\n    return true;\n}\n\n// Internals\n\n//\n//  Component/View mounted\n//  =========================\n//\n//  This function is called when a component/view has all its children added\nfunction vmMounted(vm, onMounted) {\n    var parent = vm.parent;\n    vm.childrenMounted();\n    if (parent && !parent.isMounted) {\n        parent.events.on(`mounted.${vm.uid}`, () => {\n            mounted(vm, onMounted);\n        });\n    }\n    else {\n        mounted(vm, onMounted);\n    }\n}\n\n// Compile a component model\n// This function is called once a component has rendered the component element\nfunction compile (cm, el, element, onMounted) {\n    if (!element) return warn('render function must return a single HTML node. It returned nothing!');\n    element = asSelect(element);\n    if (element.size() !== 1) warn('render function must return a single HTML node');\n    element = element.node();\n    //\n    // Insert before the component element\n    el.parentNode.insertBefore(element, el);\n    // remove the component element\n    cm.select(el).remove();\n    //\n    return asView(cm, element, onMounted);\n}\n\n\nfunction attributes (element) {\n    var attrs = {};\n    let attr;\n    for (let i = 0; i < element.attributes.length; ++i) {\n        attr = element.attributes[i];\n        attrs[attr.name] = attr.value;\n    }\n    return attrs;\n}\n\n\nfunction reactiveParentProperty (value) {\n    return {\n        reactOn: [value],\n        get () {\n            return this[value];\n        }\n    };\n}\n","import {select} from 'd3-selection';\n\nimport warn from '../utils/warn';\n\n// No value, it has its own directive\nconst attributes = ['name', 'class', 'disabled', 'readonly', 'required', 'href'];\n\n\nexport default function (element, directives) {\n    var sel = select(element),\n        dirs = sel.directives();\n    if (dirs) return dirs;\n    dirs = new Directives();\n\n    if (!directives) return dirs;\n\n    for (let i = 0; i < element.attributes.length; ++i) {\n        let attr = element.attributes[i],\n            bits = attr.name.split('-'),\n            dirName = bits[0] === 'd3' ? bits[1] : null,\n            arg;\n\n        if (dirName) {\n            arg = bits.slice(2).join('-');\n            if (!arg && attributes.indexOf(dirName) > -1) {\n                arg = dirName;\n                dirName = 'attr';\n            }\n            var directive = directives.get(dirName);\n            if (directive) dirs.add(directive(element, attr, arg));\n            else warn(`${element.tagName} cannot find directive \"${dirName}\". Did you forget to register it?`);\n        }\n        dirs.attrs[attr.name] = attr.value;\n    }\n\n    if (dirs.size()) sel.directives(dirs);\n    return dirs;\n}\n\n\n// Directives container\nfunction Directives () {\n    this.attrs = {};\n    this.all = [];\n}\n\n\nDirectives.prototype = {\n\n    size () {\n        return this.all.length;\n    },\n\n    pop: function (dir) {\n        var index = this.all.indexOf(dir);\n        if (index > -1) {\n            dir.removeAttribute();\n            this.all.splice(index, 1);\n        }\n        return dir;\n    },\n\n    add (dir) {\n        this.all.push(dir);\n    },\n\n    forEach (callback) {\n        this.all.forEach(callback);\n    },\n\n    preMount () {\n        let dir;\n        for (let i=0; i<this.all.length; ++i) {\n            dir = this.all[i];\n            if (dir.preMount()) return this.pop(dir);\n        }\n    },\n\n    execute (model) {\n        if (!this.size()) return;\n        return Promise.all(this.all.map(d => d.execute(model)));\n    }\n};\n","import {select, selection} from 'd3-selection';\n\nimport getdirs from './getdirs';\nimport slice from '../utils/slice';\nimport warn from '../utils/warn';\n\n\n// Extend selection prototype with new methods\nselection.prototype.mount = mount;\nselection.prototype.view = view;\nselection.prototype.model = model;\nselection.prototype.directives = directives;\n\n\nfunction directives (value) {\n    return arguments.length\n      ? this.property(\"__d3_directives__\", value)\n      : this.node().__d3_directives__;\n}\n\n\nfunction model () {\n    var vm = this.view();\n    return vm ? vm.model : null;\n}\n\n\nfunction view (value) {\n    if (arguments.length) {\n        return this.property(\"__d3_view__\", value);\n    } else {\n        var element = this.node(),\n            view = element ? element.__d3_view__ : null,\n            parent = element ? element.parentNode : null;\n\n        while (parent && !view) {\n            view = parent.__d3_view__;\n            parent = parent.parentNode;\n        }\n        return view;\n    }\n}\n\n//\n// mount function on a d3 selection\n// Use this function to mount the selection\n// THis method returns nothing or a promise\nfunction mount (data, onMounted) {\n    var promises = [];\n    this.each(function () {\n        var view = select(this).view();\n        if (view) promises.push(mountElement(this, view, data, onMounted));\n        else warn('Cannot mount, no view object available to mount to');\n    });\n    return Promise.all(promises);\n}\n\n\n// mount an element into a given model\nfunction mountElement (element, vm, data, onMounted) {\n    if (!element || !element.tagName) return;\n\n    var component = vm.components.get(element.tagName.toLowerCase()),\n        directives = getdirs(element, vm.directives),\n        preMount = directives.preMount();\n\n    if (preMount)\n        return preMount.execute(vm.model);\n    else {\n        let promises;\n        if (component)\n            promises = [component({parent: vm}).mount(element, data, onMounted)];\n        else\n            promises = slice(element.children).map(c => mountElement(c, vm, data, onMounted));\n\n        return Promise.all(promises).then(() => {\n            return directives.execute(vm.model);\n        });\n    }\n}\n","import {isObject, isFunction} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport './selection';\nimport {createComponent, mounted, asView} from './component';\nimport viewEvents from './events';\nimport createDirective from './directive';\nimport viewModel from '../model/main';\nimport warn from '../utils/warn';\n\n//\n// prototype for views\nexport default {\n\n    use: function (plugin) {\n        if (isObject(plugin)) plugin.install(this);\n        else plugin(this);\n        return this;\n    },\n\n    addComponent: function (name, obj) {\n        var component = createComponent(name, obj);\n        this.components.set(name, component);\n        return component;\n    },\n\n    addDirective: function (name, obj) {\n        var directive = createDirective(obj);\n        this.directives.set(name, directive);\n        return directive;\n    },\n\n    mount: function (el, callback) {\n        if (mounted(this)) warn('already mounted');\n        else {\n            viewEvents.call('component-mount', undefined, this, el);\n            el = element(el);\n            if (el) {\n                this.model = this.parent ? this.parent.model.$child(this.model) : viewModel(this.model);\n                return asView(this, el, callback);\n            }\n        }\n    }\n};\n\n\nfunction element (el) {\n    if (!el) return warn(`element not defined, pass an identifier or an HTMLElement object`);\n    var d3el = isFunction(el.node) ? el : select(el),\n        element = d3el.node();\n    if (!element) warn(`could not find ${el} element`);\n    else return element;\n}\n","import {select} from 'd3-selection';\nimport {isArray} from 'd3-let';\n\nimport {createComponent} from '../core/component';\nimport protoView from '../core/view';\nimport warn from '../utils/warn';\n\n//\n//  d3-for directive\n//  ======================\n//\n//  Repeat a element over an array of items and establish\n//  a one way binding between the array and the Dom\nexport default {\n\n    create (expression) {\n        var bits = [];\n        expression.trim().split(' ').forEach((v) => {\n            v ? bits.push(v) : null;\n        });\n        if (bits.length !== 3 || bits[1] != 'in')\n            return warn(`d3-for directive requires \"item in expression\" template, got \"${expression}\"`);\n        this.itemName = bits[0];\n        this.itemClass = `for${this.uid}`;\n        return bits[2];\n    },\n\n    preMount () {\n        return true;\n    },\n\n    mount (model) {\n        this.creator = this.el;\n        this.el = this.creator.parentNode;\n        // remove the creator from the DOM\n        select(this.creator).remove();\n        if (this.el) return model;\n    },\n\n    refresh (model, items) {\n        if (!isArray(items)) return;\n        let d;\n\n        var creator = this.creator,\n            selector = `${creator.tagName}.${this.itemClass}`,\n            itemName = this.itemName,\n            sel = this.sel,\n            allItems = sel.selectAll(selector),\n            entries = allItems.filter(function () {\n                d = this.__d3_view__.model[itemName];\n                return items.indexOf(d) > -1;\n            }).data(items),\n            exits = allItems.filter(function () {\n                d = this.__d3_view__.model[itemName];\n                return items.indexOf(d) === -1;\n            }),\n            forView = createComponent('forView', protoView),\n            vm = sel.view();\n\n        let x, el, fel, tr;\n\n        (this.transition(exits) || exits).style('opacity', 0).remove();\n\n        entries\n            .enter()\n                .append(() => {\n                    el = creator.cloneNode(true);\n                    fel = vm.select(el);\n                    if (vm.transitionDuration(fel) > 0) fel.style('opacity', 0);\n                    return el;\n                })\n                .classed(this.itemClass, true)\n                .each(function (d, index) {\n                    x = {index: index};\n                    x[itemName] = d;\n                    forView({\n                        model: x,\n                        parent: vm\n                    }).mount(this, (fv) => {\n                        // replace the item with a property from the model\n                        // This allow for reactivity when d is an object\n                        items[index] = fv.model[itemName];\n                        tr = fv.transition();\n                        if (tr) tr.style('opacity', 1);\n                    });\n                })\n            .merge(entries)\n                .each(function (d) {\n                    // update model itemName property\n                    this.__d3_view__.model[itemName] = d;\n                });\n    }\n};\n","//\n//  d3-if\n//  =============\n//\n//  Show or hide an element\n//\nexport default {\n\n    mount (model) {\n        var sel = this.sel;\n        this.display = sel.style('display');\n        if (!this.display || this.display === 'none') this.display = 'block';\n        return model;\n    },\n\n    refresh (model, value) {\n        var sel = this.sel,\n            transition = this.passes ? this.transition(sel) : null;\n\n        if (value) sel.style('display', this.display);\n        else if (!transition) sel.style('display', 'none');\n\n        if (transition) {\n            if (value)\n                transition.style('opacity', 1);\n            else\n                transition\n                    .style('opacity', 0)\n                    .on('end', () => sel.style('display', 'none'));\n        }\n    }\n};\n","import attr from './attr';\nimport html from './html';\nimport value from './value';\nimport on from './on';\nimport d3For from './for';\nimport d3If from './if';\n\nexport default {\n    attr,\n    html,\n    value,\n    on,\n    'for': d3For,\n    'if': d3If\n};\n","import {select} from 'd3-selection';\nimport {inBrowser} from 'd3-let';\n\n\nif (inBrowser) {\n    // DOM observer\n    // Check for changes in the DOM that leads to visual actions\n    const observer = new MutationObserver(visualManager);\n    observer.observe(document.documentElement, {\n        childList: true,\n        subtree: true\n    });\n}\n\n//\n//  Clears visualisation going out of scope\nfunction visualManager (records) {\n    records.forEach(record => {\n        var nodes = record.removedNodes;\n        let sel;\n        if (!nodes || !nodes.length) return;\n        for (let i=0; i<nodes.length; ++i) {\n            sel = select(nodes[i]);\n            if (sel.view()) {\n                sel.selectAll('*').each(destroy);\n                destroy.call(nodes[i]);\n            }\n        }\n    });\n}\n\n\nfunction destroy () {\n    var dirs = this.__d3_directives__,\n        view = this.__d3_view__;\n    if (dirs) {\n        dirs.all.forEach(d => d.destroy());\n        delete this.__d3_directives__;\n    }\n    if (view) {\n        view.destroy();\n        delete this.__d3_view__;\n    }\n}\n","import {map} from 'd3-collection';\n\nimport directives from './directives/index';\nimport protoView from './core/view';\nimport {createComponent, extendDirectives} from './core/component';\nimport './core/clean';\n\n// Core Directives\nconst coreDirectives = extendDirectives(map(), directives);\n\n// the view constructor\nexport default function (config) {\n    const viewClass = createComponent('view', protoView, coreDirectives);\n    return viewClass(config);\n}\n","import {timeout} from 'd3-timer';\n\nimport providers from './providers';\n\n\n// Add callback to execute when the DOM is ready\nexport default function (callback) {\n    providers.readyCallbacks.push(callback);\n    if (document.readyState !== 'complete') {\n        document.addEventListener('DOMContentLoaded', _completed);\n        // A fallback to window.onload, that will always work\n        window.addEventListener('load', _completed);\n    }\n    else\n        domReady();\n}\n\n\nfunction _completed () {\n    document.removeEventListener('DOMContentLoaded', _completed);\n\twindow.removeEventListener('load', _completed);\n    domReady();\n}\n\n\nfunction domReady() {\n    let callback;\n    while (providers.readyCallbacks.length ) {\n        callback = providers.readyCallbacks.shift();\n        timeout(callback);\n    }\n}\n","import {logger} from 'd3-let';\n\nexport default {\n    logger: logger\n};\n","import providers from './providers';\n\nconst prefix = '[d3-form]';\n\n\nexport default function (msg) {\n    providers.logger.warn(`${prefix} ${msg}`);\n}\n","import {isString, isObject, assign} from 'd3-let';\nimport {select, selectAll} from 'd3-selection';\nimport {map} from 'd3-collection';\n\nimport warn from './warn';\n\nconst properties = map({\n    disabled: 'disabled',\n    readonly: 'readOnly',\n    required: 'required'\n});\n\n//\n// Mixin for all form elements\nexport const formElement = {\n\n    inputData (el, data) {\n        var model = this.model;\n        if (!data) data = {};\n        data.id = data.id || model.uid;\n        model.data = data;\n        el.attr('id', data.id);\n        if (data.classes) el.classed(data.classes, true);\n        addAttributes(el, model, data.attributes);\n        properties.each((prop, key) => {\n            var value = data[key];\n            if (value) {\n                if (isString(value))\n                    el.attr(`d3-attr-${key}`, value);\n                else\n                    el.property(prop, true);\n            }\n        });\n        return data;\n    },\n\n    // wrap the form element with extensions\n    wrap (fieldEl) {\n        var field = this,\n            wrappedEl = fieldEl;\n\n        field.model.$formExtensions.forEach(extension => {\n            wrappedEl = extension(field, wrappedEl, fieldEl) || wrappedEl;\n        });\n\n        return wrappedEl;\n    },\n\n    wrapTemplate (sel, template) {\n        var div = document.createElement('div'),\n            outer = select(div).html(template),\n            slot = outer.select('slot');\n\n        if (!slot.size()) {\n            warn('template does not provide a slot element');\n            return sel;\n        }\n        var target = select(slot.node().parentNode);\n        sel.nodes().forEach(function (node) {\n            target.insert(() => {return node;}, 'slot');\n        });\n        slot.remove();\n        return selectAll(div.children);\n    },\n};\n\n// A mixin for all form field components\nexport default assign({}, formElement, {\n\n    model: {\n        value: null,\n        error: '',\n        isDirty: null,\n        changed: false,\n        srOnly: false,\n        placeholder: '',\n        showError: {\n            reactOn: ['error', 'isDirty'],\n            get () {\n                if (this.error) return this.isDirty;\n                return false;\n            }\n        },\n        // default validate function does nothing, IMPORTANT!\n        $validate () {}\n    },\n\n    inputData (el, data) {\n        // call parent method\n        data = formElement.inputData.call(this, el, data);\n        if (!data.name)\n            return warn ('Input field without a name');\n\n        el.attr('name', data.name);\n        data.placeholder = data.placeholder || data.label || data.name;\n        var model = this.model;\n        //\n        // add this model to the form inputs object\n        model.form.inputs[data.name] = model;\n        // give name to model (for debugging info messages)\n        model.name = data.name;\n        model.$on('value', () => {\n            // set isDirty to false if first time here, otherwise true\n            if (model.isDirty === null) {\n                model.isDirty = false;\n            } else {\n                model.isDirty = true;\n                model.changed = true;\n            }\n            // trigger a change event in the form\n            // required for form method such as $isValid\n            model.form.$change();\n        });\n        return data;\n    }\n\n});\n\n\nfunction addAttributes(el, model, attributes) {\n    var expr, attr, t;\n\n    if (!isObject(attributes)) return;\n\n    for (attr in attributes) {\n        expr = attributes[attr];\n        if (isObject(expr)) {\n            if (attr.substring(0, 3) === 'd3-') {\n                t = attr.replace('-', '_');\n                model.$set(t, expr);\n                expr = t;\n            } else {\n                expr = JSON.stringify(expr);\n            }\n        }\n        el.attr(attr, expr || '');\n    }\n}\n","import {timeout} from 'd3-timer';\nimport {isArray} from 'd3-let';\n\nimport warn from './warn';\n\n\nconst componentsFromType = {\n    text: 'input',\n    email: \"input\",\n    password: 'input',\n    checkbox: 'input',\n    number: 'input',\n    date: 'input',\n    url: 'input',\n    'datetime-local': 'input'\n};\n\n\n// return A promise which execute a callback at the next event Loop cycle\nexport function nextTick (callback) {\n    var self = this,\n        promise = new Promise((resolve) => timeout(resolve));\n    if (callback) promise.then(() => callback.call(self));\n    return promise;\n}\n\n\nexport function formComponent (child) {\n    var type = child.type || 'text';\n    return componentsFromType[type] || type;\n}\n\n\nexport function addChildren (sel) {\n    var children = this.model.data.children;\n    if (children) {\n        if (!isArray(children)) {\n            warn(`children should be an array of fields, for ${typeof children}`);\n            return sel;\n        }\n        sel.selectAll('.d3form')\n            .data(children)\n            .enter()\n            .append(formChild)\n            .classed('d3form', true);\n    }\n    return sel;\n}\n\n\nfunction formChild (child) {\n    var component = formComponent(child);\n    if (!component) {\n        warn(`Could not find form component ${child.type}`);\n        component = 'input';\n        child.type = 'hidden';\n    }\n    return document.createElement(`d3-form-${component}`);\n}\n","import {assign} from 'd3-let';\n\nimport {formElement} from './field';\nimport {addChildren} from './utils';\n\n//\n// Fieldset element\nexport default assign({}, formElement, {\n\n    render (data) {\n        var tag = data ? data.tag || 'fieldset' : 'fieldset',\n            el = this.createElement(tag);\n        data = this.inputData(el, data);\n        return addChildren.call(this, el);\n    }\n\n});\n","import {isString, isObject} from 'd3-let';\n\n\nconst required = {\n\n    set (el, data) {\n        var value = data.required;\n        if (isString(value))\n            el.attr(`d3-required`, value);\n        else\n            el.property('required', value || false);\n    },\n\n    validate (el, value) {\n        if (el.property('required'))\n            if (!value) return 'required';\n        else if (value === '') {\n            // this is valid, no need to continue with the remaining validators\n            return true;\n        }\n    }\n};\n\n\nconst minLength = {\n\n    set (el, data) {\n        var value = data.minLength;\n        if (isString(value))\n            el.attr(`d3-attr-minlength`, value);\n        else if (value !== undefined)\n            el.attr('minlength', value);\n    },\n\n    validate (el, value) {\n        var l = +el.attr('minlength');\n        if (l === l && l > 0 && value.length < l)\n            return `too short - ${l} characters or more expected`;\n    }\n};\n\n\nconst maxLength = {\n\n    set (el, data) {\n        var value = data.maxLength;\n        if (isString(value))\n            el.attr(`d3-attr-maxlength`, value);\n        else if (value !== undefined)\n            el.attr('maxlength', value);\n    },\n\n    validate (el, value) {\n        var l = +el.attr('maxlength');\n        if (l === l && l > 0 && value && value.length > l)\n            return `too long - ${l} characters or less expected`;\n    }\n};\n\n\nconst minimum = {\n\n    set (el, data) {\n        var value = data.minimum;\n        if (isString(value))\n            el.attr(`d3-attr-min`, value);\n        else if (value !== undefined)\n            el.attr('min', value);\n    },\n\n    validate (el, value) {\n        var r = range(el);\n        if (r && +value < r[0])\n            return `must be greater or equal ${r[0]}`;\n    }\n};\n\n\nconst maximum = {\n\n    set (el, data) {\n        var value = data.maximum;\n        if (isString(value))\n            el.attr(`d3-attr-max`, value);\n        else if (value !== undefined)\n            el.attr('max', value);\n    },\n\n    validate (el, value) {\n        var r = range(el);\n        if (r && +value > r[1])\n            return `must be less or equal ${r[1]}`;\n    }\n};\n\n// validator singleton\nexport default {\n\n    // get the list of validators\n    // custom is an optional list of custom validators\n    get (custom) {\n        var validators = this.all.slice(0);\n        if (isObject(custom))\n            for (var key in custom)\n                validators.push(customValidator(key, custom[key]));\n        return validators;\n    },\n\n    // add model validators to a form-field\n    set (vm, el) {\n        var model = vm.model;\n        model._view = vm;\n        model.validators.forEach((validator) => validator.set(el, model.data));\n        model.$on('value.validate', this.validate);\n        model.$validate = this.validate;\n    },\n\n    validate () {\n        var model = this,\n            vm = model._view,\n            validators = model.validators,\n            value = model.value,\n            el = vm.sel.attr('id') === model.data.id ? vm.sel : vm.sel.select(`#${model.data.id}`),\n            validator,\n            msg;\n\n        for (var i=0; i<validators.length; ++i) {\n            validator = validators[i];\n            msg = validator.validate(el, value);\n            if (msg) {\n                if (msg === true) msg = '';\n                break;\n            }\n        }\n\n        model.error = msg || '';\n    },\n\n    all: [\n        required,\n        minLength,\n        maxLength,\n        minimum,\n        maximum\n    ]\n};\n\n\nfunction range (el) {\n    var l0 = el.attr('min'),\n        l1 = el.attr('max');\n    l0 = l0 === null ? -Infinity : +l0;\n    l1 = l1 === null ? Infinity : +l1;\n    return [l0, l1];\n}\n\n\nfunction customValidator (key, method) {\n\n    return {\n        set (el, data) {\n            var value = data[key];\n            if (!value) return;\n        },\n\n        validate (el, value) {\n            return method(el, value);\n        }\n    };\n}\n","import {assign} from 'd3-let';\n\nimport field from './field';\nimport validators from './validators';\n\n\nconst checks = ['checkbox', 'radio'];\n\n//\n// Input element\nexport default assign({}, field, {\n\n    render (data) {\n        var el = this.createElement('input');\n        data = this.inputData(el, data);\n\n        el.attr('type', data.type || 'text')\n            .attr('d3-value', 'value');\n\n        if (checks.indexOf(el.attr('type')) === -1)\n            el.attr('placeholder', data.placeholder);\n\n        validators.set(this, el);\n        return this.wrap(el);\n    }\n});\n","import {assign} from 'd3-let';\n\nimport field from './field';\nimport validators from './validators';\n\n//\n// Textarea element\nexport default assign({}, field, {\n\n    render (data) {\n        var el = this.createElement('textarea');\n        data = this.inputData(el, data);\n        el.attr('placeholder', data.placeholder)\n            .attr('d3-value', 'value');\n\n        validators.set(this, el);\n        return this.wrap(el);\n    }\n\n});\n","import {isArray, assign} from 'd3-let';\n\nimport field from './field';\nimport validators from './validators';\n\n//\n// Select element\nexport default assign({}, field, {\n\n    model: assign({\n        options: [],\n        $optionLabel: optionLabel,\n        $optionValue: optionValue\n    }, field.model),\n\n    render (data) {\n        var el = this.createElement('select');\n        data = this.inputData(el, data);\n        el.attr('d3-value', 'value')\n            .attr('placeholder', data.placeholder)\n            .append('option')\n                .attr('d3-for', 'option in options')\n                .attr('d3-html', '$optionLabel()')\n                .attr('d3-attr-value', '$optionValue()');\n\n        validators.set(this, el);\n        return this.wrap(el);\n    }\n});\n\n\nfunction optionValue () {\n    if (isArray(this.option)) return this.option[0];\n    return this.option;\n}\n\n\nfunction optionLabel () {\n    if (isArray(this.option)) return this.option[1] || this.option[0];\n    return this.option;\n}\n","import {event} from 'd3-selection';\nimport {assign} from 'd3-let';\n\nimport {formElement} from './field';\n\n//\n// Submit element\nexport default assign({}, formElement, {\n\n    render (data) {\n        var tag = data ? data.tag || 'button' : 'button',\n            el = this.createElement(tag);\n\n        data = this.inputData(el, data);\n        var model = this.model;\n        //\n        // model non-reactive attributes\n        model.type = data.type || 'submit';\n        if (data.endpoint) model.endpoint = data.endpoint;\n        //\n        // default submit function\n        model.$submit = () => {\n            model.actions.submit.call(model, event);\n        };\n        if (!data.submit) data.submit = '$submit()';\n\n        el.attr('type', model.type)\n            .attr('name', model.name)\n            .attr('d3-on-click', data.submit)\n            .html(data.label || 'submit');\n\n        return this.wrap(el);\n    }\n});\n","//\n//  Form Responses\n//  ====================\n//\n//  To add/override responses:\n//\n//  import viewForms from 'd3-view'\n//\n//  viewForms.responses.myresponse = function (data, status, headers) {\n//      ...\n//  }\nexport default {\n    \"default\": defaultResponse,\n    redirect: redirect\n};\n\n\nfunction defaultResponse (data) {\n    this.message(data);\n}\n\n\nfunction redirect (data) {\n    window.location.href = data.redirectTo || '/';\n}\n","import {assign} from 'd3-let';\n\nimport providers from './providers';\nimport warn from './warn';\n\n\n//\n// Form Actions\nexport default {\n    submit: submit\n};\n\n\nconst endpointDefauls = {\n    contentType: 'application/json',\n    method: 'post'\n};\n\n//\n// Submit action\nfunction submit (e) {\n    var submit = this,\n        form = submit.form,\n        endpoint = assign({}, endpointDefauls, submit.endpoint);\n\n    if (e) {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    var fetch = providers.fetch,\n        data = form.$inputData(),\n        options = {};\n\n    if (!fetch) {\n        warn('fetch provider not available, cannot submit');\n        return;\n    }\n\n    if (!endpoint.url) {\n        warn('No url, cannot submit');\n        return;\n    }\n\n    if (endpoint.contentType === 'application/json') {\n        options.headers = {\n            'Content-Type': endpoint.contentType\n        };\n        options.body = JSON.stringify(data);\n    }\n    else {\n        options.body = new FormData();\n        for (var key in data)\n            options.body.set(key, data[key]);\n    }\n\n    // Flag the form as submitted\n    if (!form.$setSubmit()) {\n        // form not valid, don't bother with request\n        form.$setSubmitDone();\n    } else {\n        options.method = endpoint.method;\n        fetch(endpoint.url, options).then(success, failure);\n    }\n\n\n    function success (response) {\n        form.$setSubmitDone();\n        var ct = (response.headers.get('content-type') || '').split(';')[0];\n        if (ct === 'application/json')\n            response.json().then(data => {\n                form.$response(data, response.status, response.headers);\n            });\n        else {\n            warn(`Cannot load content type '${ct}'`);\n        }\n    }\n\n    function failure () {\n        form.$setSubmitDone();\n    }\n}\n","import {isString} from 'd3-let';\n\nimport {formElement} from './field';\nimport fieldset from './field-set';\nimport input from './field-input';\nimport textarea from './field-textarea';\nimport select from './field-select';\nimport submit from './field-submit';\nimport responses from './responses';\nimport warn from './warn';\nimport providers from './providers';\nimport actions from './actions';\nimport validators from './validators';\nimport {addChildren} from './utils';\n\n\n// Main form component\nexport default {\n\n    // Allow to specify form schema and initial values\n    props: ['schema', 'values'],\n\n    components: {\n        'd3-form-fieldset': fieldset,\n        'd3-form-input': input,\n        'd3-form-textarea': textarea,\n        'd3-form-select': select,\n        'd3-form-submit': submit\n    },\n\n    model: {\n        formSubmitted: false,\n        formPending: false,\n        $isValid (submitting) {\n            let inp,\n                valid = true;\n            for (var key in this.inputs) {\n                inp = this.inputs[key];\n                if (submitting) inp.isDirty = true;\n                inp.$validate();\n                if (inp.error) valid = false;\n            }\n            return valid;\n        },\n        $setSubmit () {\n            this.formSubmitted = true;\n            this.formPending = true;\n            return this.$isValid(true);\n        },\n        $setSubmitDone () {\n            this.formPending = false;\n        },\n        $inputData () {\n            var inputs = this.inputs,\n                data = {},\n                value;\n            for (var key in inputs) {\n                value = inputs[key].value;\n                if (value || input.changed) data[key] = value;\n            }\n            return data;\n        },\n        //\n        // response from a server submit\n        $response (data, status, headers) {\n            if (status < 300) {\n                if (this.data.resultHandler) {\n                    var handler = responses[this.data.resultHandler];\n                    if (!handler) warn(`Could not find ${this.data.resultHandler} result handler`);\n                    else handler.call(this, data, status, headers);\n                } else {\n                    responses.default.call(this, data, status, headers);\n                }\n            } else\n                this.$responseError(data, status, headers);\n        },\n        //\n        //  bad response from server submit\n        $responseError (data) {\n            data.level = 'error';\n            this.$message(data);\n        }\n    },\n\n    render (data) {\n        var model = this.model,\n            form = this.createElement('form').attr('novalidate', ''),\n            self = this;\n        //\n        model.$formExtensions = this.root.$formExtensions || [];\n        model.inputs = {};\n        model.actions = {};\n        model.form = model; // inject self for children models\n        //\n        var schema = data.schema;\n        if (data.values) schema.values = data.values;\n        if (isString(schema)) {\n            var fetch = providers.fetch;\n            return fetch(schema, {method: 'GET'}).then((response) => {\n                if (response.status === 200) return response.json().then(build);\n                else warn(`Could not load form from ${schema}: status ${response.status}`);\n            });\n        }\n        else return build(schema);\n\n        function build (schema) {\n            schema = formElement.inputData.call(self, form, schema);\n            //\n            // Form validations\n            model.validators = validators.get(schema.validators);\n            //\n            // Form actions\n            for (var key in actions) {\n                var action = schema[key];\n                if (isString(action)) action = self.model.$get(action);\n                model.actions[key] = action || actions[key];\n            }\n            addChildren.call(self, form);\n            return form;\n        }\n    },\n\n    childrenMounted () {\n        var model = this.model,\n            values = model.data.values;\n\n        if (values) Object.keys(values).forEach(key => {\n            var inp = model.inputs[key];\n            if (inp) inp.value = values[key];\n        });\n    }\n};\n","import form from './form';\nimport actions from './actions';\nimport responses from './responses';\nimport providers from './providers';\n\n\n// Forms plugin\nexport default {\n    install (vm) {\n        vm.addComponent('d3form', form);\n        // list of form Extensions\n        vm.$formExtensions = [];\n        for (var key in vm.providers)\n            providers[key] = vm.providers[key];\n    },\n    actions,\n    responses\n};\n","export default function (field, wrappedEl) {\n    var data = field.model.data;\n    return field.wrapTemplate(wrappedEl, labelTpl(data));\n}\n\n\nfunction labelTpl(data) {\n    var label = data.label || data.name;\n\n    return `<label for=${data.id} class=\"control-label\" d3-class=\"[srOnly ? 'sr-only' : null]\">${label}</label>\n<slot></slot>`;\n}\n","export default function (field, wrappedEl, fieldEl) {\n    var data = field.model.data,\n        size = data.size !== undefined ? data.size : field.model.form.data.size,\n        fc = size ? `form-control form-control-${size}` : 'form-control';\n    fieldEl.classed(fc, true).attr('d3-class',\n        `[${data.required || false} ? \"form-control-required\" : null, showError ? \"form-control-danger\" : null]`\n    );\n    return field.wrapTemplate(wrappedEl, groupTpl(data));\n}\n\n\nfunction groupTpl () {\n    return `<div class=\"form-group\" d3-class='showError ? \"has-danger\" : null'>\n<slot></slot>\n<p d3-if=\"showError\" class=\"text-danger error-block\" d3-html=\"error\"></p>\n</div>`;\n}\n","export default function (field, wrappedEl, fieldEl) {\n    var data = field.model.data,\n        ig = data['group'];\n    if (!ig) return wrappedEl;\n    var gid = `g${fieldEl.attr('id')}`;\n    fieldEl.attr('aria-describedby', gid);\n    return field.wrapTemplate(wrappedEl, groupTpl(gid, ig));\n}\n\n\nfunction groupTpl(gid, group) {\n    return `<div class=\"input-group\" :class=\"bootstrapStatus()\">\n<span class=\"input-group-addon\" id=\"${gid}\">${group}</span>\n<slot></slot>\n</div>`;\n}\n","export default function (field, wrappedEl, fieldEl) {\n    var data = field.model.data;\n    fieldEl.classed('form-check-input', true);\n    return field.wrapTemplate(wrappedEl, groupTpl(data.label));\n}\n\nfunction groupTpl(label) {\n    return `<div class=\"form-check\">\n<label class=\"form-check-label\">\n<slot></slot>\n${label}\n</label>\n</div>`;\n}\n","const groupTpl = `<div class=\"form-group\">\n<slot></slot>\n</div>`;\n\n\nexport default function (field, wrappedEl, fieldEl) {\n    var data = field.model.data,\n        theme = data.theme || 'primary';\n    fieldEl.classed('btn', true).classed(`btn-${theme}`, true);\n    return field.wrapTemplate(wrappedEl, groupTpl);\n}\n","import label from './label';\nimport formGroup from './form-group';\nimport inputGroup from './input-group';\nimport formCheck from './check';\nimport submit from './submit';\nimport warn from '../warn';\n\n\nconst bootstrap = {\n\n    input: ['inputGroup', 'label', 'formGroup'],\n    checkbox: ['formCheck'],\n    textarea: ['label', 'formGroup'],\n    select: ['label', 'formGroup'],\n    submit: ['submit'],\n    wrappers: {\n        label,\n        formGroup,\n        inputGroup,\n        formCheck,\n        submit\n    }\n};\n\n\n//\n//  Bootstrap plugin\n//  ===================\n//\n//  Simply add a new form extension to wrap form fields\n//\nexport default {\n\n    install (vm) {\n        if (!vm.$formExtensions)\n            return warn('form bootstrap requires the form plugin installed first!');\n        vm.$formExtensions.push(wrapBootstrap);\n    }\n};\n\n\nfunction wrapBootstrap(field, wrappedEl, fieldEl) {\n    var wrappers = bootstrap[fieldEl.attr('type')] || bootstrap[fieldEl.node().tagName.toLowerCase()];\n    if (!wrappers) return wrappedEl;\n    let wrap;\n\n    wrappers.forEach(wrapper => {\n        wrap = bootstrap.wrappers[wrapper];\n        if (wrap) wrappedEl = wrap(field, wrappedEl, fieldEl);\n        else warn(`Could not find form field wrapper ${wrapper}`);\n    });\n\n    return wrappedEl;\n}\n","//\n//  Asynchronous module definitions\nvar queue = [], map = queue.map, some = queue.some, hasOwnProperty = queue.hasOwnProperty;\n\nconst isAbsolute = new RegExp('^([a-z]+://|//)');\nconst libs = new Map;\nconst modules = new Map;\n\n\nfunction urlIsAbsolute (url) {\n    return typeof url === 'string' && isAbsolute.test(url);\n}\n\n\nexport const require = requireFrom(name => {\n    var nameUrl = libs.get(name) || name;\n    if (nameUrl.local) return nameUrl.url;\n    if (urlIsAbsolute(nameUrl)) return nameUrl;\n    return `https://unpkg.com/${nameUrl}`;\n});\n\n\nexport function requireFrom(source) {\n\n    function load (name) {\n        var url = source(name + \"\"), module = modules.get(url);\n        if (!module) modules.set(url, module = new Promise(function(resolve, reject) {\n            var script = document.createElement(\"script\");\n            script.onload = function() {\n                if (queue.length !== 1) return reject(new Error(\"invalid module\"));\n                resolve(queue.pop()(load));\n            };\n            script.onerror = function() {\n                reject(new Error(\"unable to load module\"));\n            };\n            script.async = true;\n            script.src = url;\n            window.define = define;\n            document.head.appendChild(script);\n        }));\n        return module;\n    }\n\n    function require (name) {\n        return arguments.length > 1 ? Promise.all(map.call(arguments, load)).then(merge) : load(name);\n    }\n\n    require.libs = libs;\n    require.modules = modules;\n\n    require.local = function (name, url) {\n        libs.set(name, {\n            local: true,\n            url: url\n        });\n    };\n\n    return require;\n}\n\nfunction merge(modules) {\n  var o = {}, i = -1, n = modules.length, m, k;\n  while (++i < n) {\n    for (k in (m = modules[i])) {\n      if (hasOwnProperty.call(m, k)) {\n        if (m[k] == null) Object.defineProperty(o, k, {get: getter(m, k)});\n        else o[k] = m[k];\n      }\n    }\n  }\n  return o;\n}\n\nfunction getter(object, name) {\n  return function() { return object[name]; };\n}\n\nfunction isexports(name) {\n  return (name + \"\") === \"exports\";\n}\n\nfunction define(name, dependencies, factory) {\n  if (arguments.length < 3) factory = dependencies, dependencies = name;\n  if (arguments.length < 2) factory = dependencies, dependencies = [];\n  queue.push(some.call(dependencies, isexports) ? function(require) {\n    var exports = {};\n    return Promise.all(map.call(dependencies, function(name) {\n      return isexports(name += \"\") ? exports : require(name);\n    })).then(function(dependencies) {\n      factory.apply(null, dependencies);\n      return exports;\n    });\n  } : function(require) {\n    return Promise.all(map.call(dependencies, require)).then(function(dependencies) {\n      return typeof factory === \"function\" ? factory.apply(null, dependencies) : factory;\n    });\n  });\n}\n\ndefine.amd = {};\n","(function(exports){\ncrossfilter.version = \"1.3.12\";\nfunction crossfilter_identity(d) {\n  return d;\n}\ncrossfilter.permute = permute;\n\nfunction permute(array, index) {\n  for (var i = 0, n = index.length, copy = new Array(n); i < n; ++i) {\n    copy[i] = array[index[i]];\n  }\n  return copy;\n}\nvar bisect = crossfilter.bisect = bisect_by(crossfilter_identity);\n\nbisect.by = bisect_by;\n\nfunction bisect_by(f) {\n\n  // Locate the insertion point for x in a to maintain sorted order. The\n  // arguments lo and hi may be used to specify a subset of the array which\n  // should be considered; by default the entire array is used. If x is already\n  // present in a, the insertion point will be before (to the left of) any\n  // existing entries. The return value is suitable for use as the first\n  // argument to `array.splice` assuming that a is already sorted.\n  //\n  // The returned insertion point i partitions the array a into two halves so\n  // that all v < x for v in a[lo:i] for the left side and all v >= x for v in\n  // a[i:hi] for the right side.\n  function bisectLeft(a, x, lo, hi) {\n    while (lo < hi) {\n      var mid = lo + hi >>> 1;\n      if (f(a[mid]) < x) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  // Similar to bisectLeft, but returns an insertion point which comes after (to\n  // the right of) any existing entries of x in a.\n  //\n  // The returned insertion point i partitions the array into two halves so that\n  // all v <= x for v in a[lo:i] for the left side and all v > x for v in\n  // a[i:hi] for the right side.\n  function bisectRight(a, x, lo, hi) {\n    while (lo < hi) {\n      var mid = lo + hi >>> 1;\n      if (x < f(a[mid])) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  bisectRight.right = bisectRight;\n  bisectRight.left = bisectLeft;\n  return bisectRight;\n}\nvar heap = crossfilter.heap = heap_by(crossfilter_identity);\n\nheap.by = heap_by;\n\nfunction heap_by(f) {\n\n  // Builds a binary heap within the specified array a[lo:hi]. The heap has the\n  // property such that the parent a[lo+i] is always less than or equal to its\n  // two children: a[lo+2*i+1] and a[lo+2*i+2].\n  function heap(a, lo, hi) {\n    var n = hi - lo,\n        i = (n >>> 1) + 1;\n    while (--i > 0) sift(a, i, n, lo);\n    return a;\n  }\n\n  // Sorts the specified array a[lo:hi] in descending order, assuming it is\n  // already a heap.\n  function sort(a, lo, hi) {\n    var n = hi - lo,\n        t;\n    while (--n > 0) t = a[lo], a[lo] = a[lo + n], a[lo + n] = t, sift(a, 1, n, lo);\n    return a;\n  }\n\n  // Sifts the element a[lo+i-1] down the heap, where the heap is the contiguous\n  // slice of array a[lo:lo+n]. This method can also be used to update the heap\n  // incrementally, without incurring the full cost of reconstructing the heap.\n  function sift(a, i, n, lo) {\n    var d = a[--lo + i],\n        x = f(d),\n        child;\n    while ((child = i << 1) <= n) {\n      if (child < n && f(a[lo + child]) > f(a[lo + child + 1])) child++;\n      if (x <= f(a[lo + child])) break;\n      a[lo + i] = a[lo + child];\n      i = child;\n    }\n    a[lo + i] = d;\n  }\n\n  heap.sort = sort;\n  return heap;\n}\nvar heapselect = crossfilter.heapselect = heapselect_by(crossfilter_identity);\n\nheapselect.by = heapselect_by;\n\nfunction heapselect_by(f) {\n  var heap = heap_by(f);\n\n  // Returns a new array containing the top k elements in the array a[lo:hi].\n  // The returned array is not sorted, but maintains the heap property. If k is\n  // greater than hi - lo, then fewer than k elements will be returned. The\n  // order of elements in a is unchanged by this operation.\n  function heapselect(a, lo, hi, k) {\n    var queue = new Array(k = Math.min(hi - lo, k)),\n        min,\n        i,\n        x,\n        d;\n\n    for (i = 0; i < k; ++i) queue[i] = a[lo++];\n    heap(queue, 0, k);\n\n    if (lo < hi) {\n      min = f(queue[0]);\n      do {\n        if (x = f(d = a[lo]) > min) {\n          queue[0] = d;\n          min = f(heap(queue, 0, k)[0]);\n        }\n      } while (++lo < hi);\n    }\n\n    return queue;\n  }\n\n  return heapselect;\n}\nvar insertionsort = crossfilter.insertionsort = insertionsort_by(crossfilter_identity);\n\ninsertionsort.by = insertionsort_by;\n\nfunction insertionsort_by(f) {\n\n  function insertionsort(a, lo, hi) {\n    for (var i = lo + 1; i < hi; ++i) {\n      for (var j = i, t = a[i], x = f(t); j > lo && f(a[j - 1]) > x; --j) {\n        a[j] = a[j - 1];\n      }\n      a[j] = t;\n    }\n    return a;\n  }\n\n  return insertionsort;\n}\n// Algorithm designed by Vladimir Yaroslavskiy.\n// Implementation based on the Dart project; see lib/dart/LICENSE for details.\n\nvar quicksort = crossfilter.quicksort = quicksort_by(crossfilter_identity);\n\nquicksort.by = quicksort_by;\n\nfunction quicksort_by(f) {\n  var insertionsort = insertionsort_by(f);\n\n  function sort(a, lo, hi) {\n    return (hi - lo < quicksort_sizeThreshold\n        ? insertionsort\n        : quicksort)(a, lo, hi);\n  }\n\n  function quicksort(a, lo, hi) {\n    // Compute the two pivots by looking at 5 elements.\n    var sixth = (hi - lo) / 6 | 0,\n        i1 = lo + sixth,\n        i5 = hi - 1 - sixth,\n        i3 = lo + hi - 1 >> 1,  // The midpoint.\n        i2 = i3 - sixth,\n        i4 = i3 + sixth;\n\n    var e1 = a[i1], x1 = f(e1),\n        e2 = a[i2], x2 = f(e2),\n        e3 = a[i3], x3 = f(e3),\n        e4 = a[i4], x4 = f(e4),\n        e5 = a[i5], x5 = f(e5);\n\n    var t;\n\n    // Sort the selected 5 elements using a sorting network.\n    if (x1 > x2) t = e1, e1 = e2, e2 = t, t = x1, x1 = x2, x2 = t;\n    if (x4 > x5) t = e4, e4 = e5, e5 = t, t = x4, x4 = x5, x5 = t;\n    if (x1 > x3) t = e1, e1 = e3, e3 = t, t = x1, x1 = x3, x3 = t;\n    if (x2 > x3) t = e2, e2 = e3, e3 = t, t = x2, x2 = x3, x3 = t;\n    if (x1 > x4) t = e1, e1 = e4, e4 = t, t = x1, x1 = x4, x4 = t;\n    if (x3 > x4) t = e3, e3 = e4, e4 = t, t = x3, x3 = x4, x4 = t;\n    if (x2 > x5) t = e2, e2 = e5, e5 = t, t = x2, x2 = x5, x5 = t;\n    if (x2 > x3) t = e2, e2 = e3, e3 = t, t = x2, x2 = x3, x3 = t;\n    if (x4 > x5) t = e4, e4 = e5, e5 = t, t = x4, x4 = x5, x5 = t;\n\n    var pivot1 = e2, pivotValue1 = x2,\n        pivot2 = e4, pivotValue2 = x4;\n\n    // e2 and e4 have been saved in the pivot variables. They will be written\n    // back, once the partitioning is finished.\n    a[i1] = e1;\n    a[i2] = a[lo];\n    a[i3] = e3;\n    a[i4] = a[hi - 1];\n    a[i5] = e5;\n\n    var less = lo + 1,   // First element in the middle partition.\n        great = hi - 2;  // Last element in the middle partition.\n\n    // Note that for value comparison, <, <=, >= and > coerce to a primitive via\n    // Object.prototype.valueOf; == and === do not, so in order to be consistent\n    // with natural order (such as for Date objects), we must do two compares.\n    var pivotsEqual = pivotValue1 <= pivotValue2 && pivotValue1 >= pivotValue2;\n    if (pivotsEqual) {\n\n      // Degenerated case where the partitioning becomes a dutch national flag\n      // problem.\n      //\n      // [ |  < pivot  | == pivot | unpartitioned | > pivot  | ]\n      //  ^             ^          ^             ^            ^\n      // left         less         k           great         right\n      //\n      // a[left] and a[right] are undefined and are filled after the\n      // partitioning.\n      //\n      // Invariants:\n      //   1) for x in ]left, less[ : x < pivot.\n      //   2) for x in [less, k[ : x == pivot.\n      //   3) for x in ]great, right[ : x > pivot.\n      for (var k = less; k <= great; ++k) {\n        var ek = a[k], xk = f(ek);\n        if (xk < pivotValue1) {\n          if (k !== less) {\n            a[k] = a[less];\n            a[less] = ek;\n          }\n          ++less;\n        } else if (xk > pivotValue1) {\n\n          // Find the first element <= pivot in the range [k - 1, great] and\n          // put [:ek:] there. We know that such an element must exist:\n          // When k == less, then el3 (which is equal to pivot) lies in the\n          // interval. Otherwise a[k - 1] == pivot and the search stops at k-1.\n          // Note that in the latter case invariant 2 will be violated for a\n          // short amount of time. The invariant will be restored when the\n          // pivots are put into their final positions.\n          while (true) {\n            var greatValue = f(a[great]);\n            if (greatValue > pivotValue1) {\n              great--;\n              // This is the only location in the while-loop where a new\n              // iteration is started.\n              continue;\n            } else if (greatValue < pivotValue1) {\n              // Triple exchange.\n              a[k] = a[less];\n              a[less++] = a[great];\n              a[great--] = ek;\n              break;\n            } else {\n              a[k] = a[great];\n              a[great--] = ek;\n              // Note: if great < k then we will exit the outer loop and fix\n              // invariant 2 (which we just violated).\n              break;\n            }\n          }\n        }\n      }\n    } else {\n\n      // We partition the list into three parts:\n      //  1. < pivot1\n      //  2. >= pivot1 && <= pivot2\n      //  3. > pivot2\n      //\n      // During the loop we have:\n      // [ | < pivot1 | >= pivot1 && <= pivot2 | unpartitioned  | > pivot2  | ]\n      //  ^            ^                        ^              ^             ^\n      // left         less                     k              great        right\n      //\n      // a[left] and a[right] are undefined and are filled after the\n      // partitioning.\n      //\n      // Invariants:\n      //   1. for x in ]left, less[ : x < pivot1\n      //   2. for x in [less, k[ : pivot1 <= x && x <= pivot2\n      //   3. for x in ]great, right[ : x > pivot2\n      for (var k = less; k <= great; k++) {\n        var ek = a[k], xk = f(ek);\n        if (xk < pivotValue1) {\n          if (k !== less) {\n            a[k] = a[less];\n            a[less] = ek;\n          }\n          ++less;\n        } else {\n          if (xk > pivotValue2) {\n            while (true) {\n              var greatValue = f(a[great]);\n              if (greatValue > pivotValue2) {\n                great--;\n                if (great < k) break;\n                // This is the only location inside the loop where a new\n                // iteration is started.\n                continue;\n              } else {\n                // a[great] <= pivot2.\n                if (greatValue < pivotValue1) {\n                  // Triple exchange.\n                  a[k] = a[less];\n                  a[less++] = a[great];\n                  a[great--] = ek;\n                } else {\n                  // a[great] >= pivot1.\n                  a[k] = a[great];\n                  a[great--] = ek;\n                }\n                break;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // Move pivots into their final positions.\n    // We shrunk the list from both sides (a[left] and a[right] have\n    // meaningless values in them) and now we move elements from the first\n    // and third partition into these locations so that we can store the\n    // pivots.\n    a[lo] = a[less - 1];\n    a[less - 1] = pivot1;\n    a[hi - 1] = a[great + 1];\n    a[great + 1] = pivot2;\n\n    // The list is now partitioned into three partitions:\n    // [ < pivot1   | >= pivot1 && <= pivot2   |  > pivot2   ]\n    //  ^            ^                        ^             ^\n    // left         less                     great        right\n\n    // Recursive descent. (Don't include the pivot values.)\n    sort(a, lo, less - 1);\n    sort(a, great + 2, hi);\n\n    if (pivotsEqual) {\n      // All elements in the second partition are equal to the pivot. No\n      // need to sort them.\n      return a;\n    }\n\n    // In theory it should be enough to call _doSort recursively on the second\n    // partition.\n    // The Android source however removes the pivot elements from the recursive\n    // call if the second partition is too large (more than 2/3 of the list).\n    if (less < i1 && great > i5) {\n      var lessValue, greatValue;\n      while ((lessValue = f(a[less])) <= pivotValue1 && lessValue >= pivotValue1) ++less;\n      while ((greatValue = f(a[great])) <= pivotValue2 && greatValue >= pivotValue2) --great;\n\n      // Copy paste of the previous 3-way partitioning with adaptions.\n      //\n      // We partition the list into three parts:\n      //  1. == pivot1\n      //  2. > pivot1 && < pivot2\n      //  3. == pivot2\n      //\n      // During the loop we have:\n      // [ == pivot1 | > pivot1 && < pivot2 | unpartitioned  | == pivot2 ]\n      //              ^                      ^              ^\n      //            less                     k              great\n      //\n      // Invariants:\n      //   1. for x in [ *, less[ : x == pivot1\n      //   2. for x in [less, k[ : pivot1 < x && x < pivot2\n      //   3. for x in ]great, * ] : x == pivot2\n      for (var k = less; k <= great; k++) {\n        var ek = a[k], xk = f(ek);\n        if (xk <= pivotValue1 && xk >= pivotValue1) {\n          if (k !== less) {\n            a[k] = a[less];\n            a[less] = ek;\n          }\n          less++;\n        } else {\n          if (xk <= pivotValue2 && xk >= pivotValue2) {\n            while (true) {\n              var greatValue = f(a[great]);\n              if (greatValue <= pivotValue2 && greatValue >= pivotValue2) {\n                great--;\n                if (great < k) break;\n                // This is the only location inside the loop where a new\n                // iteration is started.\n                continue;\n              } else {\n                // a[great] < pivot2.\n                if (greatValue < pivotValue1) {\n                  // Triple exchange.\n                  a[k] = a[less];\n                  a[less++] = a[great];\n                  a[great--] = ek;\n                } else {\n                  // a[great] == pivot1.\n                  a[k] = a[great];\n                  a[great--] = ek;\n                }\n                break;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // The second partition has now been cleared of pivot elements and looks\n    // as follows:\n    // [  *  |  > pivot1 && < pivot2  | * ]\n    //        ^                      ^\n    //       less                  great\n    // Sort the second partition using recursive descent.\n\n    // The second partition looks as follows:\n    // [  *  |  >= pivot1 && <= pivot2  | * ]\n    //        ^                        ^\n    //       less                    great\n    // Simply sort it by recursive descent.\n\n    return sort(a, less, great + 1);\n  }\n\n  return sort;\n}\n\nvar quicksort_sizeThreshold = 32;\nvar crossfilter_array8 = crossfilter_arrayUntyped,\n    crossfilter_array16 = crossfilter_arrayUntyped,\n    crossfilter_array32 = crossfilter_arrayUntyped,\n    crossfilter_arrayLengthen = crossfilter_arrayLengthenUntyped,\n    crossfilter_arrayWiden = crossfilter_arrayWidenUntyped;\n\nif (typeof Uint8Array !== \"undefined\") {\n  crossfilter_array8 = function(n) { return new Uint8Array(n); };\n  crossfilter_array16 = function(n) { return new Uint16Array(n); };\n  crossfilter_array32 = function(n) { return new Uint32Array(n); };\n\n  crossfilter_arrayLengthen = function(array, length) {\n    if (array.length >= length) return array;\n    var copy = new array.constructor(length);\n    copy.set(array);\n    return copy;\n  };\n\n  crossfilter_arrayWiden = function(array, width) {\n    var copy;\n    switch (width) {\n      case 16: copy = crossfilter_array16(array.length); break;\n      case 32: copy = crossfilter_array32(array.length); break;\n      default: throw new Error(\"invalid array width!\");\n    }\n    copy.set(array);\n    return copy;\n  };\n}\n\nfunction crossfilter_arrayUntyped(n) {\n  var array = new Array(n), i = -1;\n  while (++i < n) array[i] = 0;\n  return array;\n}\n\nfunction crossfilter_arrayLengthenUntyped(array, length) {\n  var n = array.length;\n  while (n < length) array[n++] = 0;\n  return array;\n}\n\nfunction crossfilter_arrayWidenUntyped(array, width) {\n  if (width > 32) throw new Error(\"invalid array width!\");\n  return array;\n}\nfunction crossfilter_filterExact(bisect, value) {\n  return function(values) {\n    var n = values.length;\n    return [bisect.left(values, value, 0, n), bisect.right(values, value, 0, n)];\n  };\n}\n\nfunction crossfilter_filterRange(bisect, range) {\n  var min = range[0],\n      max = range[1];\n  return function(values) {\n    var n = values.length;\n    return [bisect.left(values, min, 0, n), bisect.left(values, max, 0, n)];\n  };\n}\n\nfunction crossfilter_filterAll(values) {\n  return [0, values.length];\n}\nfunction crossfilter_null() {\n  return null;\n}\nfunction crossfilter_zero() {\n  return 0;\n}\nfunction crossfilter_reduceIncrement(p) {\n  return p + 1;\n}\n\nfunction crossfilter_reduceDecrement(p) {\n  return p - 1;\n}\n\nfunction crossfilter_reduceAdd(f) {\n  return function(p, v) {\n    return p + +f(v);\n  };\n}\n\nfunction crossfilter_reduceSubtract(f) {\n  return function(p, v) {\n    return p - f(v);\n  };\n}\nexports.crossfilter = crossfilter;\n\nfunction crossfilter() {\n  var crossfilter = {\n    add: add,\n    remove: removeData,\n    dimension: dimension,\n    groupAll: groupAll,\n    size: size\n  };\n\n  var data = [], // the records\n      n = 0, // the number of records; data.length\n      m = 0, // a bit mask representing which dimensions are in use\n      M = 8, // number of dimensions that can fit in `filters`\n      filters = crossfilter_array8(0), // M bits per record; 1 is filtered out\n      filterListeners = [], // when the filters change\n      dataListeners = [], // when data is added\n      removeDataListeners = []; // when data is removed\n\n  // Adds the specified new records to this crossfilter.\n  function add(newData) {\n    var n0 = n,\n        n1 = newData.length;\n\n    // If there's actually new data to add\n    // Merge the new data into the existing data.\n    // Lengthen the filter bitset to handle the new records.\n    // Notify listeners (dimensions and groups) that new data is available.\n    if (n1) {\n      data = data.concat(newData);\n      filters = crossfilter_arrayLengthen(filters, n += n1);\n      dataListeners.forEach(function(l) { l(newData, n0, n1); });\n    }\n\n    return crossfilter;\n  }\n\n  // Removes all records that match the current filters.\n  function removeData() {\n    var newIndex = crossfilter_index(n, n),\n        removed = [];\n    for (var i = 0, j = 0; i < n; ++i) {\n      if (filters[i]) newIndex[i] = j++;\n      else removed.push(i);\n    }\n\n    // Remove all matching records from groups.\n    filterListeners.forEach(function(l) { l(0, [], removed); });\n\n    // Update indexes.\n    removeDataListeners.forEach(function(l) { l(newIndex); });\n\n    // Remove old filters and data by overwriting.\n    for (var i = 0, j = 0, k; i < n; ++i) {\n      if (k = filters[i]) {\n        if (i !== j) filters[j] = k, data[j] = data[i];\n        ++j;\n      }\n    }\n    data.length = j;\n    while (n > j) filters[--n] = 0;\n  }\n\n  // Adds a new dimension with the specified value accessor function.\n  function dimension(value) {\n    var dimension = {\n      filter: filter,\n      filterExact: filterExact,\n      filterRange: filterRange,\n      filterFunction: filterFunction,\n      filterAll: filterAll,\n      top: top,\n      bottom: bottom,\n      group: group,\n      groupAll: groupAll,\n      dispose: dispose,\n      remove: dispose // for backwards-compatibility\n    };\n\n    var one = ~m & -~m, // lowest unset bit as mask, e.g., 00001000\n        zero = ~one, // inverted one, e.g., 11110111\n        values, // sorted, cached array\n        index, // value rank  object id\n        newValues, // temporary array storing newly-added values\n        newIndex, // temporary array storing newly-added index\n        sort = quicksort_by(function(i) { return newValues[i]; }),\n        refilter = crossfilter_filterAll, // for recomputing filter\n        refilterFunction, // the custom filter function in use\n        indexListeners = [], // when data is added\n        dimensionGroups = [],\n        lo0 = 0,\n        hi0 = 0;\n\n    // Updating a dimension is a two-stage process. First, we must update the\n    // associated filters for the newly-added records. Once all dimensions have\n    // updated their filters, the groups are notified to update.\n    dataListeners.unshift(preAdd);\n    dataListeners.push(postAdd);\n\n    removeDataListeners.push(removeData);\n\n    // Incorporate any existing data into this dimension, and make sure that the\n    // filter bitset is wide enough to handle the new dimension.\n    m |= one;\n    if (M >= 32 ? !one : m & -(1 << M)) {\n      filters = crossfilter_arrayWiden(filters, M <<= 1);\n    }\n    preAdd(data, 0, n);\n    postAdd(data, 0, n);\n\n    // Incorporates the specified new records into this dimension.\n    // This function is responsible for updating filters, values, and index.\n    function preAdd(newData, n0, n1) {\n\n      // Permute new values into natural order using a sorted index.\n      newValues = newData.map(value);\n      newIndex = sort(crossfilter_range(n1), 0, n1);\n      newValues = permute(newValues, newIndex);\n\n      // Bisect newValues to determine which new records are selected.\n      var bounds = refilter(newValues), lo1 = bounds[0], hi1 = bounds[1], i;\n      if (refilterFunction) {\n        for (i = 0; i < n1; ++i) {\n          if (!refilterFunction(newValues[i], i)) filters[newIndex[i] + n0] |= one;\n        }\n      } else {\n        for (i = 0; i < lo1; ++i) filters[newIndex[i] + n0] |= one;\n        for (i = hi1; i < n1; ++i) filters[newIndex[i] + n0] |= one;\n      }\n\n      // If this dimension previously had no data, then we don't need to do the\n      // more expensive merge operation; use the new values and index as-is.\n      if (!n0) {\n        values = newValues;\n        index = newIndex;\n        lo0 = lo1;\n        hi0 = hi1;\n        return;\n      }\n\n      var oldValues = values,\n          oldIndex = index,\n          i0 = 0,\n          i1 = 0;\n\n      // Otherwise, create new arrays into which to merge new and old.\n      values = new Array(n);\n      index = crossfilter_index(n, n);\n\n      // Merge the old and new sorted values, and old and new index.\n      for (i = 0; i0 < n0 && i1 < n1; ++i) {\n        if (oldValues[i0] < newValues[i1]) {\n          values[i] = oldValues[i0];\n          index[i] = oldIndex[i0++];\n        } else {\n          values[i] = newValues[i1];\n          index[i] = newIndex[i1++] + n0;\n        }\n      }\n\n      // Add any remaining old values.\n      for (; i0 < n0; ++i0, ++i) {\n        values[i] = oldValues[i0];\n        index[i] = oldIndex[i0];\n      }\n\n      // Add any remaining new values.\n      for (; i1 < n1; ++i1, ++i) {\n        values[i] = newValues[i1];\n        index[i] = newIndex[i1] + n0;\n      }\n\n      // Bisect again to recompute lo0 and hi0.\n      bounds = refilter(values), lo0 = bounds[0], hi0 = bounds[1];\n    }\n\n    // When all filters have updated, notify index listeners of the new values.\n    function postAdd(newData, n0, n1) {\n      indexListeners.forEach(function(l) { l(newValues, newIndex, n0, n1); });\n      newValues = newIndex = null;\n    }\n\n    function removeData(reIndex) {\n      for (var i = 0, j = 0, k; i < n; ++i) {\n        if (filters[k = index[i]]) {\n          if (i !== j) values[j] = values[i];\n          index[j] = reIndex[k];\n          ++j;\n        }\n      }\n      values.length = j;\n      while (j < n) index[j++] = 0;\n\n      // Bisect again to recompute lo0 and hi0.\n      var bounds = refilter(values);\n      lo0 = bounds[0], hi0 = bounds[1];\n    }\n\n    // Updates the selected values based on the specified bounds [lo, hi].\n    // This implementation is used by all the public filter methods.\n    function filterIndexBounds(bounds) {\n      var lo1 = bounds[0],\n          hi1 = bounds[1];\n\n      if (refilterFunction) {\n        refilterFunction = null;\n        filterIndexFunction(function(d, i) { return lo1 <= i && i < hi1; });\n        lo0 = lo1;\n        hi0 = hi1;\n        return dimension;\n      }\n\n      var i,\n          j,\n          k,\n          added = [],\n          removed = [];\n\n      // Fast incremental update based on previous lo index.\n      if (lo1 < lo0) {\n        for (i = lo1, j = Math.min(lo0, hi1); i < j; ++i) {\n          filters[k = index[i]] ^= one;\n          added.push(k);\n        }\n      } else if (lo1 > lo0) {\n        for (i = lo0, j = Math.min(lo1, hi0); i < j; ++i) {\n          filters[k = index[i]] ^= one;\n          removed.push(k);\n        }\n      }\n\n      // Fast incremental update based on previous hi index.\n      if (hi1 > hi0) {\n        for (i = Math.max(lo1, hi0), j = hi1; i < j; ++i) {\n          filters[k = index[i]] ^= one;\n          added.push(k);\n        }\n      } else if (hi1 < hi0) {\n        for (i = Math.max(lo0, hi1), j = hi0; i < j; ++i) {\n          filters[k = index[i]] ^= one;\n          removed.push(k);\n        }\n      }\n\n      lo0 = lo1;\n      hi0 = hi1;\n      filterListeners.forEach(function(l) { l(one, added, removed); });\n      return dimension;\n    }\n\n    // Filters this dimension using the specified range, value, or null.\n    // If the range is null, this is equivalent to filterAll.\n    // If the range is an array, this is equivalent to filterRange.\n    // Otherwise, this is equivalent to filterExact.\n    function filter(range) {\n      return range == null\n          ? filterAll() : Array.isArray(range)\n          ? filterRange(range) : typeof range === \"function\"\n          ? filterFunction(range)\n          : filterExact(range);\n    }\n\n    // Filters this dimension to select the exact value.\n    function filterExact(value) {\n      return filterIndexBounds((refilter = crossfilter_filterExact(bisect, value))(values));\n    }\n\n    // Filters this dimension to select the specified range [lo, hi].\n    // The lower bound is inclusive, and the upper bound is exclusive.\n    function filterRange(range) {\n      return filterIndexBounds((refilter = crossfilter_filterRange(bisect, range))(values));\n    }\n\n    // Clears any filters on this dimension.\n    function filterAll() {\n      return filterIndexBounds((refilter = crossfilter_filterAll)(values));\n    }\n\n    // Filters this dimension using an arbitrary function.\n    function filterFunction(f) {\n      refilter = crossfilter_filterAll;\n\n      filterIndexFunction(refilterFunction = f);\n\n      lo0 = 0;\n      hi0 = n;\n\n      return dimension;\n    }\n\n    function filterIndexFunction(f) {\n      var i,\n          k,\n          x,\n          added = [],\n          removed = [];\n\n      for (i = 0; i < n; ++i) {\n        if (!(filters[k = index[i]] & one) ^ !!(x = f(values[i], i))) {\n          if (x) filters[k] &= zero, added.push(k);\n          else filters[k] |= one, removed.push(k);\n        }\n      }\n      filterListeners.forEach(function(l) { l(one, added, removed); });\n    }\n\n    // Returns the top K selected records based on this dimension's order.\n    // Note: observes this dimension's filter, unlike group and groupAll.\n    function top(k) {\n      var array = [],\n          i = hi0,\n          j;\n\n      while (--i >= lo0 && k > 0) {\n        if (!filters[j = index[i]]) {\n          array.push(data[j]);\n          --k;\n        }\n      }\n\n      return array;\n    }\n\n    // Returns the bottom K selected records based on this dimension's order.\n    // Note: observes this dimension's filter, unlike group and groupAll.\n    function bottom(k) {\n      var array = [],\n          i = lo0,\n          j;\n\n      while (i < hi0 && k > 0) {\n        if (!filters[j = index[i]]) {\n          array.push(data[j]);\n          --k;\n        }\n        i++;\n      }\n\n      return array;\n    }\n\n    // Adds a new group to this dimension, using the specified key function.\n    function group(key) {\n      var group = {\n        top: top,\n        all: all,\n        reduce: reduce,\n        reduceCount: reduceCount,\n        reduceSum: reduceSum,\n        order: order,\n        orderNatural: orderNatural,\n        size: size,\n        dispose: dispose,\n        remove: dispose // for backwards-compatibility\n      };\n\n      // Ensure that this group will be removed when the dimension is removed.\n      dimensionGroups.push(group);\n\n      var groups, // array of {key, value}\n          groupIndex, // object id  group id\n          groupWidth = 8,\n          groupCapacity = crossfilter_capacity(groupWidth),\n          k = 0, // cardinality\n          select,\n          heap,\n          reduceAdd,\n          reduceRemove,\n          reduceInitial,\n          update = crossfilter_null,\n          reset = crossfilter_null,\n          resetNeeded = true,\n          groupAll = key === crossfilter_null;\n\n      if (arguments.length < 1) key = crossfilter_identity;\n\n      // The group listens to the crossfilter for when any dimension changes, so\n      // that it can update the associated reduce values. It must also listen to\n      // the parent dimension for when data is added, and compute new keys.\n      filterListeners.push(update);\n      indexListeners.push(add);\n      removeDataListeners.push(removeData);\n\n      // Incorporate any existing data into the grouping.\n      add(values, index, 0, n);\n\n      // Incorporates the specified new values into this group.\n      // This function is responsible for updating groups and groupIndex.\n      function add(newValues, newIndex, n0, n1) {\n        var oldGroups = groups,\n            reIndex = crossfilter_index(k, groupCapacity),\n            add = reduceAdd,\n            initial = reduceInitial,\n            k0 = k, // old cardinality\n            i0 = 0, // index of old group\n            i1 = 0, // index of new record\n            j, // object id\n            g0, // old group\n            x0, // old key\n            x1, // new key\n            g, // group to add\n            x; // key of group to add\n\n        // If a reset is needed, we don't need to update the reduce values.\n        if (resetNeeded) add = initial = crossfilter_null;\n\n        // Reset the new groups (k is a lower bound).\n        // Also, make sure that groupIndex exists and is long enough.\n        groups = new Array(k), k = 0;\n        groupIndex = k0 > 1 ? crossfilter_arrayLengthen(groupIndex, n) : crossfilter_index(n, groupCapacity);\n\n        // Get the first old key (x0 of g0), if it exists.\n        if (k0) x0 = (g0 = oldGroups[0]).key;\n\n        // Find the first new key (x1), skipping NaN keys.\n        while (i1 < n1 && !((x1 = key(newValues[i1])) >= x1)) ++i1;\n\n        // While new keys remain\n        while (i1 < n1) {\n\n          // Determine the lesser of the two current keys; new and old.\n          // If there are no old keys remaining, then always add the new key.\n          if (g0 && x0 <= x1) {\n            g = g0, x = x0;\n\n            // Record the new index of the old group.\n            reIndex[i0] = k;\n\n            // Retrieve the next old key.\n            if (g0 = oldGroups[++i0]) x0 = g0.key;\n          } else {\n            g = {key: x1, value: initial()}, x = x1;\n          }\n\n          // Add the lesser group.\n          groups[k] = g;\n\n          // Add any selected records belonging to the added group, while\n          // advancing the new key and populating the associated group index.\n          while (!(x1 > x)) {\n            groupIndex[j = newIndex[i1] + n0] = k;\n            if (!(filters[j] & zero)) g.value = add(g.value, data[j]);\n            if (++i1 >= n1) break;\n            x1 = key(newValues[i1]);\n          }\n\n          groupIncrement();\n        }\n\n        // Add any remaining old groups that were greater than all new keys.\n        // No incremental reduce is needed; these groups have no new records.\n        // Also record the new index of the old group.\n        while (i0 < k0) {\n          groups[reIndex[i0] = k] = oldGroups[i0++];\n          groupIncrement();\n        }\n\n        // If we added any new groups before any old groups,\n        // update the group index of all the old records.\n        if (k > i0) for (i0 = 0; i0 < n0; ++i0) {\n          groupIndex[i0] = reIndex[groupIndex[i0]];\n        }\n\n        // Modify the update and reset behavior based on the cardinality.\n        // If the cardinality is less than or equal to one, then the groupIndex\n        // is not needed. If the cardinality is zero, then there are no records\n        // and therefore no groups to update or reset. Note that we also must\n        // change the registered listener to point to the new method.\n        j = filterListeners.indexOf(update);\n        if (k > 1) {\n          update = updateMany;\n          reset = resetMany;\n        } else {\n          if (!k && groupAll) {\n            k = 1;\n            groups = [{key: null, value: initial()}];\n          }\n          if (k === 1) {\n            update = updateOne;\n            reset = resetOne;\n          } else {\n            update = crossfilter_null;\n            reset = crossfilter_null;\n          }\n          groupIndex = null;\n        }\n        filterListeners[j] = update;\n\n        // Count the number of added groups,\n        // and widen the group index as needed.\n        function groupIncrement() {\n          if (++k === groupCapacity) {\n            reIndex = crossfilter_arrayWiden(reIndex, groupWidth <<= 1);\n            groupIndex = crossfilter_arrayWiden(groupIndex, groupWidth);\n            groupCapacity = crossfilter_capacity(groupWidth);\n          }\n        }\n      }\n\n      function removeData() {\n        if (k > 1) {\n          var oldK = k,\n              oldGroups = groups,\n              seenGroups = crossfilter_index(oldK, oldK);\n\n          // Filter out non-matches by copying matching group index entries to\n          // the beginning of the array.\n          for (var i = 0, j = 0; i < n; ++i) {\n            if (filters[i]) {\n              seenGroups[groupIndex[j] = groupIndex[i]] = 1;\n              ++j;\n            }\n          }\n\n          // Reassemble groups including only those groups that were referred\n          // to by matching group index entries.  Note the new group index in\n          // seenGroups.\n          groups = [], k = 0;\n          for (i = 0; i < oldK; ++i) {\n            if (seenGroups[i]) {\n              seenGroups[i] = k++;\n              groups.push(oldGroups[i]);\n            }\n          }\n\n          if (k > 1) {\n            // Reindex the group index using seenGroups to find the new index.\n            for (var i = 0; i < j; ++i) groupIndex[i] = seenGroups[groupIndex[i]];\n          } else {\n            groupIndex = null;\n          }\n          filterListeners[filterListeners.indexOf(update)] = k > 1\n              ? (reset = resetMany, update = updateMany)\n              : k === 1 ? (reset = resetOne, update = updateOne)\n              : reset = update = crossfilter_null;\n        } else if (k === 1) {\n          if (groupAll) return;\n          for (var i = 0; i < n; ++i) if (filters[i]) return;\n          groups = [], k = 0;\n          filterListeners[filterListeners.indexOf(update)] =\n          update = reset = crossfilter_null;\n        }\n      }\n\n      // Reduces the specified selected or deselected records.\n      // This function is only used when the cardinality is greater than 1.\n      function updateMany(filterOne, added, removed) {\n        if (filterOne === one || resetNeeded) return;\n\n        var i,\n            k,\n            n,\n            g;\n\n        // Add the added values.\n        for (i = 0, n = added.length; i < n; ++i) {\n          if (!(filters[k = added[i]] & zero)) {\n            g = groups[groupIndex[k]];\n            g.value = reduceAdd(g.value, data[k]);\n          }\n        }\n\n        // Remove the removed values.\n        for (i = 0, n = removed.length; i < n; ++i) {\n          if ((filters[k = removed[i]] & zero) === filterOne) {\n            g = groups[groupIndex[k]];\n            g.value = reduceRemove(g.value, data[k]);\n          }\n        }\n      }\n\n      // Reduces the specified selected or deselected records.\n      // This function is only used when the cardinality is 1.\n      function updateOne(filterOne, added, removed) {\n        if (filterOne === one || resetNeeded) return;\n\n        var i,\n            k,\n            n,\n            g = groups[0];\n\n        // Add the added values.\n        for (i = 0, n = added.length; i < n; ++i) {\n          if (!(filters[k = added[i]] & zero)) {\n            g.value = reduceAdd(g.value, data[k]);\n          }\n        }\n\n        // Remove the removed values.\n        for (i = 0, n = removed.length; i < n; ++i) {\n          if ((filters[k = removed[i]] & zero) === filterOne) {\n            g.value = reduceRemove(g.value, data[k]);\n          }\n        }\n      }\n\n      // Recomputes the group reduce values from scratch.\n      // This function is only used when the cardinality is greater than 1.\n      function resetMany() {\n        var i,\n            g;\n\n        // Reset all group values.\n        for (i = 0; i < k; ++i) {\n          groups[i].value = reduceInitial();\n        }\n\n        // Add any selected records.\n        for (i = 0; i < n; ++i) {\n          if (!(filters[i] & zero)) {\n            g = groups[groupIndex[i]];\n            g.value = reduceAdd(g.value, data[i]);\n          }\n        }\n      }\n\n      // Recomputes the group reduce values from scratch.\n      // This function is only used when the cardinality is 1.\n      function resetOne() {\n        var i,\n            g = groups[0];\n\n        // Reset the singleton group values.\n        g.value = reduceInitial();\n\n        // Add any selected records.\n        for (i = 0; i < n; ++i) {\n          if (!(filters[i] & zero)) {\n            g.value = reduceAdd(g.value, data[i]);\n          }\n        }\n      }\n\n      // Returns the array of group values, in the dimension's natural order.\n      function all() {\n        if (resetNeeded) reset(), resetNeeded = false;\n        return groups;\n      }\n\n      // Returns a new array containing the top K group values, in reduce order.\n      function top(k) {\n        var top = select(all(), 0, groups.length, k);\n        return heap.sort(top, 0, top.length);\n      }\n\n      // Sets the reduce behavior for this group to use the specified functions.\n      // This method lazily recomputes the reduce values, waiting until needed.\n      function reduce(add, remove, initial) {\n        reduceAdd = add;\n        reduceRemove = remove;\n        reduceInitial = initial;\n        resetNeeded = true;\n        return group;\n      }\n\n      // A convenience method for reducing by count.\n      function reduceCount() {\n        return reduce(crossfilter_reduceIncrement, crossfilter_reduceDecrement, crossfilter_zero);\n      }\n\n      // A convenience method for reducing by sum(value).\n      function reduceSum(value) {\n        return reduce(crossfilter_reduceAdd(value), crossfilter_reduceSubtract(value), crossfilter_zero);\n      }\n\n      // Sets the reduce order, using the specified accessor.\n      function order(value) {\n        select = heapselect_by(valueOf);\n        heap = heap_by(valueOf);\n        function valueOf(d) { return value(d.value); }\n        return group;\n      }\n\n      // A convenience method for natural ordering by reduce value.\n      function orderNatural() {\n        return order(crossfilter_identity);\n      }\n\n      // Returns the cardinality of this group, irrespective of any filters.\n      function size() {\n        return k;\n      }\n\n      // Removes this group and associated event listeners.\n      function dispose() {\n        var i = filterListeners.indexOf(update);\n        if (i >= 0) filterListeners.splice(i, 1);\n        i = indexListeners.indexOf(add);\n        if (i >= 0) indexListeners.splice(i, 1);\n        i = removeDataListeners.indexOf(removeData);\n        if (i >= 0) removeDataListeners.splice(i, 1);\n        return group;\n      }\n\n      return reduceCount().orderNatural();\n    }\n\n    // A convenience function for generating a singleton group.\n    function groupAll() {\n      var g = group(crossfilter_null), all = g.all;\n      delete g.all;\n      delete g.top;\n      delete g.order;\n      delete g.orderNatural;\n      delete g.size;\n      g.value = function() { return all()[0].value; };\n      return g;\n    }\n\n    // Removes this dimension and associated groups and event listeners.\n    function dispose() {\n      dimensionGroups.forEach(function(group) { group.dispose(); });\n      var i = dataListeners.indexOf(preAdd);\n      if (i >= 0) dataListeners.splice(i, 1);\n      i = dataListeners.indexOf(postAdd);\n      if (i >= 0) dataListeners.splice(i, 1);\n      i = removeDataListeners.indexOf(removeData);\n      if (i >= 0) removeDataListeners.splice(i, 1);\n      m &= zero;\n      return filterAll();\n    }\n\n    return dimension;\n  }\n\n  // A convenience method for groupAll on a dummy dimension.\n  // This implementation can be optimized since it always has cardinality 1.\n  function groupAll() {\n    var group = {\n      reduce: reduce,\n      reduceCount: reduceCount,\n      reduceSum: reduceSum,\n      value: value,\n      dispose: dispose,\n      remove: dispose // for backwards-compatibility\n    };\n\n    var reduceValue,\n        reduceAdd,\n        reduceRemove,\n        reduceInitial,\n        resetNeeded = true;\n\n    // The group listens to the crossfilter for when any dimension changes, so\n    // that it can update the reduce value. It must also listen to the parent\n    // dimension for when data is added.\n    filterListeners.push(update);\n    dataListeners.push(add);\n\n    // For consistency; actually a no-op since resetNeeded is true.\n    add(data, 0, n);\n\n    // Incorporates the specified new values into this group.\n    function add(newData, n0) {\n      var i;\n\n      if (resetNeeded) return;\n\n      // Add the added values.\n      for (i = n0; i < n; ++i) {\n        if (!filters[i]) {\n          reduceValue = reduceAdd(reduceValue, data[i]);\n        }\n      }\n    }\n\n    // Reduces the specified selected or deselected records.\n    function update(filterOne, added, removed) {\n      var i,\n          k,\n          n;\n\n      if (resetNeeded) return;\n\n      // Add the added values.\n      for (i = 0, n = added.length; i < n; ++i) {\n        if (!filters[k = added[i]]) {\n          reduceValue = reduceAdd(reduceValue, data[k]);\n        }\n      }\n\n      // Remove the removed values.\n      for (i = 0, n = removed.length; i < n; ++i) {\n        if (filters[k = removed[i]] === filterOne) {\n          reduceValue = reduceRemove(reduceValue, data[k]);\n        }\n      }\n    }\n\n    // Recomputes the group reduce value from scratch.\n    function reset() {\n      var i;\n\n      reduceValue = reduceInitial();\n\n      for (i = 0; i < n; ++i) {\n        if (!filters[i]) {\n          reduceValue = reduceAdd(reduceValue, data[i]);\n        }\n      }\n    }\n\n    // Sets the reduce behavior for this group to use the specified functions.\n    // This method lazily recomputes the reduce value, waiting until needed.\n    function reduce(add, remove, initial) {\n      reduceAdd = add;\n      reduceRemove = remove;\n      reduceInitial = initial;\n      resetNeeded = true;\n      return group;\n    }\n\n    // A convenience method for reducing by count.\n    function reduceCount() {\n      return reduce(crossfilter_reduceIncrement, crossfilter_reduceDecrement, crossfilter_zero);\n    }\n\n    // A convenience method for reducing by sum(value).\n    function reduceSum(value) {\n      return reduce(crossfilter_reduceAdd(value), crossfilter_reduceSubtract(value), crossfilter_zero);\n    }\n\n    // Returns the computed reduce value.\n    function value() {\n      if (resetNeeded) reset(), resetNeeded = false;\n      return reduceValue;\n    }\n\n    // Removes this group and associated event listeners.\n    function dispose() {\n      var i = filterListeners.indexOf(update);\n      if (i >= 0) filterListeners.splice(i);\n      i = dataListeners.indexOf(add);\n      if (i >= 0) dataListeners.splice(i);\n      return group;\n    }\n\n    return reduceCount();\n  }\n\n  // Returns the number of records in this crossfilter, irrespective of any filters.\n  function size() {\n    return n;\n  }\n\n  return arguments.length\n      ? add(arguments[0])\n      : crossfilter;\n}\n\n// Returns an array of size n, big enough to store ids up to m.\nfunction crossfilter_index(n, m) {\n  return (m < 0x101\n      ? crossfilter_array8 : m < 0x10001\n      ? crossfilter_array16\n      : crossfilter_array32)(n);\n}\n\n// Constructs a new array of size n, with sequential values from 0 to n - 1.\nfunction crossfilter_range(n) {\n  var range = crossfilter_index(n, n);\n  for (var i = -1; ++i < n;) range[i] = i;\n  return range;\n}\n\nfunction crossfilter_capacity(w) {\n  return w === 8\n      ? 0x100 : w === 16\n      ? 0x10000\n      : 0x100000000;\n}\n})(typeof exports !== 'undefined' && exports || this);\n","module.exports = require(\"./crossfilter\").crossfilter;\n","export default function (field) {\n    return function (d) {\n        return d[field];\n    };\n}\n","import {isArray} from 'd3-let';\nimport crossfilter from 'crossfilter';\n\nimport accessor from '../utils/accessor';\n\n\nexport default function DataFrame (data, store) {\n    if (isArray(data) || !arguments.length) data = {\n        store: store,\n        data: data || [],\n        dimensions: {}\n    };\n    Object.defineProperties(this, {\n        _inner: {\n            get () {\n                return data;\n            }\n        },\n        store: {\n            get () {\n                return data.store;\n            }\n        },\n        data: {\n            get () {\n                return data.data;\n            }\n        },\n        dimensions: {\n            get () {\n                return data.dimensions;\n            }\n        },\n        type: {\n            get () {\n                return 'dataframe';\n            }\n        }\n    });\n}\n\n\nDataFrame.prototype = {\n    constructor: DataFrame,\n\n    dataFrame () {\n        return this;\n    },\n\n    size () {\n        return this.data.length;\n    },\n\n    new (serie) {\n        if (isArray(serie)) return new DataFrame(serie, null, this.store);\n        else return new DataFrame(this._inner, serie);\n    },\n\n    cf () {\n        if (!this._inner.cf) this._inner.cf = crossfilter(this.data);\n        return this._inner.cf;\n    },\n\n    //  Create and return a crossfilter dimension\n    //  If value is not specified, keepExisting is by default true, and any\n    //  existing dimension name is recycled.\n    dimension (name, value, keepExisting) {\n        if (arguments.length === 1) keepExisting = true;\n        var current = this.dimensions[name];\n        if (current) {\n            if (keepExisting) return current;\n            current.dispose();\n        }\n        if (!value) value = accessor(name);\n        this.dimensions[name] = this.cf().dimension(value);\n        return this.dimensions[name];\n    },\n\n    //  Sort a dataframe by name and return the top values or all of them if\n    //  top is not defined. The name can be a function.\n    sortby (name, top) {\n        return this.new(this.dimension(name).top(top || Infinity));\n    },\n\n    // return a new dataframe by pivoting values for field name\n    pivot (dimension, key, value, total) {\n        var group = this.dimension(dimension).group();\n        if (!total) total = 'total';\n        return this.new(group.reduce(pivoter(1), pivoter(-1), Object).all().map(d => d.value));\n\n        function pivoter (m) {\n            let pk, pv;\n            return function (o, record) {\n                pk = ''+record[key];\n                pv = m*record[value];\n                o[dimension] = record[dimension];\n                if (pk in o) o[pk] += pv;\n                else o[pk] = pv;\n                if (total in o) o[total] += pv;\n                else o[total] = pv;\n                return o;\n            };\n        }\n    },\n\n    add () {\n        //this._inner.cf.add(data);\n    },\n\n    map (mapper) {\n        return this.new(this.data.map(mapper));\n    }\n};\n","import {isArray, isObject} from 'd3-let';\n\n//\n//  Array DataSource\n//  ====================\n//\n//  Data is given in an array, pkain & simple\nexport default {\n    schema: {\n        type: \"object\",\n        description: 'array of data',\n        properties: {\n            data: {\n                type: \"array\",\n                description: \"array of data\"\n            }\n        }\n    },\n\n    initialise (config) {\n        this._data = config.data;\n    },\n\n    getConfig (config) {\n        if (isArray(config)) return {data: config};\n        else if (isObject(config) && isArray(config.data)) return config;\n    },\n\n    getData () {\n        return this.asFrame(this._data);\n    }\n};\n","import {viewProviders} from 'd3-view';\n\nconst prefix = '[d3-data-source]';\n\n\nexport default function (msg) {\n    viewProviders.logger.warn(`${prefix} ${msg}`);\n}\n","import {isString} from 'd3-let';\n\n\nconst schemes = ['http', 'https', 'ws', 'wss'];\n\n\nexport default function (value) {\n    return isString(value) && schemes.indexOf(value.split('://')[0]) > -1;\n}\n","import {csvParse, tsvParse} from 'd3-dsv';\nimport {set} from 'd3-collection';\nimport {isObject} from 'd3-let';\nimport {viewProviders} from 'd3-view';\n\nimport warn from './warn';\nimport isUrl from '../utils/isurl';\n\nconst CSV = set(['text/plain', 'text/csv', 'application/vnd.ms-excel']);\n//\n//  Remote dataSource\n//  ===================\n//\n//  handle Json and csv data\nexport default {\n    schema: {\n        type: \"object\",\n        description: 'Remote data resource',\n        properties: {\n            url: {\n                type: \"string\",\n                description: \"url for fetching data\"\n            }\n        }\n    },\n\n    getConfig (config) {\n        if (isUrl(config)) return {url: config};\n        else if (isObject(config) && config.url)\n            return config;\n    },\n\n    initialise (config) {\n        this.url = config.url;\n    },\n\n    getData () {\n        var fetch = viewProviders.fetch,\n            self = this;\n        if (!fetch) {\n            warn('fetch provider not available, cannot submit');\n            return [];\n        }\n        return fetch(this.url).then(parse).then(data => self.asFrame(data));\n    }\n};\n\n\nfunction parse (response) {\n    var ct = (response.headers.get('content-type') || '').split(';')[0];\n    if (CSV.has(ct))\n        return response.text().then(csvParse);\n    else if (ct === 'text/tab-separated-values')\n        return response.text().then(tsvParse);\n    else if (ct === 'application/json')\n        return response.json();\n    else {\n        warn(`Cannot load content type '${ct}'`);\n        return [];\n    }\n}\n","import {map} from 'd3-collection';\nimport {isArray, isObject, isPromise, assign} from 'd3-let';\nimport {viewExpression} from 'd3-view';\n\nimport DataFrame from './dataframe';\n//\n//  A composite dataSource\n//  ===================\n//\n//  A composite data source has the source attribute with the name of one\n//  or more data sets to use as the source for this data set.\n//  The source property is useful in combination with a transform pipeline\n//  to derive new data.\n//  If string-valued, indicates the name of the source data set.\n//  If array-valued, specifies a collection of data source names that\n//  should be merged (unioned) together.\nexport default {\n    schema: {\n        type: \"object\",\n        description: 'Composite data source for combining data together',\n        properties: {\n            source: {\n                type: \"array\",\n                description: \"Array of data sources keys\",\n                item: {\n                    type: \"string\"\n                }\n            },\n            expression: {\n                type: \"string\",\n                description: \"expression to evaluate, must return a data frame or a Promise\"\n            }\n        }\n    },\n\n    initialise (config) {\n        this.source = config.source;\n        this.expression = config.expression ? viewExpression(config.expression) : null;\n    },\n\n    getConfig (config) {\n        if (isObject(config) && config.source) {\n            if (!isArray(config.source)) config.source = [config.source];\n            return config;\n        }\n    },\n\n    getData (context) {\n        var store = this.store,\n            sources = this.source,\n            expression = this.expression,\n            self = this;\n\n        return Promise.all(sources.map(source => {\n             return store.getData(source, context);\n        })).then(frames => {\n            let fc;\n            if (frames.length === 1) fc = frames[0];\n            else if (self.config.merge) fc = self.mergeFrames(frames);\n            else {\n                fc = new FrameCollection(store);\n                frames.forEach((frame, index) => {\n                    fc.frames.set(sources[index], frame);\n                });\n            }\n            if (expression) {\n                var model = store.model.$child(assign({}, context, {frame: fc}));\n                fc = expression.eval(model);\n            }\n            if (isPromise(fc)) return fc.then(data => self.asFrame(data));\n            else return self.asFrame(fc);\n        });\n    },\n\n    // TODO: implement frame merging\n    mergeFrames (frames) {\n        return frames[0];\n    }\n};\n\n\nfunction FrameCollection (store) {\n    this.frames = map();\n    Object.defineProperties(this, {\n        store: {\n            get () {\n                return store;\n            }\n        },\n        type: {\n            get () {\n                return 'frameCollection';\n            }\n        }\n    });\n}\n\nFrameCollection.prototype = {\n\n    new (data) {\n        return new DataFrame(data, this.store);\n    },\n\n    dataFrame () {\n        var frames = this.frames.values();\n        for (let i=0; i<frames.length; ++i) {\n            if (frames[i].type === 'dataframe') return frames[i];\n        }\n    }\n};\n","import {isObject, isPromise} from 'd3-let';\nimport {viewExpression} from 'd3-view';\n\n\nexport default {\n    schema: {\n        type: \"object\",\n        description: 'Expression to evaluate by the data store',\n        properties: {\n            expression: {\n                type: \"string\",\n                description: \"expression to evaluate, must return a data frame or a Promise\"\n            }\n        }\n    },\n\n    initialise (config) {\n        this.expression = viewExpression(config.expression);\n    },\n\n    getConfig (config) {\n        if (isObject(config) && config.expression)\n            return config;\n    },\n\n    getData (context) {\n        var self = this,\n            model = this.store.model.$child(context),\n            result = this.expression.eval(model);\n        if (isPromise(result)) return result.then(data => self.asFrame(data));\n        else return self.asFrame(result);\n    }\n};\n","import {viewProviders} from 'd3-view';\n\n\nexport default function (options) {\n    const\n        transform = options.transform,\n        schema = options.schema || {},\n        jsonValidator = viewProviders.jsonValidator ? viewProviders.jsonValidator(options.schema) : dummyValidator;\n    if (!schema.type) schema.type = 'object';\n\n    function transformFactory (config) {\n        const valid = jsonValidator.validate(config);\n\n        if (!valid) return jsonValidator.logError();\n\n        return doTransform;\n\n        function doTransform (frame) {\n            return transform(frame, config);\n        }\n    }\n\n    transformFactory.schema = schema;\n\n    return transformFactory;\n}\n\n\nconst dummyValidator = {\n    validate () {\n        return true;\n    }\n};\n","import {viewExpression} from 'd3-view';\n\nimport transformFactory from './base';\n\n//\n// Create a groupby transform from a config object\nexport default transformFactory ({\n    schema: {\n        description: \"The filter transform removes objects from a data frame based on a provided filter expression\",\n        properties: {\n            expr: {\n                type: \"string\"\n            }\n        },\n        required: [\"expr\"]\n    },\n    transform (frame, config) {\n        var expr = viewExpression(config.expr);\n        return frame.data.reduce((data, d, index) => {\n            if (expr.safeEval({d: d, index: index, frame: frame})) data.push(d);\n            return data;\n        }, []);\n    }\n});\n","import {viewProviders} from 'd3-view';\n\nconst prefix = '[d3-visualize]';\n\n\nexport default function (msg, err) {\n    viewProviders.logger.warn(`${prefix} ${msg}`);\n    if (err) viewProviders.logger.error(err.stack);\n}\n","export default function (size, value) {\n    var a = new Array(size);\n    a.fill(value);\n    return a;\n}\n","import {map} from 'd3-collection';\nimport {isArray, isString} from 'd3-let';\nimport {max, min, sum, mean, median, variance, deviation} from 'd3-array';\n\nimport warn from '../utils/warn';\nimport fillArray from '../utils/fillarray';\n\nexport const operations = map({\n    count,\n    max,\n    min,\n    sum,\n    mean,\n    median,\n    variance,\n    deviation\n});\n\nexport const scalar_operations = map({\n    count (agg) {return agg + 1;},\n    sum (agg, v) {return agg + v;},\n    max: Math.max,\n    min: Math.min\n});\n\n\nfunction count (array, accessor) {\n    return array.reduce((v, d) => {\n        if (accessor(d) !== undefined) v += 1;\n        return v;\n    }, 0);\n}\n//\n// The aggregate transform groups and summarizes an imput data stream to\n// produce a derived output data stream. Aggregate transforms can be used\n// to compute counts, sums, averages and other descriptive statistics over\n// groups of data objects.\nexport default function (config) {\n    let fields = config.fields,\n        ops = config.ops,\n        as = config.as,\n        groupby = config.groupby;\n\n    if (!fields && !ops) return countAll;\n\n    if (!isArray(fields)) return warn('Aggregate transforms expect an array of fields');\n    if (!ops) ops = 'count';\n    if (isString(ops)) ops = fillArray(fields.length, ops);\n    if (!isArray(ops)) return warn('Aggregate transform expects an array of ops');\n    if (ops.length < fields.length) warn('Aggregate transforms expects an ops array with same length as fields');\n    if (!as) as = [];\n    if (!isArray(as)) return warn('Aggregate transform expects an array of as fields');\n    return aggregate;\n\n\n    function countAll (frame) {\n        let key;\n        return frame.data.reduce((o, d) => {\n            for (key in d) {\n                if (key in o) o[key] += 1;\n                else o[key] = 1;\n            }\n            return o;\n        }, {});\n    }\n\n    function aggregate (frame) {\n        var data = [],\n            name, op;\n\n        if (groupby) return group(frame);\n\n        fields.forEach((field, index) => {\n            name = ops[index];\n            op = count;\n            if (name) {\n                op = operations.get(name);\n                if (!op) {\n                    op = count;\n                    warn(`Operation ${ops[index]} is not supported, use count`);\n                }\n            }\n            data.push({\n                label: as[index] || field,\n                data: op(frame.data, d => d[field])\n            });\n        });\n        return data;\n    }\n\n    //\n    //  Perform aggregation with a set of data fields to group by\n    function group (frame) {\n        let v, name, op;\n        const entries = fields.map((field, index) => {\n            name = ops[index];\n            op = scalar_operations.get('count');\n            if (name) {\n                op = scalar_operations.get(name);\n                if (!op) {\n                    op = scalar_operations.get('count');\n                    warn(`Operation ${name} is not supported, use count`);\n                }\n            }\n            return {\n                field: field,\n                as: as[index] || field,\n                op: op\n            };\n        });\n\n        return frame.dimension(groupby).group().reduce((o, record) => {\n            return entries.reduce((oo, entry) => {\n                v = 0;\n                if (entry.as in oo) v = oo[entry.as];\n                oo[entry.as] = entry.op(v, record[entry.field]);\n                return oo;\n            }, o);\n        }, null, Object).all().map(d => {\n            d.value[groupby] = d.key;\n            return d.value;\n        });\n    }\n}\n","import {isArray, isString} from 'd3-let';\nimport warn from '../utils/warn';\n\n//\n// Apply a cross filter to an array of fields\nexport default function (config) {\n    let fields = config.fields,\n        query = config.query;\n\n    if (!isArray(fields)) return warn('crossfilter transform expects an array of fields');\n    if (!isArray(query)) return warn('crossfilter transform expects an array of query');\n    if (query.length != fields.length) return warn('crossfilter transform expects an query array with same length as fields');\n\n    return crossfilter;\n\n    function crossfilter (frame) {\n        let dim, q;\n        fields.forEach((field, index) => {\n            q = query[index];\n            if (isString(q)) q = frame.store.eval(q);\n            dim = frame.dimension(field).filterAll();\n            if (q) dim.filter(q);\n        });\n        if (dim) return frame.new(dim.top(Infinity));\n        return frame;\n    }\n}\n","import warn from '../utils/warn';\n\n//\n// Create a groupby transform from a config object\nexport default function (config) {\n    var sortby = config.sortby,\n        groupby = config.groupby;\n\n    if (!sortby) warn('timeseries transform requires a \"sortby\" entry');\n\n    return timeseries;\n\n    function timeseries (frame) {\n        if (sortby) {\n            if (groupby) {\n                var dim = frame.dimension(groupby),\n                    groups = dim.group().top(Infinity),\n                    newframe = frame.new([]),\n                    tmp;\n                groups.forEach(group => {\n                    tmp = frame.new(dim.filterExact(group.key).top(Infinity)).dimension(sortby).group().top(Infinity);\n                    newframe.series.set(group.key, frame.new(tmp).dimension('key').top(Infinity));\n                });\n                return newframe;\n            } else {\n                return frame.new(frame.dimension(sortby).top(Infinity));\n            }\n        }\n        return frame;\n    }\n}\n","//\n//  Global options for visuals\n//  ============================\n//\nexport default {\n    // visual data source\n    dataSource: null,\n    //\n    size: {\n        // width set by the parent element\n        width: null,\n        // height set as percentage of width\n        height: '70%'\n    }\n};\n","//\n//  Map Fields Transform\n//  ========================\n//\n//  Convert a set af fields to a different data type\n//\nimport {map} from 'd3-collection';\nimport {isString} from 'd3-let';\nimport {utcParse} from 'd3-time-format';\n\nimport transformFactory from './base';\nimport warn from '../utils/warn';\nimport globalOptions from '../core/options';\n\n\nglobalOptions.dateFormat = '%d-%b-%y';\n\n\nconst converters = {\n    date (entry) {\n        return utcParse(entry.dateFormat || globalOptions.dateFormat);\n    },\n    number () {\n        return parseFloat;\n    }\n};\n\nexport default transformFactory({\n    shema: {\n        description: \"map a field values into another type\",\n        properties: {\n            fields: {\n                type: \"object\"\n            },\n            dateFormat: {\n                type: \"string\"\n            }\n        },\n        required: [\"fields\"]\n    },\n    transform (frame, config) {\n        var fields = map(config.fields),\n            mappers = [];\n        let i, converter;\n\n        fields.each((entry, key) => {\n            if (isString(entry)) entry = {type: entry};\n            converter = converters[entry.type];\n            if (!converter) warn(`Cannot convert field ${key} to type ${entry.type}`);\n            else mappers.push([key, converter(entry)]);\n        });\n\n        if (mappers.length)\n            frame = frame.map(d => {\n                for (i=0; i<mappers.length; ++i)\n                    d[mappers[i][0]] = mappers[i][1](d[mappers[i][0]]);\n                return d;\n            });\n\n        return frame;\n    }\n});\n","export default function (value, min, max) {\n    if (max !== undefined) value = Math.min(value, max);\n    return min === undefined ? value : Math.max(value, min);\n}\n","import transformFactory from './base';\nimport minmax from '../utils/minmax';\n\nconst\n    DEFAULT_METHOD = 'ema',   // or sma simple moving average\n    DEFAULT_PERIOD = 10,\n    DEFAULT_ALPHA = 0.5,\n    MAXALPHA = 0.999999;\n\n//\n// Exponential moving average transform\n// Useful for smoothing out volatile timeseries\nexport default transformFactory({\n    shema: {\n        description: \"Create moving average series from existing one. The new series override the existing one unless the as array is provided\",\n        properties: {\n            method: {\n                type: \"string\"\n            },\n            alpha: {\n                type: \"number\"\n            },\n            period: {\n                type: \"number\"\n            },\n            fields: {\n                type: \"array\",\n                items: {\n                    type: \"string\"\n                }\n            },\n            as: {\n                type: \"array\",\n                items: {\n                    type: \"string\"\n                }\n            }\n        },\n        required: [\"fields\"]\n    },\n    transform (frame, config) {\n        const as = config.as || [],\n            method = config.method || DEFAULT_METHOD;\n        let fieldto, y, s;\n\n        config.fields.forEach((field, index) => {\n            fieldto = as[index] || field;\n            //\n            // Simple Moving Average\n            if (method === 'sma') {\n                const period = Math.max(config.period || DEFAULT_PERIOD, 1),\n                    cumulate = [],\n                    buffer = [];\n                frame.data.forEach((d, index) => {\n                    y = d[field];\n                    if (cumulate.length === period) y -= buffer.splice(0, 1)[0];\n                    buffer.push(y);\n                    if (index) y += cumulate[cumulate.length-1];\n                    cumulate.push(y);\n                    d[fieldto] = y/cumulate.length;\n                });\n            //\n            // Exponential moving average\n            } else {\n                const alpha = minmax(config.alpha || DEFAULT_ALPHA, 1-MAXALPHA, MAXALPHA);\n\n                frame.data.forEach((d, index) => {\n                    y = d[field];\n                    if (!index) s = y;\n                    else s = alpha*s + (1-alpha)*y;\n                    d[fieldto] = s;\n                });\n            }\n        });\n    }\n});\n","import {sum} from 'd3-array';\n\nimport accessor from '../utils/accessor';\nimport transformFactory from './base';\n\n//\n// Create a groupby transform from a config object\nexport default transformFactory ({\n    schema: {\n        description: \"Group entries which are below a given aggregate cutoff\",\n        properties: {\n            field: {\n                type: \"string\"\n            },\n            cutoff: {\n                type: \"number\"\n            }\n        },\n        required: [\"field\", \"cutoff\"]\n    },\n    transform (frame, config) {\n        var get = accessor(config.field),\n            total = sum(frame.data, get);\n        let children = [],\n            aggregate = 0;\n        return frame.dimension(config.field).bottom(Infinity).reduce((data, d) => {\n            aggregate += get(d);\n            if (aggregate/total < config.cutoff) children.push(d);\n            else if (children) {\n                children.push(d);\n                d = {\n                    label: 'other',\n                    children: children\n                };\n                d[config.field] = aggregate;\n                children = null;\n                data.push(d);\n            } else\n                data.push(d);\n            return data;\n        }, []);\n    }\n});\n","import {assign} from 'd3-let';\n\nimport transformFactory from './base';\n\n//\n// First order difference along a dimension for a group of fields\nexport default transformFactory ({\n    schema: {\n        description: \"Perfrom a difference for a group of fields along a dimension. It is possible to perform a difference for different groups\",\n        properties: {\n            dimension: {\n                type: \"string\"\n            },\n            period: {\n                type: \"integer\",\n                minimum: 1\n            },\n            fields: {\n                type: \"array\",\n                items: {\n                    type: \"string\"\n                }\n            },\n            as: {\n                type: \"array\",\n                items: {\n                    type: \"string\"\n                }\n            },\n            groupby: {\n                type: \"string\"\n            }\n        },\n        required: [\"dimension\", \"fields\"]\n    },\n    transform (frame, config) {\n        var as = config.as || [],\n            period = config.period || 1,\n            data = [];\n\n        if (config.groupby) {\n            var g = frame.dimension(config.groupby),\n                groups = g.group().all();\n            groups.forEach(d => difference(frame.new(g.filterAll().filter(d.key).top(Infinity))));\n        } else {\n            difference(frame.new());\n        }\n\n        return data;\n\n        function difference (df) {\n            var dim = df.dimension(config.dimension),\n                zeros = config.fields.reduce((z, field) => {z[field] = 0; return z;}, {}),\n                stack = [];\n            let dd, prev;\n\n            dim.top(Infinity).forEach((d, index) => {\n                dd = assign({}, d);\n                stack.push(d);\n                if (index > period) prev = stack.splice(0, 1)[0];\n                else prev = zeros;\n                config.fields.forEach((field, index) => {\n                    d[as[index] || field] = d[field] - prev[field];\n                });\n                data.push(dd);\n            });\n        }\n    }\n});\n","// Collection of transforms\nimport {map} from 'd3-collection';\nimport {isArray, isPromise, assign} from 'd3-let';\n\nimport transform from './base';\nimport filter from './filter';\nimport aggregate from './aggregate';\nimport crossfilter from './crossfilter';\nimport timeseries from './timeseries';\nimport mapfields from './mapfields';\nimport movingaverage from './moving-average';\nimport groupsmall from './group-small';\nimport diff from './diff';\n\n//\n//  transforms Store\nexport default assign(map({\n    filter,\n    aggregate,\n    mapfields,\n    timeseries,\n    crossfilter,\n    movingaverage,\n    groupsmall,\n    diff\n}), {\n    add (name, o) {\n        this.set(name, transform(o));\n    }\n});\n\n\n//  Apply data transforms to a series\n//  Allow for asynchronous transforms\nexport function applyTransforms (frame, transforms) {\n    if (!transforms) return frame;\n    return applyt(frame, transforms.slice());\n}\n\nfunction applyt (frame, transforms, res) {\n    if (isArray(res)) frame = frame.new(res);\n    else if (res) frame = res;\n    if (transforms.length) {\n        var transform = transforms.splice(0, 1)[0],\n            ts = transform ? transform(frame) : null;\n        if (isPromise(ts)) return ts.then(res => applyt(frame, transforms, res));\n        else return applyt(frame, transforms, ts);\n    }\n    return frame;\n}\n","// Data store events\nimport {dispatch} from 'd3-dispatch';\n\nexport default dispatch('init', 'data', 'remove');\n","import {map} from 'd3-collection';\nimport {pop, isArray, assign} from 'd3-let';\n\nimport DataFrame from './dataframe';\nimport transformStore, {applyTransforms} from '../transforms/index';\nimport warn from '../utils/warn';\n\nimport dataEvents from './events';\n\n\n//\n//  DataSource prototype\n//  ======================\nconst dataSourcePrototype = {\n    schema: {properties: {}},\n    // get the config\n    // This method is used by the prototype\n    // to check if the config object is a valid one\n    getConfig () {},\n\n    // initialise the data source with a config object\n    initialise () {},\n\n    getData () {},\n\n    //\n    addTransforms (transforms) {\n        var self = this;\n        let t;\n        if (!transforms) return;\n        if (!isArray(transforms)) transforms = [transforms];\n        transforms.forEach(transform => {\n            t = transformStore.get(transform.type);\n            if (!t) warn(`Transform type \"${transform.type}\" not known`);\n            else self.transforms.push(t(transform));\n        });\n    },\n    //\n    // given a data object returns a Cross filter object\n    asFrame (data) {\n        if (data && !isArray(data) && data.constructor !== DataFrame) data = [data];\n        if (isArray(data)) {\n            data = data.map(entry => {\n                if (entry.constructor !== Object) entry = {data: entry};\n                return entry;\n            });\n            data = new DataFrame(data, this.store);\n        }\n        return applyTransforms(data, this.transforms);\n    }\n};\n\n\n// DataSource container\nexport default assign(map(), {\n    events: dataEvents,\n\n    add (type, source) {\n\n        // DataSource constructor\n        function DataSource (config, store) {\n            initDataSource(this, type, config, store);\n        }\n\n        DataSource.prototype = assign({}, dataSourcePrototype, source);\n        DataSource.prototype.constructor = DataSource;\n\n        this.set(type, DataSource);\n        return DataSource;\n    },\n\n    // Create a new DataSource\n    create (config, store) {\n        var sources = this.values(),\n            cfg;\n        for (var i=0; i<sources.length; ++i) {\n            cfg = sources[i].prototype.getConfig(config);\n            if (cfg) return new sources[i](cfg, store);\n        }\n    }\n});\n\n\nfunction initDataSource(dataSource, type, config, store) {\n\n    var name = store.dataName(pop(config, 'name')),\n        transforms = [];\n\n    // store.natural = cf.dimension(d => d._id);\n\n    Object.defineProperties(dataSource, {\n        name: {\n            get () {\n                return name;\n            }\n        },\n        store: {\n            get () {\n                return store;\n            }\n        },\n        type: {\n            get () {\n                return type;\n            }\n        },\n        // transforms to apply to data\n        transforms: {\n            get () {\n                return transforms;\n            }\n        },\n        config: {\n            get () {\n                return config;\n            }\n        }\n    });\n\n    dataSource.initialise(config);\n    dataSource.addTransforms(pop(config, 'transforms'));\n    store.sources.set(name, dataSource);\n    dataEvents.call('init', undefined, dataSource);\n}\n","import {map} from 'd3-collection';\nimport {isArray, isString, isPromise, isFunction, assign} from 'd3-let';\nimport {viewExpression, viewModel} from 'd3-view';\n\nimport array from './array';\nimport remote from './remote';\nimport composite from './composite';\nimport expression from './expression';\nimport dataSources from './sources';\nimport transformStore from '../transforms/index';\nimport dataEvents from './events';\n\n\ndataSources.add('array', array);\ndataSources.add('remote', remote);\ndataSources.add('composite', composite);\ndataSources.add('expression', expression);\n\n//\n//  DataStore\n//  ==============\n//\n//  Map names to datasets\n//  Individual data sets are assumed to contain a collection of records\n//  (or rows), which may contain any number of named data\n//  attributes (fields, or columns).\n//  Records are modeled using standard JavaScript objects.\nexport default function DataStore(model) {\n    var sources = map();\n\n    Object.defineProperties(this, {\n        sources: {\n            get () {\n                return sources;\n            }\n        }\n    });\n\n    // transforms function\n    this.transforms = assign({}, transformStore);\n    this.dataCount = 0;\n    this.model = (model && isFunction(model.$child)) ? model : viewModel(model);\n}\n\n\nDataStore.prototype = {\n    size () {\n        return this.sources.size();\n    },\n\n    // Add a new serie from a data source\n    addSources (config) {\n        //\n        // data is a string, it must be already registered with store\n        if (isString(config)) config = {source: config};\n\n        if (isArray(config)) {\n            var self = this;\n            return config.map(cfg => {\n                return dataSources.create(cfg, self);\n            });\n        } else if (config) {\n            return dataSources.create(config, this);\n        }\n    },\n\n    addTransforms (transforms) {\n        assign(this.transforms, transforms);\n    },\n\n    // set, get or remove a data source\n    source (name, source) {\n        if (arguments.length === 1) return this.sources.get(name);\n        if (source === null) {\n            var ds = this.sources.get(name);\n            this.sources.remove(name);\n            dataEvents.call('remove', this, ds);\n            return ds;\n        }\n        this.sources.set(name, source);\n        return this;\n    },\n\n    clearCache () {\n        this.sources.each(ds => {\n            delete ds.cachedFrame;\n        });\n    },\n\n    // get data from a source\n    getData (source, context) {\n        var ds = this.sources.get(source);\n        if (!ds) throw new Error(`Data source ${source} not available`);\n        if (ds.cachedFrame) return Promise.resolve(ds.cachedFrame);\n        var data = ds.getData(context);\n        if (!isPromise(data)) data = Promise.resolve(data);\n        return data.then(frame => {\n            if (ds.config.cache) ds.cachedFrame = frame;\n            ds.lastFrame = frame;\n            dataEvents.call('data', ds.store, ds, frame);\n            return frame;\n        });\n    },\n\n    eval (expr, context) {\n        let ctx = this.model.$child(context);\n        ctx.dataStore = this;\n        return viewExpression(expr).safeEval(ctx);\n    },\n\n    // Add a callback to the data event for a specific data source\n    // if the data source has already a data frame, trigger the callback\n    onData (name, callback) {\n        var store = this,\n            dsname = name.split('.')[0];\n        var ds = this.sources.get(dsname);\n        if (ds && ds.lastFrame) callback(ds.lastFrame);\n        dataEvents.on('data.' + name, (ds, frame) => {\n            if (ds.store === store && ds.name === dsname)\n                callback(frame);\n        });\n    },\n\n    dataName (name) {\n        this.dataCount++;\n        if (name) return '' + name;\n        var def = this.source('default');\n        if (!def) return 'default';\n        return `source${this.dataCount}`;\n    }\n};\n","export default function (x, n) {\n    return n ? Math.round(x * (n = Math.pow(10, n))) / n : Math.round(x);\n}\n","import {select} from 'd3-selection';\n\nimport round from './round';\nimport minmax from './minmax';\n\n\nconst WIDTH = 400;\nconst HEIGHT = '75%';\n\n\nexport function sizeValue (value, size) {\n    if (typeof(value) === \"string\" && value.indexOf('%') === value.length-1)\n        return round(0.01*parseFloat(value)*size);\n    return +value;\n}\n\n// Internal function for evaluating paper dom size\nexport function getSize (element, options) {\n    var size = {\n        width: options.width,\n        height: options.height\n    };\n\n    if (!size.width) {\n        size.width = getWidth(element);\n        if (size.width)\n            size.widthElement = getWidthElement(element);\n        else\n            size.width = WIDTH;\n    }\n\n    if (!size.height) {\n        size.height = getHeight(element);\n        if (size.height)\n            size.heightElement = getHeightElement(element);\n        else\n            size.height = HEIGHT;\n    }\n\n    // Allow to specify height as a percentage of width\n    size.height = minmax(sizeValue(size.height, size.width), undefined, windowHeight());\n    return size;\n}\n\n\nexport function getWidth (element) {\n    var el = getParentElementRect(element, 'width');\n    if (el) return elementWidth(el);\n}\n\n\nexport function getHeight (element) {\n    var el = getParentElementRect(element, 'width');\n    if (el) return elementHeight(el);\n}\n\n\nexport function getWidthElement (element) {\n    return getParentElementRect(element, 'width');\n}\n\n\nexport function getHeightElement (element) {\n    return getParentElementRect(element, 'height');\n}\n\n\nfunction windowHeight () {\n    return window.innerHeight;\n}\n\n\nfunction elementWidth (el) {\n    var w = el.getBoundingClientRect()['width'],\n        s = select(el),\n        left = padding(s.style('padding-left')),\n        right = padding(s.style('padding-right'));\n    return w - left - right;\n}\n\n\nfunction elementHeight (el) {\n    var w = el.getBoundingClientRect()['height'],\n        s = select(el),\n        top = padding(s.style('padding-top')),\n        bottom = padding(s.style('padding-bottom'));\n    return w - top - bottom;\n}\n\n\nfunction getParentElementRect (element, key) {\n    let parent = element.node ? element.node() : element,\n        v;\n    while (parent && parent.tagName !== 'BODY') {\n        v = parent.getBoundingClientRect()[key];\n        if (v)\n            return parent;\n        parent = parent.parentNode;\n    }\n}\n\n\nfunction padding (value) {\n    if (value && value.substring(value.length-2) == 'px')\n        return +value.substring(0, value.length-2);\n    return 0;\n}\n","import {isArray, isObject} from 'd3-let';\n\n\nexport default function clone (o) {\n    if (isArray(o)) return o.map(clone);\n    else if (isObject(o)) {\n        var v = {};\n        for (let key in o) {\n            v[key] = clone(o[key]);\n        }\n        return v;\n    } else return o;\n}\n","import {pop, isString, isObject, assign} from 'd3-let';\nimport {dispatch} from 'd3-dispatch';\nimport {viewBase, viewModel} from 'd3-view';\nimport 'd3-transition';\n\nimport globalOptions from './options';\nimport {sizeValue} from '../utils/size';\nimport minmax from '../utils/minmax';\nimport clone from '../utils/clone';\n\n\nconst CONTAINERS = ['visual', 'container'];\n\n//\n//  Gloval visuals object\n//  ==========================\n//\n//  Container of\n//  * live visuals\n//  * visual types\n//  * paper types\n//  * visual events\nexport const visuals = {\n    live: [],\n    types: {},\n    papers: {},\n    options: globalOptions,\n    schema: {\n        title: \"Visualize Specification Language\",\n        type: \"object\",\n        definitions: {\n            size: {\n                oneOf: [\n                    {\n                        type: \"number\",\n                        description: \"size in pixels\",\n                        minimum: 0\n                    },\n                    {\n                        type: \"string\",\n                        description: \"Size as a percentage\"\n                    }\n                ]\n            }\n        }\n    },\n    events: dispatch(\n        'before-init',\n        'after-init',\n        'resize',\n        'before-draw',\n        'after-draw'\n    )\n};\n\nfunction defaultsFromProperties (properties) {\n    var options = {};\n    let value, prop, key;\n    for (key in properties) {\n        prop = properties[key];\n        if (prop['$ref']) prop = schemaDef(prop['$ref']);\n        value = prop.default;\n        options[key] = value === undefined ? null : value;\n    }\n    return options;\n}\n\n\nfunction schemaDef (d) {\n    var dd = d.split('/');\n    return visuals.schema.definitions[dd[dd.length-1]] || {};\n}\n\n//\n//  Visual Interface\n//  ====================\n//\n//  Base prototype object for visuals\n//\nexport const visualPrototype = {\n\n    // initialise the visual with options\n    initialise () {\n\n    },\n\n    // draw this visual\n    draw () {},\n\n    // redraw the visual\n    // this is the method that should be invoked by applications\n    redraw (fetchData) {\n        if (this.drawing) {\n            var self = this,\n                event = `after-draw.${this.toString()}`;\n            visuals.events.on(event, () => {\n                // remove callback\n                visuals.events.on(event, null);\n                self.redraw(fetchData);\n            });\n        } else\n            this.drawing = this.draw(fetchData);\n        return this.drawing;\n    },\n\n    // destroy the visual\n    destroy () {},\n\n    toString () {\n        return `${this.visualType}-${this.model.uid}`;\n    },\n\n    // get a reactive model for type\n    getModel (type) {\n        if (!type) type = this.visualType;\n        var model = this.model[type];\n        if (!model && type in globalOptions) {\n            var options = pop(this.options, type),\n                self = this;\n            if (this.visualParent)\n                model = this.visualParent.getModel(type).$child(options);\n            else {\n                model = this.model.$new(globalOptions[type]);\n                model.$update(options);\n            }\n            this.model[type] = model;\n            //\n            // Trigger redraw when model change\n            // Do not fecth data\n            model.$on(() => self.redraw(false));\n        }\n        return model;\n    },\n\n    // apply the visualmodel uid to a name\n    idname (name) {\n        if (!name) name = this.visualType;\n        return `${name}-${this.model.uid}`;\n    },\n\n    modelProperty (name, model) {\n        var me = this.getModel(),\n            value = me[name];\n        return value === undefined ? model[name] : value;\n    },\n\n    dim (size, refSize, minSize, maxSize) {\n        return minmax(sizeValue(size, refSize), minSize, maxSize);\n    },\n    // pop this visual from a container\n    pop (container) {\n        if (container) {\n            var idx = container.live.indexOf(this);\n            if (idx > -1) container.live.splice(idx, 1);\n        }\n    },\n\n    getVisualSchema (name) {\n        var schema = this.options.visuals ? this.options.visuals[name] : null,\n            parent = this.visualParent;\n        if (parent && isString(schema)) {\n            name = schema;\n            schema = parent.getVisualSchema(name);\n        } else if (parent && !schema)\n            schema = parent.getVisualSchema(name);\n        if (isObject(schema))\n            return clone(schema);\n    }\n};\n\n//\n//  Create a new Visual Constructor\nexport default function (type, proto) {\n    const schema = pop(proto, 'schema');\n    if (schema) {\n        visuals.options[type] = defaultsFromProperties(schema);\n        visuals.schema.definitions[type] = {\n            type: \"object\",\n            properties: assign({\n                data: {\n                    \"$ref\": \"#/definitions/data\"\n                }\n            }, schema)\n        };\n    }\n\n    function Visual(element, options, parent, model) {\n        Object.defineProperties(this, {\n            visualType: {\n                get () {\n                    return type;\n                }\n            },\n            isViz: {\n                get () {\n                    return CONTAINERS.indexOf(type) === -1;\n                }\n            },\n            visualRoot: {\n                get () {\n                    if (this.visualParent) return this.visualParent.visualRoot;\n                    return this;\n                }\n            }\n        });\n        this.visualParent = parent;\n        this.model = parent ? parent.model.$new() : (model || viewModel());\n        this.options = options || {};\n        this.drawing = false;\n        visuals.events.call('before-init', undefined, this);\n        this.initialise(element);\n        visuals.events.call('after-init', undefined, this);\n    }\n\n    Visual.prototype = assign({}, viewBase, visualPrototype, proto);\n    Visual.prototype.constructor = Visual;\n    visuals.types[type] = Visual;\n    return Visual;\n}\n","import {pop, inBrowser} from 'd3-let';\nimport {viewDebug} from 'd3-view';\nimport {select} from 'd3-selection';\n\nimport createVisual, {visuals} from './base';\nimport warn from '../utils/warn';\nimport {getSize} from '../utils/size';\n\n//\n//  Visual\n//  =============\n//\n//  A Visual is a a container of visual layers and it is\n//  associated with an HTML element\n//\n//  Usually a Visual contains one layer only, however it is possible to\n//  have more than one by combining several layers together. Importantly,\n//  layers in one visual generate HTMLElements which are children of the visual\n//  element and inherit both the width and height.\n//\n//  A visual register itself with the visuals.live array\n//\nexport default createVisual('visual', {\n\n    schema: {\n        render: {\n            type: 'string',\n            enum: ['canvas', 'svg'],\n            default: 'svg'\n        },\n        // width set by the parent element\n        width: {\n            description: 'Width of the visual',\n            '$refs': '#/definitions/size'\n        },\n        // height set as percentage of width\n        height: {\n            description: 'Height of the visual',\n            '$refs': '#/definitions/size',\n            default: \"70%\"\n        }\n    },\n\n    initialise (element) {\n        if (!element) throw new Error('HTMLElement required by visual group');\n        if (this.visualParent && this.visualParent.visualType !== 'container')\n            throw new Error('Visual parent can be a container only');\n        if (!this.select(element).select('.paper').node())\n            this.select(element).append('div').classed('paper', true);\n\n        Object.defineProperties(this, {\n            element : {\n                get () {\n                    return element;\n                }\n            },\n            paperElement : {\n                get () {\n                    return this.sel.select('.paper');\n                }\n            },\n            sel: {\n                get () {\n                    return this.select(element);\n                }\n            },\n            size: {\n                get () {\n                    return [this.width, this.height];\n                }\n            }\n        });\n\n        this.sel.classed('d3-visual', true);\n        // list of layers which define the visual\n        this.layers = [];\n        this.drawCount = 0;\n        visuals.live.push(this);\n        element.__visual__ = this;\n        if (this.visualParent) this.visualParent.live.push(this);\n    },\n\n    activate () {\n        this.layers.forEach(layer => layer.activate());\n    },\n\n    deactivate () {\n        this.layers.forEach(layer => layer.deactivate());\n    },\n\n    getVisual () {\n        return this;\n    },\n\n    // Draw the visual\n    draw (fetchData) {\n        if (this.drawing) {\n            warn(`${this.toString()} already drawing`);\n            return this.drawing;\n        }\n        else if (!this.drawCount) {\n            this.drawCount = 1;\n            this.fit();\n        } else {\n            this.drawCount++;\n            this.clear();\n        }\n        var self = this;\n        visuals.events.call('before-draw', undefined, this);\n        return Promise.all(this.layers.map(visual => {\n            return visual.redraw(fetchData);\n        })).then(() => {\n            delete self.drawing;\n            visuals.events.call('after-draw', undefined, self);\n        }, err => {\n            delete self.drawing;\n            warn(`Could not draw ${self.toString()}: ${err}`, err);\n        });\n    },\n\n    clear () {},\n\n    // Add a new visual to this group\n    addVisual (options) {\n        var type = pop(options, 'type');\n        var VisualClass = visuals.types[type];\n        if (!VisualClass)\n            warn(`Cannot add visual \"${type}\", not available`);\n        else\n            return new VisualClass(this.element, options, this);\n    },\n    //\n    // Fit the root element to the size of the parent element\n    fit () {\n        this.resize(null, true);\n        return this;\n    },\n\n    // resize the chart\n    resize (size, fit) {\n        if (!size) size = getSize(this.element.parentNode || this.element, this.getModel());\n        var currentSize = this.size;\n\n        if (fit || (currentSize[0] !== size.width || currentSize[1] !== size.height)) {\n            if (!fit) viewDebug(`Resizing \"${this.toString()}\"`);\n            this.width = size.width;\n            this.height = size.height;\n            // this.paper.style('width', this.width + 'px').style('height', this.height + 'px');\n            this.paperElement.style('height', this.height + 'px');\n            visuals.events.call('resize', undefined, this);\n            // if we are not just fitting draw the visual without fetching data!!\n            if (!fit) this.draw(false);\n        }\n        return this;\n    },\n\n    paper () {\n        var paper = this.__paper,\n            render = this.getModel().render;\n        if (paper && paper.paperType === render) return paper;\n        var PaperType = visuals.papers[render];\n        if (!PaperType) throw new Error(`Unknown paper ${render}`);\n        paper = new PaperType(this);\n        this.__paper = paper;\n        return paper;\n    },\n\n    getPaperGroup (gname) {\n        return this.paper().group(gname);\n    },\n\n    destroy () {\n        this.pop(this.visualParent);\n        this.pop(visuals);\n    }\n});\n\n\nif (inBrowser) {\n    // DOM observer\n    // Check for changes in the DOM that leads to visual actions\n    const observer = new MutationObserver(visualManager);\n    observer.observe(document.documentElement, {\n        childList: true,\n        subtree: true\n    });\n}\n\n//\n//  Clears visualisation going out of scope\nfunction visualManager (records) {\n    records.forEach(record => {\n        var nodes = record.removedNodes;\n        if (!nodes || !nodes.length) return;  // phantomJs hack\n        nodes.forEach(node => {\n            if (node.querySelectorAll) {\n                if (!node.__visual__)\n                    select(node).selectAll('.d3-visual').each(destroy);\n                else\n                    destroy.call(node);\n            }\n        });\n    });\n}\n\n\nfunction destroy () {\n    var viz = this.__visual__;\n    if (viz) {\n        viz.destroy();\n        viewDebug(`Removed \"${viz.toString()}\" from DOM, ${visuals.live.length} live visuals left`);\n    }\n    else warn('d3-visual without __visual__ object');\n}\n","import {isFunction, pop, assign} from 'd3-let';\nimport {viewProviders} from 'd3-view';\n\nimport createVisual, {visuals} from './base';\nimport Visual from './visual';\nimport warn from '../utils/warn';\n\n\n//\n//  crateChart\n//\n//  A chart is a drawing of a data frame in two dimension\nexport default function (type) {\n    if (viewProviders.visualPlugins) {\n        extendVisualPrototype(viewProviders.visualPlugins);\n        viewProviders.visualPlugins = null;\n    }\n    var protos = [{}, vizPrototype, chartPrototype];\n    for (var i=1; i<arguments.length; ++i) protos.push(arguments[i]);\n    return createVisual(type, assign.apply(undefined, protos));\n}\n\n\nfunction extendVisualPrototype (plugins) {\n    let options, proto;\n    Object.keys(plugins).forEach(name => {\n        options = plugins[name].options;\n        proto = plugins[name].prototype;\n        if (options) visuals.options[name] = options;\n        if (proto) assign(vizPrototype, proto);\n    });\n}\n\n//  Viz Prototype\n//  =================\nexport const vizPrototype = {\n    $: null,\n\n    initialise (element) {\n        // No visual parent, create the visual\n        var visual = this.visualParent;\n        if (this.options.active !== undefined)\n            this.active = pop(this.options, 'active');\n        else\n            this.active = true;\n        if (!visual) {\n            this.visualParent = visual = new Visual(element, this.options, null, this.model);\n            this.model = visual.model.$new();\n            this.options = {};\n        } else if (!visual.layers)\n            throw new Error(`visual parent of ${this.visualType} does not have layers`);\n        visual.layers.push(this);\n    },\n\n    //\n    // paper object for this visualisation\n    paper () {\n        if (this.paperType) {\n            if (!this._paper) {\n                var PaperType = visuals.papers[this.paperType];\n                if (!PaperType) throw new Error(`Unknown paper ${this.paperType}`);\n                this._paper = new PaperType(this);\n            }\n            return this._paper;\n        } else\n            return this.visualParent.paper();\n    },\n\n    activate (callback) {\n        if (!this.active) {\n            this.active = true;\n            this.group()\n                .transition(this.model.uid)\n                .on('end', () => {\n                    if(callback) callback();\n                })\n                .style('opacity', 1);\n        }\n        return this;\n    },\n\n    deactivate (callback) {\n        if (this.active) {\n            this.active = false;\n            this.group()\n                .transition(this.model.uid)\n                .on('end', () => {\n                    if(callback) callback();\n                })\n                .style('opacity', 0);\n        }\n        return this;\n    },\n\n    getVisual () {\n        return this.visualParent.getVisual();\n    },\n\n    // a group selection for a given name\n    group (name) {\n        var me = `${this.visualType}-${this.model.uid}`,\n            group = this.visualParent.getPaperGroup(me);\n        if (name && name !== this.visualType) return this.paper().childGroup(group, name);\n        else return group;\n    },\n\n    translate (x, y) {\n        if (isFunction(x)) {\n            return function (d) {\n                var xt = x(d) || 0,\n                    yt = y(d) || 0;\n                return `translate(${xt}, ${yt})`;\n            };\n        } else return `translate(${x}, ${y})`;\n    },\n\n    getD3 (prefix, name) {\n        return this.$[`${prefix}${name[0].toUpperCase()}${name.substring(1)}`];\n    },\n\n    displayError () {}\n};\n\n\nexport const chartPrototype = {\n\n    //  override draw method\n    draw (fetchData) {\n        if (this.drawing) {\n            warn(`${this.toString()} already drawing`);\n            return this.drawing;\n        }\n        var self = this,\n            doDraw = this.doDraw;\n\n        this.paper().size(this.boundingBox(true));\n\n        if(!this.active) return;\n\n        visuals.events.call('before-draw', undefined, this);\n\n        if (fetchData === false && this._drawArgs) {\n            delete self.drawing;\n            doDraw.apply(self, this._drawArgs);\n            visuals.events.call('after-draw', undefined, self);\n        } else {\n            return Promise.all([\n                this.requires ? viewProviders.require.apply(undefined, this.requires) : [],\n                // this.getMetaData(),\n                this.getData()\n            ]).then(args => {\n                delete self.drawing;\n                var frame = args[1];\n                if (frame) {\n                    this.$ = args[0];\n                    this.frame = frame;\n                    doDraw.apply(self);\n                    visuals.events.call('after-draw', undefined, self);\n                }\n            }, err => {\n                delete self.drawing;\n                warn(`Could not draw ${self.toString()}: ${err}`, err);\n                this.displayError(err);\n            });\n        }\n    }\n};\n","import {assign} from 'd3-let';\nimport {viewBase} from 'd3-view';\n\nimport {visuals} from './base';\n\n\nexport default function createPaper (type, proto) {\n\n    function Paper (viz, uid) {\n        var element = this.initialise(viz, uid);\n        Object.defineProperties(this, {\n            element: {\n                get () {\n                    return element;\n                }\n            },\n            sel: {\n                get () {\n                    return this.select(element);\n                }\n            },\n            paperType: {\n                get () {\n                    return type;\n                }\n            }\n        });\n    }\n\n    Paper.prototype = assign({}, viewBase, paperPrototype, proto);\n\n    visuals.papers[type] = Paper;\n    return Paper;\n}\n\n\nconst paperPrototype = {\n\n    initialise () {},\n    transition () {},\n    size (box) {\n        this.sel\n            .attr('width', box.width)\n            .attr('height', box.height);\n        return this;\n    },\n\n    group (cname, transform) {\n        return this.childGroup(this.sel, cname, transform);\n    },\n\n    childGroup (g, cname, transform) {\n        if (!cname) cname = 'main';\n        var ge = g.selectAll(`.${cname}`)\n                    .data([0])\n                    .enter()\n                    .append('g').classed(cname, true);\n        // TODO, not sure we need this anymore - we gave applyTransform\n        if (transform)\n            ge.attr('transform', transform)\n                .merge()\n                .attr('transform', transform);\n        return g.select(`.${cname}`);\n    },\n\n    dim (value) {\n        return value;\n    }\n};\n\n\nexport const Svg = createPaper('svg', {\n\n    initialise (visual, uid) {\n        if (!uid) visual.model.uid;\n        var svg = visual.paperElement.select(`svg#${uid}`);\n        if (!svg.size())\n            svg = visual.paperElement.append('svg')\n                .attr('id', uid)\n                .classed(visual.visualType, true)\n                .style('position', 'absolute');\n        return svg.node();\n    }\n});\n\n\nexport const Div = createPaper('div', {\n\n    initialise (viz) {\n        var uid = viz.model.uid,\n            visual = viz.visualParent;\n        var div = visual.paperElement.select(`div#${uid}`);\n        if (!div.size())\n            div = visual.paperElement.append('div')\n                    .attr('id', uid)\n                    .classed(visual.visualType, true)\n                    .style('position', 'absolute');\n        return div.node();\n    },\n\n    size (box) {\n        this.sel\n            .style('width', `${box.width}px`)\n            .style('height', `${box.height}px`);\n        return this;\n    },\n\n    childGroup (g, cname) {\n        if (!cname) cname = 'main';\n        g.selectAll(`.${cname}`)\n            .data([0]).enter()\n            .append('div').classed(cname, true);\n        return g.select(`.${cname}`);\n    },\n});\n","import {isFunction} from 'd3-let';\n\nexport default function (obj, cfg) {\n    let keys;\n    if (cfg.$events) keys = cfg.$events.keys();\n    else keys = Object.keys(cfg);\n    keys.forEach(key => {\n        if (isFunction(obj[key]))\n            obj[key](cfg[key]);\n    });\n    return obj;\n}\n","//\n//  Axis Plugin\n//  ================\n//\n//  * A visual must require \"d3-scale\"\n//\nimport {isString} from 'd3-let';\nimport {vizPrototype} from '../core/chart';\nimport extendObject from '../utils/extend-object';\n\n\nvizPrototype.getScale = function (cfg) {\n    if (isString(cfg)) cfg = {type: cfg};\n    var scale = this.getD3('scale', cfg.type)();\n    return extendObject(scale, cfg);\n};\n","//\n//  Add a menu buttom to a visual\n\nimport globalOptions from '../core/options';\nimport {visuals} from '../core/base';\n\n\nglobalOptions.menu = {\n    display: false,\n    height: '8%',\n    maxHeight: 50,\n    minHeight: 20\n};\n\n\nvisuals.events.on('after-init.menu', viz => {\n    if (viz.visualType === 'visual') {\n        var menu = viz.getModel('menu');\n        if (menu.display) {\n            viz.menu = viz.sel.insert('nav', ':first-child').classed('d3-nav navbar p-1', true);\n            viz.menu.append('h4').classed('title', true);\n        }\n    }\n});\n\nvisuals.events.on('before-draw.menu', viz => {\n    if (viz && viz.menu) {\n        refreshMenu(viz);\n    }\n});\n\n\nfunction refreshMenu(viz) {\n    var menu = viz.getModel('menu'),\n        height = viz.dim(menu.height, viz.height, menu.minHeight, menu.maxHeight);\n    viz.menu.style('height', `${height}px`);\n}\n","//\n//  dataStore integration with visuals\nimport {isString, pop, assign} from 'd3-let';\n\nimport {visuals} from '../core/base';\nimport DataStore from '../data/store';\nimport dataSources from '../data/sources';\nimport {vizPrototype} from '../core/chart';\nimport warn from '../utils/warn';\n\n\nassign(visuals.schema.definitions, {\n    data: {\n        type: \"array\",\n        items: {\n            '$ref': '#/definitions/dataSource'\n        }\n    },\n    dataSource: {\n        oneOf: dataSources.values().map(Ds => {\n            const schema = Ds.prototype.schema;\n            schema.properties.transforms = {'$ref': '#/definitions/transforms'};\n            return schema;\n        })\n    }\n});\n//  getData method\n//  =====================\n//\n//  Inject a method for easily retrieving data from the datastore\nvizPrototype.getData = function () {\n    var name = this.model.data;\n    if (!name) {\n        warn(`Visual ${this.visualType} without data name, cannot get data`);\n        return;\n    }\n    return this.dataStore.getData(name, {$visual: this});\n};\n\n//\n// Context for expression evaluation\nvizPrototype.getContext = function (context) {\n    return this.dataStore.model.$child(context);\n};\n\n\nvisuals.events.on('before-init.data', viz => {\n    if (!viz.isViz) return;\n    // remove data from options\n    viz.data = pop(viz.options, 'data');\n});\n\n\nvisuals.events.on('after-init.data', viz => {\n    Object.defineProperties(viz, {\n        dataStore : {\n            get () {\n                return viz.model.root.dataStore;\n            }\n        },\n    });\n    if (viz.isViz) setupLayer(viz);\n    else setupVisual(viz);\n});\n\n\nfunction setupVisual (visual) {\n    var store = visual.dataStore,\n        data = pop(visual.options, 'data');\n    //\n    if (!store) {\n        // create the data store for the visual or container\n        store = new DataStore(visual.getModel('dataContext'));\n        visual.model.root.dataStore = store;\n    }\n    store.addSources(data);\n}\n\n\nfunction setupLayer (layer) {\n    var store = layer.dataStore,\n        data = pop(layer, 'data');\n    if (!data) return;\n    if (isString(data)) data = {source: data};\n    if (!data.name) data.name = layer.model.uid;\n    data = store.addSources(data);\n    if (data)\n        layer.model.$set('data', data.name);\n    else\n        warn(`Could not create data source ${data.name}`);\n}\n","import {format} from 'd3-format';\nimport {map} from 'd3-collection';\n\nconst formats = map();\n\nexport default function (specifier, value) {\n    var fmt = formats.get(specifier);\n    if (!fmt) {\n        fmt = format(specifier);\n        formats.set(specifier, fmt);\n    }\n    return arguments.length == 2 ? fmt(value) : fmt;\n}\n","import {timeFormat} from 'd3-time-format';\nimport {map} from 'd3-collection';\n\nconst formats = map();\n\nexport default function (specifier, value) {\n    var fmt = formats.get(specifier);\n    if (!fmt) {\n        fmt = timeFormat(specifier);\n        formats.set(specifier, fmt);\n    }\n    return arguments.length == 2 ? fmt(value) : fmt;\n}\n","//\n//  Add formatting capabilities to visuals\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\nimport cachedFormat from '../utils/format';\nimport cachedFormatTime from '../utils/format-time';\n\n//\n// Visual Data Context\nvisuals.options.dataContext = {\n    $format: cachedFormat,\n    $formatTime: cachedFormatTime\n};\n\n\nvizPrototype.format = function (fmt) {\n    var store = this.dataStore,\n        formatter = store.eval(fmt);\n    if (formatter) return formatter;\n    try {\n        return cachedFormat(fmt);\n    } catch (e) {\n        return cachedFormatTime(fmt);\n    }\n};\n","import {vizPrototype} from '../core/chart';\nimport {visuals} from '../core/base';\n\n\nvisuals.options.font = {\n    size: '3%',\n    minSize: 10,\n    maxSize: 20,\n    stroke: '#333',\n    family: null\n};\n\n\nvizPrototype.font = function (box, font) {\n    font = font ? font : this.getModel('font');\n\n    var model = this.getModel(),\n        size = this.dim(font.size, box.height, font.minSize, font.maxSize);\n    if (model.fontSizeMultiplier)\n        size *= model.fontSizeMultiplier;\n    return size;\n};\n","import {inBrowser} from 'd3-let';\nimport {viewDebounce} from 'd3-view';\nimport {select} from 'd3-selection';\n\nimport {visuals} from '../core/base';\nimport globalOptions from '../core/options';\n\n\nif (!globalOptions.resizeDelay)\n    globalOptions.resizeDelay = 200;\n\n\nif (inBrowser) {\n    var resize = viewDebounce(() => {\n        visuals.live.forEach(p => p.resize());\n    }, globalOptions.resizeDelay);\n\n    select(window).on('resize.visuals', resize);\n}\n","// Title plot annotation\nimport {isString} from 'd3-let';\n\nimport {visuals} from '../core/base';\nimport globalOptions from '../core/options';\n\n\nglobalOptions.title = {\n    text: null,\n    size: '3%',\n    minSize: 15,\n    maxSize: 25,\n    offset: ['10%', 0]\n};\n\n\nvisuals.events.on('before-init.title', viz => {\n    var title = viz.options.title;\n    if (isString(title)) viz.options.title = {text: title};\n});\n\n\nvisuals.events.on('after-draw.title', viz => {\n    var title = viz.getModel('title');\n    let visual = viz;\n    if (visual.visualType === 'visual') delete visual.__title;\n    else if (viz.isViz) visual = viz.visualParent;\n    else return;\n    if (!title.text) return;\n    if (visual.menu && !visual.__title) {\n        visual.__title = title;\n        menuTitle(visual, title);\n    } else if (viz.isViz) {\n        var box = viz.boundingBox(true),\n            font = viz.getModel('font'),\n            stroke = title.stroke || font.stroke,\n            size = viz.font(box, title),\n            text = viz.group().selectAll('text.chartitle').data([title.text]),\n            top = viz.dim(title.offset[0], box.vizHeight),\n            left = viz.dim(title.offset[1], box.vizWidth),\n            translate = viz.translate(box.margin.left+box.innerWidth/2+left, top);\n        text.enter()\n            .append('text')\n            .classed('chartitle', true)\n            .attr(\"transform\", translate)\n            .style(\"text-anchor\", \"middle\")\n            .style(\"font-size\", size)\n            .style(\"fill\", stroke)\n            .text(d => d)\n        .merge(text)\n            .transition()\n            .attr(\"transform\", translate)\n            .style(\"font-size\", size)\n            .style(\"fill\", stroke)\n            .text(d => d);\n    }\n});\n\n\nfunction menuTitle(visual, title) {\n    var height = number(visual.menu.style('height')),\n        maxSize = title.maxSize ? Math.min(height-4, title.maxSize) : height-4,\n        size = visual.dim(title.size, visual.width, title.minSize, maxSize);\n    visual.menu.select('.title')\n        .html(title.text)\n        .style('font-size', `${size}px`)\n        .style('line-height', `${height}px`);\n}\n\n\nfunction number (px) {\n    return +px.substring(0, px.length-2);\n}\n","import {isObject, isArray} from 'd3-let';\n\nimport globalOptions from '../core/options';\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\nimport {sizeValue} from '../utils/size';\n\n\nexport const KEYS = ['top', 'bottom', 'left', 'right'];\nconst LEFTRIGHT = ['left', 'right'];\n\n\n// margin for visual marks\nglobalOptions.margin = {\n    top: 20,\n    bottom: 20,\n    left: 20,\n    right: 20\n};\n// padding for the visual paper\nglobalOptions.padding = {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0\n};\n\n\n//\n//  Bounding box for a viz\n//  ==========================\nvizPrototype.boundingBox = function (clearCache) {\n    if (clearCache) clearBBCache(this);\n    if (!this.__boundingBox) {\n        var width = this.visualParent.width,\n            height = this.visualParent.height,\n            padding = calculate(this.getModel('padding'), width, height),\n            vizWidth = width - padding.left - padding.right,\n            vizHeight = height - padding.top - padding.bottom,\n            margin = calculate(this.getModel('margin'), vizWidth, vizHeight),\n            total = KEYS.reduce((o, key) => {\n                o[key] = margin[key] + padding[key];\n                return o;\n            }, {});\n        this.__boundingBox = {\n            margin: margin,\n            padding: padding,\n            total: total,\n            width: width,\n            height: height,\n            vizWidth: vizWidth,\n            vizHeight: vizHeight,\n            innerWidth: width - total.left - total.right,\n            innerHeight: height - total.top - total.bottom,\n            $nomargins: $nomargins\n        };\n    }\n    return this.__boundingBox;\n};\n\n\nvisuals.events.on('after-init.margin', viz => {\n    viz.margin = margins('margin', viz);\n    viz.padding = margins('padding', viz);\n});\n\n\nvisuals.events.on('before-draw.margin', viz => {\n    if (viz.isViz) clearBBCache(viz);\n});\n\n\nfunction margins (name, viz) {\n    var value = viz.options[name];\n    if (value !== undefined && !isObject(value))\n        viz.options[name] = marginv(value || 0);\n}\n\n\nfunction calculate (model, width, height) {\n    return KEYS.reduce((o, key) => {\n        o[key] = sizeValue(model[key], LEFTRIGHT.indexOf(key) > -1 ? width : height);\n        return o;\n    }, {});\n}\n\n\nfunction clearBBCache (viz) {\n    delete viz.__boundingBox;\n    if (isArray(viz.layers)) viz.layers.forEach(clearBBCache);\n}\n\n\nfunction $nomargins () {\n    return {\n        width: this.innerWidth,\n        height: this.innerHeight,\n        margin: marginv(0),\n        padding: marginv(0),\n        total: marginv(0),\n        innerWidth: this.innerWidth,\n        innerHeight: this.innerHeight,\n        $nomargins: this.$nomargins\n    };\n}\n\n\nfunction marginv (v) {\n    return {\n        left: v,\n        right: v,\n        top: v,\n        bottom: v\n    };\n}\n","//\n//  Axis Plugin\n//  ================\n//\n//  * A visual must require \"d3-axis\"\n//\nimport {timeFormat} from 'd3-time-format';\nimport {isDate, assign} from 'd3-let';\n\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\n\n\nconst axisDefaults = {\n    ticks: 5,\n    tickSize: 6,\n    tickSizeOuter: null,\n    //\n    // tick labels\n    rotate: null,\n    ancor: 'end',\n    format: null,\n    timeFormat: '%Y-%m-%d',\n    stroke: '#333',\n    hide: null, // specify a pixel size below which tick labels are not displayed\n    //\n    // title\n    title: null,\n    titleRotate: null,\n    titleOffset: 0.7\n};\n\n\nvisuals.options.xAxis = assign({\n    location: \"bottom\"\n}, axisDefaults);\n\n\nvisuals.options.yAxis = assign({\n    location: \"left\"\n}, axisDefaults);\n\n\nvizPrototype.getAxis = function (orientation, scale) {\n    return this.getD3('axis', orientation)(scale);\n};\n\n\nvizPrototype.xAxis1 = function (location, scale, box, value) {\n    var model = this.getModel('xAxis'),\n        axis = this._axis(location, scale, model, value),\n        ga = this.group('x-axis');\n    this.applyTransform(ga, this.translateAxis(location, box));\n    formatAxis(ga.transition(this.transition('x-axis')).call(axis), model, scale);\n    if (model.title)\n        this.axisTitle(ga, location, scale, box, model);\n    return ga;\n};\n\n\nvizPrototype.yAxis1 = function (location, scale, box, value) {\n    var model = this.getModel('yAxis'),\n        axis = this._axis(location, scale, model, value),\n        ga = this.group('y-axis');\n    this.applyTransform(ga, this.translateAxis(location, box));\n    formatAxis(ga.transition(this.transition('x-axis')).call(axis), model, scale);\n    if (model.title)\n        this.axisTitle(ga, location, scale, box, model);\n    return ga;\n};\n\n\n//\n//  Apply Axis title\nvizPrototype.axisTitle = function (ga, location, scale, box, model) {\n    var title = ga.selectAll('text.title').data([model.title]),\n        rotate = model.titleRotate || 0,\n        x = 0,\n        y = 0;\n\n    if (!rotate && (location === 'right' || location === 'left')) rotate = -90;\n    if (location == \"left\") {\n        x =-model.titleOffset*box.margin.left;\n        y = box.innerHeight/2;\n    }\n    var translate = `translate(${x},${y}) rotate(${rotate})`,\n        font = this.font(box);\n\n    title\n        .enter()\n            .append('text')\n            .classed('title', true)\n            .attr(\"transform\", translate)\n            .style(\"text-anchor\", \"middle\")\n            .style(\"font-size\", font)\n            .style(\"fill\", model.stroke)\n            .text(d => d)\n        .merge(title)\n            .transition()\n            .attr(\"transform\", translate)\n            .style(\"font-size\", font)\n            .style(\"fill\", model.stroke)\n            .text(d => d);\n};\n\nvizPrototype.translateAxis = function (location, box) {\n    if (location === 'top' || location === 'left')\n        return this.translate(box.margin.left, box.margin.top);\n    else if (location === 'bottom')\n        return this.translate(box.margin.left, box.margin.top+box.innerHeight);\n    else\n        return this.translate(box.margin.left+box.innerWidth, box.margin.top);\n};\n\nvizPrototype._axis = function (location, scale, model, value) {\n    var axis = this.getAxis(location, scale).tickSize(model.tickSize);\n    if (model.tickSizeOuter !== null) axis.tickSizeOuter(model.tickSizeOuter);\n    if (isDate(value)) axis.tickFormat(timeFormat(model.timeFormat));\n    else if (model.format !== null) axis.tickFormat(this.format(model.format));\n    return axis.ticks(model.ticks);\n};\n\n\nfunction formatAxis (ga, model, scale) {\n    ga.select('path.domain').attr('stroke', model.stroke);\n    var ticks = ga.selectAll('text').attr('fill', model.stroke);\n    if (model.hide) {\n        var range = scale.range(),\n            dim = Math.abs(range[0] - range[range.length-1]);\n        if (dim < model.hide) ga.style('opacity', 0);\n        else ga.style('opacity', 1);\n    }\n    if (model.rotate) {\n        ticks.attr('transform', `rotate(${model.rotate})`)\n            .style('text-anchor', model.ancor);\n    }\n}\n","import {vizPrototype} from '../core/chart';\n\n\nvizPrototype.getSymbol = function (name) {\n    return this.$.symbol().type(this.getD3('symbol', name));\n};\n\n\nvizPrototype.getCurve = function (name) {\n    return this.getD3('curve', name);\n};\n\n\nvizPrototype.getStack = function () {\n    var model = this.getModel();\n    if (model.stack) {\n        var s = this.$.stack();\n        if (model.stackOrder) s.order(this.getD3('stack', model.stackOrder));\n        if (model.stackOffset) s.offset(this.getD3('stack', model.stackOffset));\n        return s;\n    }\n};\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex3 = /^#([0-9a-f]{3})$/,\n    reHex6 = /^#([0-9a-f]{6})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  toString: function() {\n    return this.rgb() + \"\";\n  }\n});\n\nexport default function color(format) {\n  var m;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format])\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (0 <= this.r && this.r <= 255)\n        && (0 <= this.g && this.g <= 255)\n        && (0 <= this.b && this.b <= 255)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  toString: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"rgb(\" : \"rgba(\")\n        + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar Kn = 18,\n    Xn = 0.950470, // D65 standard referent\n    Yn = 1,\n    Zn = 1.088830,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) {\n    var h = o.h * deg2rad;\n    return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n  }\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var b = rgb2xyz(o.r),\n      a = rgb2xyz(o.g),\n      l = rgb2xyz(o.b),\n      x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn),\n      y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.0721750 * l) / Yn),\n      z = xyz2lab((0.0193339 * b + 0.1191920 * a + 0.9503041 * l) / Zn);\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    y = Yn * lab2xyz(y);\n    x = Xn * lab2xyz(x);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      xyz2rgb( 3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB\n      xyz2rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z),\n      xyz2rgb( 0.0556434 * x - 0.2040259 * y + 1.0572252 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction xyz2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2xyz(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + Kn * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - Kn * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return labConvert(this).rgb();\n  }\n}));\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","import {map} from 'd3-collection';\nimport {range} from 'd3-array';\nimport {color} from 'd3-color';\nimport {isObject, isFunction, isArray} from 'd3-let';\n\nimport globalOptions from '../core/options';\nimport {vizPrototype} from '../core/chart';\n\nexport const colorScales = map();\n\n\nglobalOptions.color = {\n    scale: 'cool',\n    // Minumim number of colors in a sequantial color scale\n    // This helps in keeping a consistent palette when few colors are used\n    scaleMinPoints: 6,\n    // An offset in the color scale, useful for combined visuals\n    scaleOffset: 0,\n    stroke: '#333',\n    strokeOpacity: 1,\n    fillOpacity: 1,\n};\n\ncolorScales.set('viridis', (d3) =>  d3.scaleSequential(d3.interpolateViridis));\ncolorScales.set('inferno', (d3) =>  d3.scaleSequential(d3.interpolateInferno));\ncolorScales.set('magma', (d3) =>  d3.scaleSequential(d3.interpolateMagma));\ncolorScales.set('plasma', (d3) =>  d3.scaleSequential(d3.interpolatePlasma));\ncolorScales.set('warm', (d3) =>  d3.scaleSequential(d3.interpolateWarm));\ncolorScales.set('cool', (d3) =>  d3.scaleSequential(d3.interpolateCool));\ncolorScales.set('rainbow', (d3) =>  d3.scaleSequential(d3.interpolateRainbow));\ncolorScales.set('cubehelix', (d3) =>  d3.scaleSequential(d3.interpolateCubehelixDefault));\n\nvizPrototype.getColorScale = function (name) {\n    return colorScales.get(name)(this.$);\n};\n//\n//  Color scale method\n//  ==========================\nvizPrototype.colors = function (n, opacity) {\n    var model = this.getModel('color');\n    let reversed = false, scaleDef, scale;\n\n    if (isArray(model.scale)) scale = this.getScale('ordinal').range(model.scale);\n    else {\n        scaleDef = this.getColorScale(model.scale);\n        if (!scaleDef) throw new Error(`Unknown scale ${model.scale}`);\n        if (!isObject(scaleDef)) scaleDef = {scale: scaleDef};\n        if (scaleDef.minPoints === undefined) scaleDef.minPoints = model.scaleMinPoints;\n        scale = scaleDef.scale;\n        reversed = scaleDef.reversed;\n    }\n\n    if (isFunction(scale.interpolator)) {\n        var offset = model.scaleOffset,\n            npoints = n + offset,\n            points = Math.max(npoints, scaleDef.minPoints),\n            domain = reversed ? [points-1, 0] : [0, points-1];\n        scale.domain(domain);\n        let c;\n        return range(offset, Math.min(npoints, points)).map(v => {\n            c = color(scale(v));\n            c.opacity = opacity;\n            return c;\n        });\n    } else {\n        var colors = scale.range().slice();\n        if (reversed) colors.reverse();\n        let b, c, m;\n        for (let i=0; i<model.scaleOffset; ++i) {\n            colors.push(colors.shift());\n        }\n        return range(n).map(() => {\n            b = colors.shift();\n            c = color(b);\n            m = color(b);\n            c.opacity = opacity;\n            colors.push(''+m.brighter(0.2));\n            return c;\n        });\n    }\n};\n\n\nvizPrototype.fill = function (data) {\n    var model = this.getModel('color'),\n        opacity = this.modelProperty('fillOpacity', model),\n        colors = this.colors(data.length, opacity);\n\n    function fill (d, idx) {\n        return colors[idx];\n    }\n\n    fill.colors = colors;\n\n    return fill;\n};\n\nvizPrototype.stroke = function (data) {\n    var model = this.getModel('color'),\n        opacity = this.modelProperty('strokeOpacity', model),\n        colors = this.colors(data.length, opacity);\n\n    function stroke (d, idx) {\n        return colors[idx];\n    }\n\n    stroke.colors = colors;\n\n    return stroke;\n};\n\n//\n//  Linear Gradient method\n//  ==========================\n//\n//  Create a monocromatic linear gradient in the visualization box,\n//  either horizontal or vertical\nvizPrototype.linearGradient = function (col, box, orientation, gid) {\n    var paper = this.paper().sel,\n        defs = paper.select('defs');\n    if (!defs.node()) defs = paper.append('defs');\n    const\n        grad = defs.selectAll(`#${gid}`).data([0]),\n        colto = color(col);\n\n    colto.opacity = 0.1;\n\n    grad.enter()\n        .append('linearGradient')\n        .attr('id', gid)\n        .attr('x1', '0%')\n        .attr('y1', '0%')\n        .attr('x2', orientation === 'vertical' ? '0%' : '100%')\n        .attr('y2', orientation === 'vertical' ? '100%' : '0%');\n\n    var stops = defs.select(`#${gid}`)\n                    .selectAll('stop')\n                    .data([{offset: '0%', color: col}, {offset: '100%', color: colto}]);\n\n    stops.enter()\n            .append('stop')\n        .merge(stops)\n            .attr('offset', d => d.offset)\n            .attr('stop-color', d => d.color);\n\n    return `url(#${gid})`;\n};\n","import {map} from 'd3-collection';\nimport {pop} from 'd3-let';\n\nimport globalOptions from '../core/options';\nimport {vizPrototype} from '../core/chart';\nimport warn from '../utils/warn';\n\n\nglobalOptions.legend = {\n    location: \"top-right\",\n    orient: \"vertical\",\n    fontSize: '3%',\n    title: '',\n    titleWidth: \"20%\",\n    labelFormat: null,\n    titleMinWidth: 30,\n    titleMaxWidth: 60,\n    minFontSize: 10,\n    maxFontSize: 20,\n    offset: [10, 10],\n    shapeWidth: 15,\n    shapeHeight: 15,\n    hide: 300, // specify a pixel size below which tick labels are not displayed\n};\n\n\nvizPrototype.getLegend = function (name) {\n    return this.getD3('legend', name);\n};\n\n//\n//  Legend method\n//  ==========================\nvizPrototype.legend = function (cfg, box) {\n    var vizModel = this.getModel(),\n        model = this.getModel('legend'),\n        font = this.getModel('font'),\n        name = pop(cfg, 'type') || vizModel.legendType,\n        vizSize = Math.max(box.vizHeight, box.vizWidth),\n        fontSize = this.dim(model.fontSize, vizSize, model.minFontSize, model.maxFontSize),\n        legend = this.getLegend(name);\n\n    if (!model.location) return;\n\n    if (!legend) return warn(`Could not load legend ${name}`);\n    legend = legend().orient(model.orient);\n\n    if (model.title) {\n        legend.title(model.title);\n        if (model.titleWidth) {\n            var width = this.dim(model.titleWidth, vizSize, model.titleMinWidth, model.titleMaxWidth);\n            legend.titleWidth(width);\n        }\n    }\n\n    if (model.labelFormat) legend.labelFormat(model.labelFormat);\n    legend.shapeWidth(model.shapeWidth).shapeHeight(model.shapeHeight);\n\n    // apply cfg parameters\n    for (let key in cfg) legend[key](cfg[key]);\n\n    var gl = this.group('legend')\n            .style('font-size', `${fontSize}px`)\n            .html('')\n            .call(legend),\n        bb = gl.node().getBBox(),\n        offset = locations.get(model.location).call(this, bb, box, model),\n        transform = this.translate(offset.x, offset.y);\n    gl.selectAll('text').style('fill', model.stroke || font.stroke);\n    this.applyTransform(gl, transform);\n    //\n    //\n    // if the legend needs to be hidden below a certain size\n    if (model.hide) {\n        if (vizSize < model.hide) gl.style('opacity', 0);\n        else gl.style('opacity', 1);\n    }\n};\n\n\nexport const locations = map({\n    top,\n    bottom,\n    right,\n    left,\n    'top-left': topLeft,\n    'top-right': topRight,\n    'bottom-left': bottomLeft,\n    'bottom-right': bottomRight\n});\n\n\nfunction top (bb, box, options) {\n    var offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: box.margin.left + (box.innerWidth - bb.width)/2,\n        y: offsetY\n    };\n}\n\n\nfunction bottom (bb, box, options) {\n    var offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: box.margin.left + (box.innerWidth - bb.width)/2,\n        y: box.vizHeight - bb.height - offsetY\n    };\n}\n\n\nfunction right (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth);\n    return {\n        x: box.vizWidth - bb.width - offsetX,\n        y: box.margin.top + (box.innerHeight - bb.height)/2\n    };\n}\n\n\nfunction left (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth);\n    return {\n        x: box.margin.left - offsetX,\n        y: box.margin.top + (box.innerHeight - bb.height)/2\n    };\n}\n\n\nfunction topLeft (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth),\n        offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: box.margin.left + (box.innerWidth - bb.width)/2 + offsetX,\n        y: offsetY\n    };\n}\n\n\nfunction topRight (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth),\n        offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: box.vizWidth - bb.width - offsetX,\n        y: offsetY\n    };\n}\n\n\nfunction bottomLeft (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth),\n        offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: bb.width + offsetX,\n        y: box.vizHeight - bb.height - offsetY\n    };\n}\n\n\nfunction bottomRight (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth),\n        offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: box.vizWidth - bb.width - offsetX,\n        y: box.vizHeight - bb.height - offsetY\n    };\n}\n","export default function (x) {\n    return function constant() {\n        return x;\n    };\n}\n","import {isFunction} from 'd3-let';\n\nimport constant from './constant';\n\nexport default function (v) {\n    if (isFunction(v)) return v;\n    return constant(v);\n}\n","export default function (d) {\n    return d;\n}\n","//\n//\n//  Mouse events handling\n//  ==========================\n//\nimport {map} from 'd3-collection';\nimport {color} from 'd3-color';\n\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\nimport warn from '../utils/warn';\n\n\nexport const mouseStrategies = map({\n    darker: darkerStrategy(),\n    fill: fillStrategy()\n});\n\n\nvisuals.options.mouse = {\n    over: ['darker'],\n    darkerFactor: 0.5,\n    fillColor: '#addd8e'\n};\n\n\nvizPrototype.mouseOver = function () {\n    var self = this,\n        model = this.getModel('mouse');\n\n    return function (d, i) {\n        if (!this.__mouse_over__) this.__mouse_over__ = {};\n        var sel = self.select(this);\n        let strategy;\n        model.over.forEach(name => {\n            strategy = mouseStrategies.get(name);\n            if (!strategy) warn(`Unknown mouse strategy ${name}`);\n            else strategy(self, sel, d, i);\n        });\n    };\n};\n\nvizPrototype.mouseOut = function () {\n    var self = this,\n        model = this.getModel('mouse');\n\n    return function (d, i) {\n        if (!this.__mouse_over__) this.__mouse_over__ = {};\n        var sel = self.select(this);\n        let strategy;\n        model.over.forEach(name => {\n            strategy = mouseStrategies.get(name);\n            if (!strategy) warn(`Unknown mouse strategy ${name}`);\n            else strategy.out(self, sel, d, i);\n        });\n    };\n};\n\n\nfunction darkerStrategy () {\n\n    function darker (viz, sel) {\n        var model = viz.getModel('mouse'),\n            fill = color(sel.style('fill')),\n            filldarker = fill.darker(model.darkerFactor),\n            node = sel.node();\n        node.__mouse_over__.fill = fill;\n        sel.style('fill', filldarker);\n    }\n\n    darker.out = function (viz, sel) {\n        var node = sel.node(),\n            fill = node.__mouse_over__.fill;\n        if (fill) sel.style('fill', fill);\n    };\n\n    return darker;\n}\n\n\nfunction fillStrategy () {\n\n    function fill (viz, sel) {\n        var model = viz.getModel('mouse'),\n            fill = color(sel.style('fill')),\n            node = sel.node();\n        node.__mouse_over__.fill = fill;\n        sel.transition().style('fill', model.fillColor);\n    }\n\n    fill.out = function (viz, sel) {\n        var node = sel.node(),\n            fill = node.__mouse_over__.fill;\n        if (fill) sel.transition().style('fill', fill);\n    };\n\n    return fill;\n}\n","import {map} from 'd3-collection';\nimport {inBrowser} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\nimport functor from '../utils/functor';\nimport noop from '../utils/identity';\nimport {mouseStrategies} from './mouse';\n\n\nvisuals.options.tooltip = {\n    location: \"top\",\n    offset: [10, 10],\n    html: \"\"\n};\n\n\nif (inBrowser) vizPrototype.tooltip = tooltip();\nelse vizPrototype.tooltip = noop;\n\n\nmouseStrategies.set('tooltip', function () {\n\n    function tooltip (viz, sel, d, i) {\n        var html = viz.tooltipHtml(sel, d, i);\n        if (html) {\n            var model = viz.getModel('tooltip');\n            viz.tooltip.location(model.location).offset(model.offset).html(html).show(sel.node());\n        }\n    }\n\n    tooltip.out = function (viz) {\n        viz.tooltip.hide();\n    };\n\n    return tooltip;\n}());\n\n\nvizPrototype.tooltipHtml = function (sel, d, i) {\n    var model = this.getModel('tooltip');\n    if (model.html)\n        return this.dataStore.eval(model.html, {\n            d: d,\n            index: i,\n            model: this.getModel()\n        });\n};\n\n\nfunction tooltip () {\n\n    var location = functor('top'),\n        offset = functor([0, 0]),\n        html = functor(' '),\n        node = null,\n        point = null;\n\n    const locationCallbacks = map({\n        top,\n        bottom,\n        right,\n        left,\n        'top-left': topLeft,\n        'top-right': topRight,\n        'bottom-left': bottomLeft,\n        'bottom-right': bottomRight\n    });\n\n    const locations = locationCallbacks.keys();\n\n    function selectNode() {\n        if (node === null) {\n            node = select(document.body)\n                        .append('div')\n                        .classed('d3-tooltip', true)\n                        .style('position', 'absolute')\n                        .style('top', 0)\n                        .style('opacity', 0)\n                        .style('pointer-events', 'none')\n                        .style('box-sizing', 'border-box')\n                        .node();\n            point = select(document.body)\n                        .append('svg')\n                        .style('opacity', 0)\n                        .style('pointer-events', 'none')\n                        .node().createSVGPoint();\n        }\n        return select(node);\n    }\n\n    function tooltip () {\n    }\n\n    tooltip.show = function (target) {\n        var args = Array.prototype.slice.call(arguments),\n            snode = selectNode(),\n            content = html.apply(this, args) || '',\n            poffset = offset.apply(this, args),\n            dir = location.apply(this, args),\n            scrollTop  = document.documentElement.scrollTop || document.body.scrollTop,\n            scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft,\n            coords;\n\n        snode.html(content).style('opacity', 1).style('pointer-events', 'all');\n\n        let i = locations.length;\n        while (i--) snode.classed(locations[i], false);\n        coords = locationCallbacks.get(dir).call(this, target, poffset);\n        snode.classed(dir, true)\n            .style('top', coords.top + scrollTop + 'px')\n            .style('left', coords.left + scrollLeft + 'px');\n\n        return tooltip;\n    };\n\n    tooltip.hide = function () {\n        selectNode().style('opacity', 0).style('pointer-events', 'none');\n        return tooltip;\n    };\n\n    // Returns tip or location\n    tooltip.location = function (v) {\n        if (!arguments.length) return location;\n        location = v === null ? v : functor(v);\n        return tooltip;\n    };\n\n    tooltip.html = function(v) {\n        if (!arguments.length) return html;\n        html = v === null ? v : functor(v);\n        return tooltip;\n    };\n\n    tooltip.offset = function(v) {\n        if (!arguments.length) return offset;\n        offset = v == null ? v : functor(v);\n        return tooltip;\n    };\n\n    return tooltip;\n\n\n\n    function top (target, offset) {\n        var bbox = getScreenBBox(target);\n        return {\n            left: bbox.n.x - node.offsetWidth / 2,\n            top:  bbox.n.y - node.offsetHeight - offset[1]\n        };\n    }\n\n\n    function bottom (bb, box, options) {\n        return {\n            top: box.total.left + (box.innerWidth - bb.width)/2,\n            left: box.height - bb.height - options.offsetY\n        };\n    }\n\n\n    function right (target, offset) {\n        var bbox = getScreenBBox(target);\n        return {\n            left: bbox.e.x + offset[0],\n            top:  bbox.e.y - node.offsetHeight / 2,\n        };\n    }\n\n\n    function left (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: options.offsetY\n        };\n    }\n\n\n    function topLeft (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: options.offsetY\n        };\n    }\n\n\n    function topRight (bb, box, options) {\n        return {\n            x: box.width - bb.width - options.offsetX,\n            y: options.offsetY\n        };\n    }\n\n\n    function bottomLeft (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: box.height - bb.height - options.offsetY\n        };\n    }\n\n\n    function bottomRight (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: box.height - bb.height - options.offsetY\n        };\n    }\n\n\n    // Private - gets the screen coordinates of a shape\n    //\n    // Given a shape on the screen, will return an SVGPoint for the locations\n    // n(north), s(south), e(east), w(west), ne(northeast), se(southeast),\n    // nw(northwest), sw(southwest).\n    //\n    //    +-+-+\n    //    |   |\n    //    +   +\n    //    |   |\n    //    +-+-+\n    //\n    // Returns an Object {n, s, e, w, nw, sw, ne, se}\n    function getScreenBBox (targetel) {\n\n        while (targetel.getScreenCTM == null && targetel.parentNode == null) {\n            targetel = targetel.parentNode;\n        }\n\n        var bbox = {},\n            matrix = targetel.getScreenCTM(),\n            tbbox = targetel.getBBox(),\n            width = tbbox.width,\n            height = tbbox.height,\n            x = tbbox.x,\n            y = tbbox.y;\n\n        point.x = x;\n        point.y = y;\n        bbox.nw = point.matrixTransform(matrix);\n        point.x += width;\n        bbox.ne = point.matrixTransform(matrix);\n        point.y += height;\n        bbox.se = point.matrixTransform(matrix);\n        point.x -= width;\n        bbox.sw = point.matrixTransform(matrix);\n        point.y -= height / 2;\n        bbox.w = point.matrixTransform(matrix);\n        point.x += width;\n        bbox.e = point.matrixTransform(matrix);\n        point.x -= width / 2;\n        point.y -= height / 2;\n        bbox.n = point.matrixTransform(matrix);\n        point.y += height;\n        bbox.s = point.matrixTransform(matrix);\n\n        return bbox;\n    }\n}\n","//\n//\n//  Expand viusals layers and visuals\n//  =======================================\n//\nimport {visuals} from '../core/base';\nimport {locations} from './legend';\nimport {KEYS} from './margin';\n\nvisuals.options.expand = {\n    location: 'top-right',\n    expandText: 'expand',\n    collapseText: 'collapse',\n    height: 15,\n    width: 15,\n    radius: 3,\n    offset: [0, 0],\n    stroke: '#adadad',\n    fill: '#fff',\n    fillOver: '#e6e6e6',\n    textColor: '#111'\n};\n\n\n\nvisuals.events.on('after-draw.expand', viz => {\n    var visual = viz.visualParent;\n    if (!viz.isViz || visual.layers.length <= 1) return;\n\n    var model = viz.getModel('expand');\n    // If not expanded already check if this can be expanded\n    if (!viz.__expanded)\n        if (!model.location || !hasMargin(viz.getModel('padding'))) return;\n\n    var font = viz.getModel('font'),\n        box = viz.boundingBox(),\n        button = viz.group('expand'),\n        node = button.node(),\n        size = Math.floor(0.8*Math.min(model.width, model.height)),\n        buttonText = viz.__expanded ? model.collapseText : model.expandText,\n        firstPass = false;\n\n    if (!button.select('rect').size()) {\n        firstPass = true;\n        button.attr('cursor', 'pointer')\n                .on(\"mouseover\", mouseOver)\n                .on(\"mouseout\", mouseOut);\n\n        button.append('rect')\n            .classed('button', true)\n            .attr('x', 0)\n            .attr('y', 0)\n            .attr('rx', model.radius)\n            .attr('ry', model.radius)\n            .attr('width', model.width)\n            .attr('height', model.height)\n            .attr('stroke', model.stroke)\n            .attr('fill', model.fill)\n            .attr('cursor', 'pointer');\n\n        button\n            .append('text')\n            .attr('x', model.width/2)\n            .attr('y', model.height/2)\n            .attr('fill', model.textColor)\n            .attr('font-family', model.fontFamily || font.family)\n            .attr('text-anchor', \"middle\")\n            .attr('alignment-baseline', \"middle\")\n            .attr('font-size', size);\n\n        button.append('rect')\n            .classed('placeholder', true)\n            .attr('x', 0)\n            .attr('y', 0)\n            .attr('rx', model.radius)\n            .attr('ry', model.radius)\n            .attr('width', model.width)\n            .attr('height', model.height)\n            .attr('stroke', 'none')\n            .attr('fill', 'transparent')\n            .on(\"click\", click);\n    }\n\n    button.select('text').text(() => buttonText);\n    var bb = locations.get(model.location).call(viz, node.getBBox(), box, model);\n    if (!firstPass) button = button.transition(viz.transition('expand'));\n    button.attr('transform', viz.translate(bb.x, bb.y));\n\n    function mouseOver() {\n        viz.select(this).select('rect.button')\n            .attr('fill', model.fillOver);\n    }\n\n    function mouseOut() {\n        viz.select(this).select('rect.button')\n            .attr('fill', model.fill);\n    }\n\n    function click() {\n        var pd = viz.getModel('padding');\n        mouseOut.call(this);\n        if (!viz.__expanded) {\n            viz.__expanded = {\n                padding: KEYS.reduce((o, key) => {\n                    if(pd[key]) {\n                        o[key] = pd[key];\n                        pd[key] = 0;\n                    }\n                    return o;\n                }, {})\n            };\n            visual.deactivate();\n            viz.activate();\n        } else {\n            var padding = viz.__expanded.padding;\n            delete viz.__expanded;\n            visual.activate();\n            KEYS.forEach(key => {\n                if (padding[key]) pd[key] = padding[key];\n            });\n        }\n        visual.redraw(false);\n    }\n\n});\n\n\nfunction hasMargin(mg) {\n    return mg.left || mg.right || mg.top || mg.bottom;\n}\n","import {transition} from 'd3-transition';\n\nimport {vizPrototype} from '../core/chart';\nimport {visuals} from '../core/base';\n\n\nvisuals.options.transition = {\n    duration: 250,\n    delay: 0,\n    ease: null\n};\n\n\nvizPrototype.transition = function (name) {\n    var uname = this.idname(name),\n        model = this.getModel('transition');\n    return transition(uname).duration(model.duration);\n};\n\n\nvizPrototype.applyTransform = function (sel, transform) {\n    //var cname = sel.attr('class'),\n    ///    model = this.getModel('transition'),\n    //    tr = cname ? transition(cname).duration(model.duration) : null,\n    var t = sel.attr('transform');\n    if (!t) sel.attr('transform', transform);\n    sel.transition().attr('transform', transform);\n};\n","import {vizPrototype} from '../core/chart';\n\n\nvizPrototype.brushX = function () {\n    return this.$.brushX();\n};\n\nvizPrototype.brushY = function () {\n    return this.$.brushY();\n};\n\nvizPrototype.brush = function () {\n    return this.$.brush();\n};\n","import createVisual, {visuals} from './base';\nimport warn from '../utils/warn';\n\n\nexport default createVisual('container', {\n\n    initialise () {\n        this.live = [];\n        if (this.visualParent) this.visualParent.live.push(this);\n    },\n\n    draw (fetchData) {\n        if (this.drawing) {\n            warn(`${this.toString()} already drawing`);\n            return this.drawing;\n        }\n        var self = this;\n        visuals.events.call('before-draw', undefined, self);\n        return Promise.all(this.live.map(visual => visual.redraw(fetchData))).then(() => {\n            delete self.drawing;\n            visuals.events.call('after-draw', undefined, self);\n        });\n    },\n\n    destroy () {\n        this.pop(this.visualParent);\n    }\n});\n","import {isString, isObject, assign} from 'd3-let';\n\nimport VisualContainer from '../core/container';\nimport warn from '../utils/warn';\n\n//\n//  vizComponent base prototype\n//  =============================\n//\n//  Some common properties and methods for all visualize components\n//\nexport const vizComponent = {\n    props: [\n        'schema',\t    // Schema is a collection of fields to display in the table\n        'datasource',\t// Data source\n        'plugins',      // list of string/objects\n        'options'\n\t],\n\n    render (props, attrs, el) {\n        var self = this,\n            inner = this.select(el).html();\n        //\n        // build\n        return this.getSchema(props.schema, schema => {\n            if (!isObject(schema)) schema = {};\n            schema = assign({}, props.options, schema);\n            return self.build(schema, inner, attrs);\n        });\n    },\n\n    // get the schema from the input schema property\n    getSchema (input, build) {\n        var parent = this.model.visual;\n\n        // allow to specify the schema as an entry of\n        // visuals object in the dashboard schema\n        if (parent && parent !== this.model && isString(input)) {\n            var schema = parent.getVisualSchema(input);\n            if (schema) input = schema;\n        }\n\n        if (isString(input)) {\n            return this.json(input).then(build).catch(err => {\n                warn(`Could not reach ${input}: ${err}`, err);\n            });\n        }\n        else return build(input);\n    },\n    //\n    // build the visual component has the schema available\n    build () {}\n};\n//\n//  Dashboard Component\n//  ========================\n//\n//  A collection of visual components arranged according\n//  to a custom layout.\n//\n//  * Dashboard visuals are independent of each other but\n//    interact via the data object\n//  * The Dashboard layout is given by the inner HTML elements\n//  * The configuration is obtained via the schema property which\n//    can be either:\n//      1) an object\n//      2) a url\nexport default assign({}, vizComponent, {\n\n    build (schema, inner, attrs) {\n        var model = this.model,\n            sel = this.createElement('div'),\n            root = model.root;\n        if (attrs.class) sel.attr('class', attrs.class);\n        if (!schema.visuals) schema.visuals = {};\n        model.visual = new VisualContainer(sel.node(), schema, model.visual, model.visual ? null : model.$new());\n        if (!root.visualDashboard) root.visualDashboard = model.visual;\n        return sel.html(inner);\n    }\n});\n","import {pop, assign} from 'd3-let';\n\nimport {vizComponent} from './dashboard';\nimport Visual from '../core/visual';\n\n\n//\n//  Visual component\n//  ======================\n//\n//  An element containing a visualization\nexport default assign({}, vizComponent, {\n\n    build (schema, inner, attrs) {\n        var sel = this.createElement('div'),\n            type = schema.type || 'visual',\n            model = this.model,\n            visualDrawOnMount = pop(schema, 'visualDrawOnMount'),\n            options = {},\n            layers;\n\n        if (attrs.class) sel.attr('class', attrs.class);\n\n        if (type === 'visual') {\n            layers = pop(schema, 'layers');\n            options = schema;\n        }\n        else\n            options.visual = pop(schema, 'visual') || {};\n\n        if (visualDrawOnMount !== undefined) model.visualDrawOnMount = visualDrawOnMount;\n        model.visual = new Visual(sel.node(), options, model.visual, model.visual ? null : model.$new());\n        if (type !== 'visual') model.visual.addVisual(schema);\n        else if (layers) {\n            layers.forEach(layer => model.visual.addVisual(layer));\n        }\n        return sel;\n    },\n\n    // once the element is mounted in the dom, draw the visual\n    mounted () {\n        if (this.model.visualDrawOnMount === false) return;\n        this.model.visual.redraw();\n    }\n});\n","//\n//  d3-view components\n//  ======================\n//\n//  d3-view plugin for visualization components\n//\n//  visual plugins first\nimport '../plugins/scale';\nimport '../plugins/menu';\nimport '../plugins/data';\nimport '../plugins/format';\nimport '../plugins/font';\nimport '../plugins/responsive';\nimport '../plugins/title';\nimport '../plugins/margin';\nimport '../plugins/axis';\nimport '../plugins/shapes';\nimport '../plugins/color';\nimport '../plugins/legend';\nimport '../plugins/tooltip';\nimport '../plugins/mouse';\nimport '../plugins/expand';\nimport '../plugins/transition';\nimport '../plugins/brush';\nimport dashboard from './dashboard';\nimport visual from './visual';\n\n\n// Visual components plugin\nexport default {\n\n    install (vm) {\n        vm.addComponent('dashboard', dashboard);\n        vm.addComponent('visual', visual);\n    }\n\n};\n","export default function (a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","import constant from \"../utils/constant\";\nimport descending from \"../utils/descending\";\nimport identity from \"../utils/identity\";\n\n//\n//  Pyramid Shape generator\n//  ============================\nexport default function () {\n    var value = identity,\n        pad = constant(0),\n        height = 1,\n        base = 1;\n\n    function pyramid (data) {\n        let i, j, k, points, fraction,\n            hi, x, y, v0, ph, pj;\n        var n = data.length,\n            r = 0.5*base/height,\n            polygons = new Array(n),\n            index = new Array(n);\n\n        for (i=0; i<n; ++i) {\n            polygons[index[i] = i] = +value(data[i], i, data);\n        }\n\n        // Sort the polygons\n        index.sort((i, j) => {return descending(polygons[i], polygons[j]);});\n\n        // Compute the polygons! They are stored in the original data's order.\n        v0 = polygons[index[0]];\n        hi = null;\n\n        for (i=n-1; i>=0; --i) {\n            points = [];\n            if (hi === null)\n                points.push([0, 0]);\n            else {\n                y = hi + ph;\n                x = y*r;\n                points.push([x, y]);\n                points.push([-x, y]);\n            }\n            j = index[i];\n            k = n - i - 1;\n            fraction = polygons[j]/v0;\n            pj = Math.sqrt(fraction);\n            hi = height*pj;\n            ph = i ? pad(pj, k) : 0;\n            y = hi - ph;\n            x = y*r;\n            points.push([-x, y]);\n            points.push([x, y]);\n            polygons[j] = {\n                index: k,\n                value: polygons[j],\n                fraction: fraction,\n                points: points,\n                data: data[j]\n            };\n        }\n        return polygons;\n    }\n\n    pyramid.value = function(_) {\n        return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pyramid) : value;\n    };\n\n    pyramid.base = function (_) {\n        return arguments.length ? (base = _, pyramid) : base;\n    };\n\n    pyramid.height = function (_) {\n        return arguments.length ? (height = _, pyramid) : height;\n    };\n\n    pyramid.pad = function(_) {\n        return arguments.length ? (pad = typeof _ === \"function\" ? _ : constant(+_), pyramid) : pad;\n    };\n\n    return pyramid;\n}\n","export default function (range, splits) {\n    var x0 = range[0],\n        x1 = range[1],\n        dx = (x1 - x0)/splits,\n        n = Math.floor(Math.log10(dx)),\n        v = Math.pow(10, n);\n    if (dx/v > 5) v *= 10;\n    v *= 0.1;\n\n    var ndx = v*Math.ceil(dx/v),\n        nx0 = v*Math.floor(x0/v);\n    return [nx0, nx0 + splits*ndx];\n}\n","import {color} from 'd3-color';\n\n\nexport default function (c, white, black) {\n    c = color(c);\n    return (c.r*0.299 + c.g*0.587 + c.b*0.114) > 186 ? (black || '#000') : (white || '#fff');\n}\n","import {select} from 'd3-selection';\n\nimport functor from './functor';\n\n\n//Text wrapping code adapted from Mike Bostock\nexport default function (text, width, callback) {\n    width = functor(width);\n\n    text.each(function(d, i) {\n        var text = select(this),\n            dy = parseFloat(text.attr(\"dy\")) || 0,\n            wd = width(d, i),\n            lineHeight = 1.2,\n            lines = text.text().split('\\n');\n\n        let word, words, done,\n            tspan = text.text(null)\n                        .append(\"tspan\")\n                        .attr(\"x\", 0)\n                        .attr(\"dy\", dy + \"em\");\n\n        lines.forEach((t, i) => {\n            done = [];\n            words = t.split(/\\s+/).reverse();\n            if (i)\n                tspan = text.append(\"tspan\")\n                        .attr(\"x\", 0)\n                        .attr(\"dy\", lineHeight + dy + \"em\");\n\n            while (word = words.pop()) {\n                done.push(word);\n                tspan.text(done.join(' '));\n                if (tspan.node().getComputedTextLength() > wd && done.length > 1) {\n                    done.pop();\n                    tspan.text(done.join(' '));\n                    done = [word];\n                    tspan = text.append(\"tspan\")\n                                .attr(\"x\", 0)\n                                .attr(\"dy\", lineHeight + dy + \"em\")\n                                .text(word);\n                }\n            }\n        });\n\n        if (callback)\n            text.selectAll('tspan')\n                .each(callback);\n    });\n}\n","import {assign} from 'd3-let';\n\nimport {visuals} from '../core/base';\n\nconst curveTypes = [\n    \"basis\", \"basisClosed\", \"basisOpen\", \"bundle\",\n    \"cardinal\", \"cardinalClosed\", \"cardinalOpen\",\n    \"catmullRom\", \"catmullRomClosed\", \"catmullRomOpen\",\n    \"linear\", \"linearClosed\", \"monotoneX\", \"monotoneY\",\n    \"natural\", \"step\", \"stepAfter\", \"stepBefore\"\n];\n\nconst scales = [\"linear\", \"log\", \"time\"];\n\nassign(visuals.schema.definitions, {\n    curve: {\n        type: \"string\",\n        description: \"curve type for line and area charts\",\n        default: \"natural\",\n        enum: curveTypes\n    },\n    stack: {\n        type: \"object\",\n        properties: {\n            order: {\n                type: \"string\",\n                enum: ['ascending', 'descending', 'insideOut', 'none', 'reverse'],\n                default: 'none'\n            },\n            offset: {\n                type: \"string\",\n                enum: ['diverging', 'expand', 'none', 'silhouette', 'wiggle'],\n                default: 'none'\n            }\n        }\n    }\n});\n\nexport default {\n    lineWidth: {\n        type: \"number\",\n        default: 1\n    },\n    curve: {\n        \"$ref\": \"#/definitions/curve\"\n    },\n    cornerRadius: {\n        type: \"number\",\n        default: 0,\n        minimum: 0,\n        description: \"corner radius in pixels\"\n    },\n    x: {\n        type: \"string\",\n        description: \"data accessor for the x coordinate\",\n        default: \"x\"\n    },\n    y: {\n        type: \"string\",\n        description: \"data accessor for the y coordinate\",\n        default: \"y\"\n    },\n    scaleX: {\n        type: \"string\",\n        description: \"scale for the x coordinate\",\n        enum: scales,\n        default: \"linear\"\n    },\n    scaleY: {\n        type: \"string\",\n        description: \"scale for the y coordinate\",\n        enum: scales,\n        default: \"linear\"\n    },\n    axisX: {\n        type: \"boolean\",\n        description: \"draw x axis\",\n        default: false\n    },\n    axisY: {\n        type: \"boolean\",\n        description: \"draw y axis\",\n        default: false\n    },\n    groupby: {\n        type: \"string\",\n        description: \"Group data by a given dimension\"\n    },\n    stack: {\n        \"$ref\": \"#/definitions/stack\"\n    },\n    gradient: {\n        type: \"boolean\",\n        description: \"Gradient to zero opacity\",\n        default: false\n    },\n    lineDarken: {\n        type: \"number\",\n        description: \"Darken line color\",\n        minimum: 0,\n        maximum: 1,\n        default: 0.2\n    }\n};\n","import {assign} from 'd3-let';\nimport {max} from 'd3-array';\n\nimport createChart from '../core/chart';\nimport colorContrast from '../utils/contrast';\nimport textWrap from '../utils/text-wrapping';\nimport defs from './defs';\n\n\nconst baselines = {\n    center: \"middle\",\n    top: \"hanging\",\n    bottom: \"baseline\",\n    outside: \"baseline\"\n};\nconst heightShifts = {\n    center (d, h) {\n        return h/2;\n    },\n    top (d, h, offset) {\n        return offset;\n    },\n    bottom (d, h, offset) {\n        return h - offset;\n    },\n    outside (d, h, offset) {\n        return -offset;\n    }\n};\n\n//\n//  Bar Chart\n//  =============\n//\n//  The barchart is one of the most flexible visuals.\n//  It can be used to display label data as well as\n//  timeserie data. It can display absulte values as\n//  proportional data via vertical staking and normalization\nexport default createChart('barchart', {\n    requires: ['d3-scale', 'd3-axis', 'd3-svg-legend'],\n\n    schema: {\n        x: defs.x,\n        y: defs.y,\n        orientation: {\n            type: \"string\",\n            enum: ['vertical', 'orizontal'],\n            default: 'vertical'\n        },\n        groupby: defs.groupby,\n        stack: defs.stack,\n        waffle: {\n            \"type\": \"boolean\",\n            description: \"ability to draw a waffle chart\"\n        },\n        normalize: {\n            \"type\": \"boolean\"\n        },\n        lineWidth: defs.lineWidth,\n        cornerRadius: defs.cornerRadius,\n        axisX: defs.axisX,\n        axisY: defs.axisY,\n        scaleY: defs.scaleY,\n        //\n        sortby: {\n            type: \"string\",\n            enum: ['x', 'y']\n        },\n        label: {\n            type: \"string\",\n            description: \"expression for label text\"\n        },\n        scaleX: {\n            type: 'object',\n            default: {\n                type: 'band',\n                padding: 0.2\n            },\n            properties: {\n                type: {\n                    type: 'string'\n                },\n                padding: {\n                    type: 'number'\n                }\n            }\n        }\n    },\n\n    options: {\n        //\n        // allow to place labels in bars\n        labelLocation: \"center\",\n        labelOffset: 10,\n        labelWidth: 0.7,\n        //\n        // legend & tooltip\n        valueformat: '.1f',\n        legendType: 'color',\n        legendLabel: 'label'\n    },\n\n    doDraw () {\n        var model = this.getModel(),\n            frame = this.frame,\n            data = frame.data,\n            box = this.boundingBox(),\n            group = this.group(),\n            chart = this.group('chart'),\n            x = model.x,\n            y = model.y,\n            groupby = model.groupby,\n            barChart = model.orientation === 'vertical' ? new VerticalBarChart(this) : new HorizontalBarChart(this);\n\n        let groups, stacked = false;\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left, box.margin.top));\n\n        if (groupby) {\n            groups = frame.dimension(groupby).group().top(Infinity).map(g => g['key']).sort();\n            if (groups.length <= 1) groups = null;\n        }\n\n        if (groups) {\n            var gframe = frame.pivot(x, groupby, y);\n            if (model.sortby === 'y') gframe = gframe.sortby('total');\n            data = gframe.data;\n            barChart.sz.domain(groups).range(this.fill(groups).colors);\n            if (model.stack) {\n                if (model.normalize)\n                    data = this.normalize(gframe);\n                stacked = true;\n            }\n        } else {\n            barChart.sz.domain([y]).range(this.fill([y]).colors);\n            stacked = true;\n        }\n\n        // set domain for the labels\n        var domainX = data.map(d => d[x]);\n        barChart.sx.domain(domainX);\n        //\n        // Stacked bar chart\n        if (stacked || !groups)\n            barChart.stacked(chart, data, groups);\n        else\n            barChart.grouped(chart, data, groups);\n\n        // Axis\n        barChart.axis(domainX);\n        // Legend\n        barChart.legend(groups);\n    }\n});\n\n\nfunction VerticalBarChart (viz) {\n    this.vertical = true;\n    this.init(viz);\n    this.sx.rangeRound([0, this.box.innerWidth]);\n    this.sy.rangeRound([this.box.innerHeight, 0]);\n}\n\nfunction HorizontalBarChart (viz) {\n    this.init(viz);\n    this.sx.rangeRound([0, this.box.innerHeight]);\n    this.sy.rangeRound([0, this.box.innerWidth]);\n}\n\nconst barChartPrototype = {\n\n    init (viz) {\n        this.viz = viz;\n        this.model = viz.getModel();\n        this.box = viz.boundingBox();\n        this.sx = viz.getScale(this.model.scaleX),\n        this.sy = viz.getScale(this.model.scaleY),\n        this.sz = viz.getScale('ordinal');\n    },\n\n    legend (groups) {\n        if (groups) this.viz.legend({\n            type: 'color',\n            scale: this.sz\n        }, this.box);\n    },\n\n    stacked (chart, data, groups) {\n        var color = this.viz.getModel('color'),\n            sx = this.sx,\n            sy = this.sy,\n            sz = this.sz,\n            x = this.model.x,\n            y = this.model.y,\n            viz = this.viz,\n            radius = this.model.cornerRadius;\n        let bars = chart.selectAll('.group'),\n            width, height, xrect, yrect, yi, rects;\n\n        if (groups) {\n            this.sy.domain([0, max(data, d => d.total)]).nice();\n        } else {\n            this.sy.domain([0, max(data, d => d[y])]).nice();\n            groups = [this.model.y];\n        }\n\n        if (this.vertical) {\n            xrect = x0;\n            yrect = y0;\n            width = sx.bandwidth;\n            height = bardim;\n            yi = 1;\n        } else {\n            xrect = y0;\n            yrect = x0;\n            width = bardim;\n            height = sx.bandwidth;\n            yi = 0;\n        }\n        data = viz.getStack().keys(groups)(data);\n        bars = bars.data(data);\n        bars.exit().transition().style('opacity', 0).remove();\n\n        rects = bars.enter()\n                        .append('g')\n                        .classed('group', true)\n                        .attr('fill', d => sz(d.key))\n                    .merge(bars)\n                        .attr('fill', d => sz(d.key))\n                        .attr('stroke', viz.modelProperty('stroke', color))\n                        .attr('stroke-opacity', viz.modelProperty('strokeOpacity', color))\n                        .selectAll('rect')\n                        .data(stackedData);\n\n        rects.enter()\n            .append('rect')\n                .attr('x', xrect)\n                .attr('y', yrect)\n                .attr('height', height)\n                .attr('width', width)\n                .attr('rx', radius)\n                .attr('ry', radius)\n                .on(\"mouseover\", viz.mouseOver())\n                .on(\"mouseout\", viz.mouseOut())\n            .merge(rects)\n                .transition()\n                .attr('x', xrect)\n                .attr('y', yrect)\n                .attr('height', height)\n                .attr('width', width);\n\n        rects.exit().transition().style('opacity', 0).remove();\n\n        // add labels\n        if (this.model.label) {\n            var font = viz.getModel('font'),\n                label = this.model.label,\n                fontSize = `${viz.font(this.box)}px`,\n                labels = chart.selectAll('.labels').data(data),\n                baseline = this.vertical ? baselines[this.model.labelLocation] || \"baseline\" : \"middle\",\n                heightShift = heightShifts[this.model.labelLocation],\n                labelWidth = this.model.labelWidth,\n                labelOffset = this.model.labelOffset;\n\n            rects = labels.enter()\n                    .append('g')\n                    .classed('labels', true)\n                .merge(labels)\n                    .selectAll('text')\n                    .data(stackedData);\n\n            rects.enter()\n                .append('text')\n                .classed('label', true)\n                .attr(\"transform\", labelTranslate)\n                .style(\"fill\", fillLabel)\n                .style('font-size', fontSize)\n                .text(labelText)\n            .merge(rects)\n                .text(labelText)\n                .style('font-size', fontSize)\n                .call(textWrap, d => labelWidth*width(d), labelAlign)\n                .transition(viz.transition('text'))\n                .attr(\"transform\", labelTranslate)\n                .style(\"fill\", fillLabel);\n        }\n\n        function bardim (d) {\n            return sy(d[1-yi]) - sy(d[yi]);\n        }\n\n        function x0 (d) {\n            return sx(d.data[x]);\n        }\n\n        function y0 (d) {\n            return sy(d[yi]);\n        }\n\n        function stackedData (d) {\n            d.forEach(r => {\n                r.key = d.key;\n                r.value = r.data[d.key];\n            });\n            return d;\n        }\n\n        function labelTranslate (d, index) {\n            var x = xrect(d, index) + width(d, index)/2,\n                y = yrect(d, index) + heightShift(d, height(d, index), labelOffset);\n            return viz.translate(x, y);\n        }\n\n        function fillLabel (d) {\n            return colorContrast(sz(d.key), '#fff', font.stroke);\n        }\n\n        function labelText (d, index) {\n            return viz.dataStore.eval(label, {d: d, index: index});\n        }\n\n        function labelAlign () {\n            viz.select(this)\n                .attr(\"alignment-baseline\", baseline)\n                .attr(\"text-anchor\", \"middle\");\n        }\n    },\n\n    grouped (chart, data, groups) {\n        var color = this.viz.getModel('color'),\n            sx = this.sx,\n            sy = this.sy,\n            sz = this.sz,\n            x = this.model.x,\n            viz = this.viz,\n            radius = this.model.cornerRadius,\n            padding = sx.paddingInner(),\n            x1 = viz.getScale('band')\n                    .domain(groups)\n                    .paddingInner(0.5*padding),\n            bars = chart.selectAll('.group');\n        let width, height, xrect, rects;\n\n        // set the value domain\n        sy.domain([0, max(data, maxValue)]).nice();\n\n        if (this.vertical) {\n            x1.rangeRound([0, sx.bandwidth()]);\n            xrect = gx;\n            width = x1.bandwidth;\n            height = gh;\n        } else {\n            xrect = gx;\n            height = x1.bandwidth;\n            width = gh;\n        }\n\n        bars = bars.data(data);\n        bars.exit().remove();\n        //\n        // join for rectangles\n        rects = bars\n            .enter()\n                .append('g')\n                .classed('group', true)\n                .attr(\"transform\", d => viz.translate(xrect(d), 0))\n            .merge(bars)\n                .attr(\"transform\", d => viz.translate(xrect(d), 0))\n                .selectAll('rect')\n                .data(groupData);\n        //\n        rects.exit()\n            .transition()\n            .style('opacity', 0)\n            .remove();\n        //\n        rects\n            .enter()\n                .append('rect')\n                .attr('x', d => x1(d.key))\n                .attr('y', gy)\n                .attr('rx', radius)\n                .attr('ry', radius)\n                .attr('height', height)\n                .attr('width', width)\n                .attr('stroke-width', this.model.lineWidth)\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', 0)\n                .attr('fill', d => sz(d.key))\n                .on(\"mouseover\", viz.mouseOver())\n                .on(\"mouseout\", viz.mouseOut())\n            .merge(rects)\n                .transition(viz.transition('rect'))\n                .attr('x', d => x1(d.key))\n                .attr('y', gy)\n                .attr('height', height)\n                .attr('width', width)\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', color.strokeOpacity)\n                .attr('fill', d => sz(d.key));\n\n        rects.exit().remove();\n\n        function gx (d) {\n            return sx(d[x]);\n        }\n\n        function gy (d) {\n            return sy(d.value);\n        }\n\n        function gh (d) {\n            return sy(0) - sy(d.value);\n        }\n\n        function groupData (d) {\n            return groups.map(key => {\n                return {key: key, value: d[key]};\n            });\n        }\n\n        function maxValue (d) {\n            return groups.reduce((v, key) => {\n                return Math.max(v, d[key]);\n            }, 0);\n        }\n    }\n};\n\n\nVerticalBarChart.prototype = assign({}, barChartPrototype, {\n    axis (domainX) {\n        if (this.model.axisX)\n            this.viz.xAxis1(this.model.axisX === true ? \"bottom\" : this.model.axisX, this.sx, this.box, domainX[0]);\n        if (this.model.axisY)\n            this.viz.yAxis1(this.model.axisY === true ? \"left\" : this.model.axisY, this.sy, this.box);\n    }\n});\n\nHorizontalBarChart.prototype = assign({}, barChartPrototype, {\n    axis (domainX) {\n        if (this.model.axisX)\n            this.viz.xAxis1(this.model.axisX === true ? \"left\" : this.model.axisX, this.sx, this.box, domainX[0]);\n        if (this.model.axisY)\n            this.viz.yAxis1(this.model.axisY === true ? \"bottom\" : this.model.axisY, this.sy, this.box);\n    }\n});\n","import {extent} from 'd3-array';\n\n//\n//  Create a Grouper generator\n//  ===============================\n//\n//  This is a chart transform rather than a data transform\nexport default function () {\n    var groupby = null,\n        x = 'x',\n        y = 'y',\n        sort = false,\n        stack = null,\n        normalize = false;\n\n    function grouper (frame) {\n        let stacked = false,\n            data, labels, s;\n\n        if (groupby) {\n            labels = frame.dimension(groupby).group().top(Infinity).map(g => g['key']).sort();\n            if (labels.length <= 1) labels = null;\n        }\n\n        if (labels) {\n            frame = frame.pivot(x, groupby, y);\n            if (sort) frame = frame.sortby('total');\n            data = frame.data;\n            if (stack) {\n                if (normalize)\n                    data = normalizeData(data);\n                data = stack.keys(labels)(data);\n                stacked = true;\n            }\n        } else {\n            data = frame.data;\n            labels = [y];\n        }\n\n        if (!stacked)\n            data = labels.map((key, index) => {\n                s = data.map(d => {\n                    s = [0, d[key]];\n                    s.data = d;\n                    return s;\n                });\n                s.index = index;\n                s.key = key;\n                return s;\n            });\n\n        return new GroupedData(data, x, y, stacked);\n    }\n\n    grouper.groupby = function(_) {\n        if (arguments.length) {\n            groupby = _;\n            return grouper;\n        }\n        return groupby;\n    };\n\n    grouper.x = function(_) {\n        return arguments.length ? (x = _, grouper) : x;\n    };\n\n    grouper.y = function(_) {\n        return arguments.length ? (y = _, grouper) : y;\n    };\n\n    grouper.normalize = function(_) {\n        return arguments.length ? (normalize = _, grouper) : normalize;\n    };\n\n    grouper.stack = function(_) {\n        return arguments.length ? (stack = _, grouper) : stack;\n    };\n\n    return grouper;\n}\n\n\nfunction GroupedData (data, x, y, stacked) {\n    this.data = data;\n    this.stacked = stacked;\n    this.x = x;\n    this.y = y;\n}\n\nGroupedData.prototype = {\n    rangeX () {\n        return this.range(this.x);\n    },\n    rangeY () {\n        return this.range();\n    },\n    range (key) {\n        let range, vals;\n        if (key)\n            vals = this.data.reduce((a, d) => {\n                range = extent(d, acc);\n                a.push(range[0]);\n                a.push(range[1]);\n                return a;\n            }, []);\n        else\n        vals = this.data.reduce((a, d) => {\n            range = extent(d, acc0);\n            a.push(range[0]);\n            a.push(range[1]);\n            range = extent(d, acc1);\n            a.push(range[0]);\n            a.push(range[1]);\n            return a;\n        }, []);\n        return extent(vals);\n\n        function acc0 (d) {\n            return d[0];\n        }\n\n        function acc1 (d) {\n            return d[1];\n        }\n\n        function acc (d) {\n            return d.data[key];\n        }\n    }\n};\n\n\nfunction normalizeData (data) {\n    return data;\n}\n","import {isFunction} from 'd3-let';\n\nimport createChart from '../core/chart';\nimport grouper from '../transforms/groups';\nimport defs from './defs';\n//\n//  Line Chart\n//  =============\n//\n//  The barchart is one of the most flexible visuals.\n//  It can be used to display label data as well as\n//  timeserie data. It can display absulte values as\n//  proportional data via vertical staking and normalization\nexport default createChart('linechart', {\n    requires: ['d3-scale', 'd3-shape', 'd3-axis', 'd3-svg-legend'],\n\n    schema: {\n        lineWidth: defs.lineWidth,\n        curve: defs.curve,\n        x: defs.x,\n        y: defs.y,\n        scaleX: defs.scaleX,\n        scaleY: defs.scaleY,\n        groupby: defs.groupby,\n        axisX: defs.axisX,\n        axisY: defs.axisY\n    },\n\n    doDraw () {\n        var model = this.getModel(),\n            frame = this.frame,\n            x = model.x,\n            y = model.y,\n            box = this.boundingBox(),\n            info = grouper()\n                        .groupby(model.groupby)\n                        .x(x)\n                        .y(y)(frame),\n            domainX = info.rangeX(),\n            domainY = info.rangeY(),\n            sx = this.getScale(model.scaleX)\n                            .domain(domainX)\n                            .rangeRound([0, box.innerWidth]),\n            sy = this.getScale(model.scaleY)\n                            .domain(domainY)\n                            .rangeRound([box.innerHeight, 0]).nice(),\n            group = this.group(),\n            chart = this.group('chart'),\n            lines = chart.selectAll('.line').data(info.data),\n            colors = this.stroke(info.data).colors,\n            sxshift = 0,\n            //merge = paper.transition('update'),\n            line_ = this.$.line()\n                .x(xl)\n                .y(yl)\n                .curve(this.getCurve(model.curve));\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left, box.margin.top));\n\n        // TODO: generalize this hack\n        if (isFunction(sx.bandwidth)) {\n            sx.domain(info.data[0].map(d => d.data[x]));\n            sxshift = sx.bandwidth()/2;\n        }\n\n        lines\n            .enter()\n                .append('path')\n                .attr('class', 'line')\n                .attr('fill', 'none')\n                .attr('stroke', stroke)\n                .attr('stroke-width', model.lineWidth)\n                .attr('d', line_)\n            .merge(lines)\n                .transition()\n                .attr('stroke', stroke)\n                .attr('stroke-width', model.lineWidth)\n                .attr('d', line_);\n\n        lines\n            .exit()\n            .transition()\n            .style('opacity', 0)\n            .remove();\n\n        if (model.axisX)\n            this.xAxis1(model.axisX === true ? \"bottom\" : model.axisX, sx, box);\n        if (model.axisY)\n            this.yAxis1(model.axisY === true ? \"left\" : model.axisY, sy, box);\n\n        if (info.data.length > 1)\n            this.legend({\n                type: 'color',\n                scale: this.getScale('ordinal').range(colors).domain(info.data.map(d => d.key))\n            }, box);\n\n        function stroke (d, i) {\n            return colors[i];\n        }\n\n        function xl(d) {\n            return sx(d.data[x]) + sxshift;\n        }\n\n        function yl(d) {\n            return sy(d[1]);\n        }\n    }\n});\n","import {color} from 'd3-color';\n\nimport createChart from '../core/chart';\nimport grouper from '../transforms/groups';\nimport defs from './defs';\n\n//\n//  Area Chart\n//  =============\nexport default createChart('areachart', {\n    requires: ['d3-scale', 'd3-shape', 'd3-axis', 'd3-svg-legend'],\n\n    schema: {\n        lineWidth: defs.lineWidth,\n        curve: defs.curve,\n        x: defs.x,\n        y: defs.y,\n        scaleX: defs.scaleX,\n        scaleY: defs.scaleY,\n        groupby: defs.groupby,\n        axisX: defs.axisX,\n        axisY: defs.axisY,\n        stack: defs.stack,\n        gradient: defs.gradient,\n        lineDarken: defs.lineDarken\n    },\n\n    doDraw () {\n        var self = this,\n            frame = this.frame,\n            model = this.getModel(),\n            x = model.x,\n            y = model.y,\n            col = this.getModel('color'),\n            box = this.boundingBox(),\n            info = grouper()\n                        .groupby(model.groupby)\n                        .stack(this.getStack())\n                        .x(x)\n                        .y(y)(frame),\n            domainX = info.rangeX(),\n            domainY = info.rangeY(),\n            scaleX = this.getScale(model.scaleX)\n                            .domain(domainX)\n                            .rangeRound([0, box.innerWidth]),\n            scaleY = this.getScale(model.scaleY)\n                            .domain(domainY)\n                            .rangeRound([box.innerHeight, 0]).nice(),\n            group = this.group(),\n            chart = this.group('chart'),\n            areas = chart.selectAll('.areagroup').data(info.data),\n            colors = this.colors(info.data.length),\n            fill = model.gradient ? colors.map((c, i) => self.linearGradient(c, box, 'vertical', `fill${self.model.uid}-${i}`)) : colors,\n            curve = this.getCurve(model.curve);\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left, box.margin.top));\n\n        areas.exit()\n            .transition()\n            .style('opacity', 0)\n            .remove();\n\n        var areagroup = areas\n            .enter()\n                .append('g')\n                .classed('areagroup', true)\n            .merge(areas)\n                .selectAll('path')\n                .data(arealine);\n\n        areagroup\n            .enter()\n                .append('path')\n                .attr('class', d => d.type)\n                .attr('fill', d => d.fill)\n                .attr('stroke', d => d.stroke)\n                .attr('d', d => d.draw)\n            .merge(areagroup)\n                .transition(this.transition('area'))\n                .attr('d', d => d.draw)\n                .attr('fill', d => d.fill)\n                .attr('stroke', d => d.stroke)\n                .attr('fill-opacity', col.fillOpacity)\n                .attr('stroke-width', model.lineWidth)\n                .attr('stroke-opacity', col.strokeOpacity);\n\n        areagroup\n            .exit()\n            .transition()\n            .style('opacity', 0)\n            .remove();\n\n        if (model.axisX)\n            this.xAxis1(model.axisX === true ? \"bottom\" : model.axisX, scaleX, box, domainX[0]);\n        if (model.axisY)\n            this.yAxis1(model.axisY === true ? \"left\" : model.axisY, scaleY, box, domainY[0]);\n\n        if (info.data.length > 1)\n            this.legend({\n                type: 'color',\n                scale: this.getScale('ordinal').range(colors).domain(info.data.map(d => d.key))\n            }, box);\n\n        function xx(d) {\n            return scaleX(d.data[x]);\n        }\n\n        function y0(d) {\n            return scaleY(d[0]);\n        }\n\n        function y1(d) {\n            return scaleY(d[1]);\n        }\n\n        function arealine (d) {\n            var area_ = self.$.area()\n                            .curve(curve)\n                            .x(xx)\n                            .y1(y1)\n                            .y0(y0),\n                line_ = self.$.line()\n                            .curve(curve)\n                            .x(xx)\n                            .y(y1),\n                c = color(colors[d.index]);\n\n            return [\n                {\n                    type: 'area',\n                    data: d,\n                    draw: area_(d),\n                    stroke: 'none',\n                    fill: fill[d.index]\n                },\n                {\n                    type: 'line',\n                    data: d,\n                    draw: line_(d),\n                    fill: 'none',\n                    stroke: c.darker(model.lineDarken)\n                }\n            ];\n        }\n    },\n\n    ticks (size, spacing) {\n        return Math.max(Math.floor(size/spacing), 1);\n    }\n});\n","import {map} from 'd3-collection';\nimport {viewExpression} from 'd3-view';\nimport {format} from 'd3-format';\n\nimport createChart from '../core/chart';\nimport {sizeValue} from '../utils/size';\nimport textWrap from '../utils/text-wrapping';\nimport defs from './defs';\n\n\nconst pi = Math.PI;\nconst rad = pi/180;\n\n\nexport const proportional = {\n\n    proportionalData (frame, field) {\n        return frame.dimension(field).top(Infinity);\n    },\n\n    total (field) {\n        var total = 0;\n\n        function value (d) {\n            total += d[field];\n            return d[field];\n        }\n\n        value.total = () => total;\n        return value;\n    }\n};\n\n//\n//  Pie Chart\n//  =============\n//\nexport default createChart('piechart', proportional, {\n    requires: ['d3-scale', 'd3-shape', 'd3-svg-legend'],\n\n    schema: {\n        // The data values from this field will be encoded as angular spans.\n        // If omitted, all pie slices will have equal spans\n        field: {\n            type: 'string',\n            default: 'data'\n        },\n        label: {\n            type: 'string',\n            default: 'label'\n        },\n        startAngle: {\n            description: \"Overall start angle of the pie in degree\",\n            default: 0,\n            type: \"number\"\n        },\n        endAngle: {\n            description: \"Overall end angle of the pie in degree\",\n            default: 360,\n            type: \"number\"\n        },\n        sort: {\n            type: 'string',\n            description: 'sort data before visualizing',\n            enum: ['none', 'ascending', 'descending'],\n            default: 'none'\n        },\n        innerRadius: {\n            description: \"Inner radius for donuts\",\n            default: 0,\n            oneOf: [\n                {type: \"number\", minimum: 0},\n                {type: \"string\"}\n            ]\n        },\n        padAngle: {\n            description: \"Angular separation between each adjacent arcs in degree\",\n            default: 0,\n            type: \"number\",\n            minimum: 0\n        },\n        cornerRadius: defs.cornerRadius,\n        lineWidth: defs.lineWidth,\n        //\n        center: {\n            type: \"string\",\n            description: \"Expression which display information in the center of the pie chart. Should be used with innerRadius greater than 0\"\n        },\n        centerFont: {\n            description: \"Center text font size and family\",\n            '$ref': \"#/definitions/font\"\n        }\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            color = this.getModel('color'),\n            field = model.field,\n            box = this.boundingBox(),\n            outerRadius = Math.min(box.innerWidth, box.innerHeight)/2,\n            innerRadius = sizeValue(model.innerRadius, outerRadius),\n            total = this.total(field),\n            angles = this.$.pie()\n                .padAngle(rad*model.padAngle)\n                .startAngle(rad*model.startAngle)\n                .endAngle(rad*model.endAngle)\n                .value(total),\n            arcs = this.$.arc()\n                .innerRadius(innerRadius)\n                .outerRadius(outerRadius)\n                .cornerRadius(model.cornerRadius),\n            group = this.group(),\n            chart = this.group('chart'),\n            data = angles(this.proportionalData(frame, field)),\n            fill = this.fill(data),\n            slices = chart.selectAll('.slice').data(data);\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left+box.innerWidth/2, box.margin.top+box.innerHeight/2));\n\n        slices\n            .enter()\n                .append('path')\n                .attr('class', 'slice')\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', 0)\n                .attr('fill', fill)\n                .attr('stroke-width', model.lineWidth)\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(slices)\n                .transition()\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', color.strokeOpacity)\n                .attr('d', arcs)\n                .attr('fill', fill);\n\n        slices.exit().transition().remove();\n\n        if (model.center) {\n            var d = map(data.reduce((o, d) => {o[d.data.label] = d; return o;})),\n                text = this.dataStore.eval(model.center, {total: total.total(), d: d});\n            if (text) {\n                var font = this.getModel('font'),\n                    size = this.dim(model.centerFontSize, box.innerWidth),\n                    center = chart.selectAll('.info').data([text]);\n\n                center\n                    .enter()\n                        .append('text')\n                        .attr('class', 'info')\n                        .attr(\"text-anchor\", \"middle\")\n                        .attr(\"alignment-baseline\", \"middle\")\n                        .style(\"font-size\", `${size}px`)\n                        .style('fill-opacity', 0)\n                    .merge(center)\n                        .text(text)\n                        .style('fill-opacity', model.centerOpacity)\n                        .style('fill', font.stroke)\n                        .call(textWrap, 1.5*(innerRadius || outerRadius));\n\n            }\n        }\n        if (!model.legendType) return;\n        total = total.total();\n        var expr = viewExpression(model.legendLabel),\n            fmt = format(model.fractionFormat),\n            labels = data.map((d, idx) => {\n                return expr.eval({\n                    d: d,\n                    value: d.value,\n                    format: fmt,\n                    total: total,\n                    fraction: d.value/total,\n                    label: d.data[model.label] || idx\n                });\n            });\n        this.legend({\n            scale: this.getScale('ordinal').domain(labels).range(fill.colors)\n        }, box);\n    }\n});\n","import constant from \"../utils/constant\";\nimport descending from \"../utils/descending\";\nimport identity from \"../utils/identity\";\n\n\nexport default function () {\n    var value = identity,\n        pad = constant(0),\n        height = 1,\n        base = 1;\n\n    function funnel (data) {\n        let i, j, points, fr,\n            v0, bi, pim, pi=0, h=0;\n\n        var n = data.length,\n            polygons = new Array(n),\n            index = new Array(n),\n            hi = height/n;\n\n        // evaluate the value for each data point\n        for (i=0; i<n; ++i) {\n            polygons[index[i] = i] = +value(data[i], i, data);\n        }\n\n        // Sort the polygons\n        index.sort((i, j) => {return descending(polygons[i], polygons[j]);});\n\n        // Compute the polygons! They are stored in the original data's order.\n        v0 = polygons[index[0]];\n\n        for (i=0; i<n; ++i) {\n            j = index[i];\n            fr = polygons[j]/v0;\n            bi = base*fr;\n            pim = pi;\n            pi = height*(i === n-1 ? 0 : 0.5*pad(fr, i));\n            points = [\n                [bi/2, h+pim],\n                [-bi/2, h+pim],\n                [-bi/2, h+hi-pi],\n                [bi/2, h+hi-pi]\n            ];\n            h += hi;\n            polygons[j] = {\n                index: i,\n                value: polygons[j],\n                fraction: fr,\n                points: points,\n                data: data[j]\n            };\n        }\n        return polygons;\n    }\n\n    funnel.value = function(_) {\n        return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), funnel) : value;\n    };\n\n    funnel.base = function (_) {\n        return arguments.length ? (base = _, funnel) : base;\n    };\n\n    funnel.height = function (_) {\n        return arguments.length ? (height = _, funnel) : height;\n    };\n\n    funnel.pad = function(_) {\n        return arguments.length ? (pad = typeof _ === \"function\" ? _ : constant(+_), funnel) : pad;\n    };\n\n    return funnel;\n}\n","//\n//  Custom Symbol type\n//  =====================\n//\n//  Draw a polygon given an array of points\n//  This can be used as type in a d3-shape symbol\nexport default function (points) {\n\n    return {\n        draw (context) {\n            points.forEach((point, idx) => {\n                if (!idx) context.moveTo(point[0], point[1]);\n                else context.lineTo(point[0], point[1]);\n            });\n            context.closePath();\n        }\n    };\n}\n","import {viewExpression} from 'd3-view';\n\nimport createChart from '../core/chart';\nimport pyramid from '../transforms/pyramid';\nimport funnel from '../transforms/funnel';\nimport polygon from '../utils/polygon';\nimport {proportional} from './pie';\n\n\nexport default createChart('pyramidchart', proportional, {\n    requires: ['d3-scale', 'd3-shape', 'd3-svg-legend'],\n\n    options: {\n        field: 'data',\n        label: 'label',\n        pad: 0.005,\n        lineWidth: 1,\n        inverted: false,\n        funnel: false,\n        legendType: 'color',\n        invereted: false,\n        legendLabel: \"label + ' - ' + format('.1%', fraction)\"\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            field = model.field,\n            color = this.getModel('color'),\n            box = this.boundingBox(),\n            polygons = (model.funnel ? funnel () : pyramid())\n                .pad(model.pad)\n                .value(d => d[field]),\n            scaleX = this.getScale('linear').rangeRound([0, box.innerWidth]),\n            scaleY = this.getScale('linear').rangeRound(model.inverted ? [box.innerHeight, 0] : [0, box.innerHeight]),\n            data = frame.new(polygons(this.proportionalData(frame, field))).dimension('fraction').bottom(Infinity),\n            marks = this.$.symbol().type(d => polygon(d.points.map(xy => [scaleX(xy[0]), scaleY(xy[1])]))).size(1),\n            fill = this.fill(data),\n            group = this.group(),\n            chart = this.group('chart'),\n            segments = chart\n                .style(\"shape-rendering\", \"crispEdges\")\n                .selectAll('.segment').data(data);\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left+box.innerWidth/2, box.margin.top));\n\n        segments\n            .enter()\n                .append('path')\n                .attr('class', 'segment')\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', 0)\n                .attr('fill', fill)\n                .attr('stroke-width', model.lineWidth)\n                .attr('d', marks)\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(segments)\n                .transition()\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', color.strokeOpacity)\n                .attr('d', marks)\n                .attr('fill', fill);\n\n        segments.exit().remove();\n\n        if (!model.legendType) return;\n        var expr = viewExpression(model.legendLabel),\n            self = this,\n            labels = data.map((d, idx) => {\n                return expr.eval(self.getContext({\n                    d: d,\n                    value: d.value,\n                    fraction: d.fraction,\n                    label: d.data[model.label] || idx\n                }));\n            });\n        this.legend({\n            scale: this.getScale('ordinal').domain(labels).range(fill.colors)\n        }, box);\n    }\n\n});\n","export default function (o, prefix, name, objectOnly) {\n    if (name.substring(0, prefix.length) !== prefix)\n        name = `${prefix}${name[0].toUpperCase()}${name.substring(1)}`;\n    return objectOnly ? o[name] : o[name]();\n}\n","import {format} from 'd3-format';\n\nimport createChart from '../core/chart';\nimport camelFunction from '../utils/camelfunction';\nimport accessor from '../utils/accessor';\nimport colorContrast from '../utils/contrast';\n\n//\n//  Treemap\n//  =============\n//\nexport default createChart('treemap', {\n    requires: ['d3-scale', 'd3-hierarchy'],\n\n    options: {\n        label: 'label',\n        field: 'data',\n        padding: 2,\n        tile: 'resquarify',\n        format: ','\n    },\n\n    doDraw (frame, d3) {\n        var model = this.getModel(),\n            font = this.getModel('font'),\n            box = this.boundingBox(),\n            labelAccessor = accessor(model.label),\n            valueAccessor = accessor(model.field),\n            valueFormat = format(model.format),\n            root = d3.hierarchy(rootData(frame.data))\n                    .sum(valueAccessor)\n                    .sort((a, b) => b.value - a.value)\n                    .eachBefore(dataColor),\n            treemap = d3.treemap()\n                        .tile(camelFunction(d3, 'treemap', model.tile, true))\n                        .size([box.innerWidth, box.innerHeight])\n                        .round(true)\n                        .padding(model.padding),\n            colors = this.fill(root.children).colors,\n            group = this.group()\n                        .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                        .style(\"shape-rendering\", \"crispEdges\"),\n            leaves = treemap(root).leaves(),\n            cell = group.selectAll('g').data(leaves),\n            self = this;\n\n        this.paper().size(box);\n        cell.exit().remove();\n\n        cell = cell\n            .enter()\n                .append('g')\n                .attr(\"transform\", d => this.translate(d.x0, d.y0))\n            .merge(cell)\n                .attr(\"transform\", d => this.translate(d.x0, d.y0));\n\n        var rects = cell.selectAll('rect').data(singleData);\n\n        rects.enter()\n                .append('rect')\n                .attr(\"width\", d => d.x1 - d.x0)\n                .attr(\"height\", d => d.y1 - d.y0)\n                .attr(\"fill\", d => colors[d.data._counter])\n                .attr('stroke', 'none')\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(rects)\n                .transition()\n                .attr(\"width\", d => d.x1 - d.x0)\n                .attr(\"height\", d => d.y1 - d.y0)\n                .attr(\"fill\", d => colors[d.data._counter]);\n\n        rects = cell.selectAll('text').data(singleData);\n        rects.enter()\n            .append(\"text\")\n            .style('fill', d => colorContrast(colors[d.data._counter], '#fff', font.stroke))\n            .selectAll(\"tspan\")\n                .data(textData)\n                .enter()\n                    .append(\"tspan\")\n                    .style('font-size', d => d.size)\n                    .attr(\"x\", 4)\n                    .attr(\"y\", (d, i) => 1.5*d.size + i * 1.2 * d.size)\n                    .text(d => d.text);\n\n\n        function dataColor (d) {\n            if (!d.parent) d.data._counter = 0;\n            else {\n                d.data._counter = d.parent.data._counter;\n                d.parent.data._counter++;\n            }\n        }\n\n        function rootData (data) {\n            data = {children: hideChildren(data)};\n            data[model.label] = 'root';\n            return data;\n        }\n\n        function textData (d) {\n            var size = self.font({height: Math.min(d.x1 - d.x0, d.y1 - d.y0)}),\n                text = labelAccessor(d.data).split(/(?=[A-Z][^A-Z])/g);\n            text.push(valueFormat(d.value));\n            return text.map(t => {return {size:size, text:t};});\n        }\n\n        function singleData (d) {\n            return [d];\n        }\n\n        function hideChildren (data) {\n            let children;\n            return data.map(d => {\n                children = d.children;\n                if (children) {\n                    d._children = hideChildren(children);\n                    delete d.children;\n                }\n                return d;\n            });\n        }\n    }\n});\n","import createChart from '../core/chart';\nimport textWrap from '../utils/text-wrapping';\n\n\nexport default createChart('text', {\n\n    options: {\n        label: 'label',\n        data: 'data',\n        text: 'label + \" \" + data',\n        sizeReduction: 0.7\n    },\n\n    doDraw (frame) {\n        var self = this,\n            model = this.getModel(),\n            font = this.getModel('font'),\n            box = this.boundingBox(),\n            size = this.font(box),\n            group = this.group(),\n            chart = this.group('chart'),\n            words = chart.selectAll('text').data(frame.data),\n            width = box.innerWidth/frame.data.length,\n            widthWrap = 0.4*width,\n            store = this.dataStore,\n            stroke = this.modelProperty('stroke', font);\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left, box.margin.top + box.innerHeight/2));\n\n        words\n            .enter()\n                .append('text')\n                .attr(\"transform\", shift)\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"alignment-baseline\", \"middle\")\n                .style('fill', stroke)\n            .merge(words)\n                .attr(\"transform\", shift)\n                .text(d => store.eval(model.text, d))\n                .style('fill', stroke)\n                .call(textWrap, widthWrap, sizing);\n\n        group.exit().remove();\n\n\n        function shift (d, i) {\n            return self.translate((i+0.5)*width, 0);\n        }\n\n        function sizing (d, i) {\n            var s = size;\n            if (i) s = model.sizeReduction*size;\n            self.select(this).attr('font-size', `${s}px`);\n        }\n    }\n});\n","import {extent, range} from 'd3-array';\nimport {map} from 'd3-collection';\n\nimport accessor from '../utils/accessor';\nimport niceRange from '../utils/nicerange';\nimport createChart from '../core/chart';\nimport colorContrast from '../utils/contrast';\nimport textWrap from '../utils/text-wrapping';\n//\n//  Heatmap\n//  =============\n//\n//  A heatmap is a graphical representation of data where the individual\n//  values contained in a matrix are represented as colors.\n//  This chart type allow to specify to types of layout:\n//  * heatmap - classical heatmap\n//  * punchcard - the z dimension is converted into different sizes of the shape elements\n//  * contour - similar to heatmap but continous rather than descrete\nexport default createChart('heatmap', {\n    requires: ['d3-scale', 'd3-axis', 'd3-svg-legend'],\n\n    options: {\n        shape: 'square',\n        layout: 'heatmap',\n        buckets: 10,\n        pad: 0.005,     // padding for heatmap & punchcard\n        x: 'x',\n        y: 'y',\n        z: 'data',\n        //\n        label: null,    // expression for label text\n        //\n        axisX: true,\n        axisY: true,\n        reverseColors: true,\n        tableColors: null\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            color = this.getModel('color'),\n            font = this.getModel('font'),\n            layout = model.layout,\n            box = this.boundingBox(),\n            zrange = extent(frame.data, accessor(model.z));\n\n        if (zrange[0] < 0 && layout === 'punchcard') layout = 'heatmap';\n\n        var heat = this.heatmap(layout, frame, box, zrange),\n            dx = (box.innerWidth - heat.width)/2,\n            dy = (box.innerHeight - heat.height)/2,\n            shape = this.getSymbol(model.shape).size(d => d.size*d.size),\n            group = this.group(),\n            chart = this.group('chart'),\n            shapes = chart.selectAll('.shape').data(heat.data);\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left + dx, box.margin.top + dy));\n\n        if (range[0] < 0 && layout === 'punchcard') layout = 'heatmap';\n\n        shapes\n            .enter()\n                .append('path')\n                .classed('shape', true)\n                .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n                .attr(\"fill\", d => d.color)\n                .attr(\"fill-opacity\", 0)\n                .attr(\"stroke-opacity\", 0)\n                .attr(\"stroke\", color.stroke)\n                .attr('d', shape)\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(shapes)\n                .transition(this.transition())\n                .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n                .attr(\"fill-opacity\", color.fillOpacity)\n                .attr(\"fill\", d => d.color)\n                .attr(\"stroke-opacity\", color.strokeOpacity)\n                .attr(\"stroke\", color.stroke)\n                .attr('d', shape);\n\n        // add labels\n        if (model.label && layout === 'heatmap') {\n            var fontSize = `${this.font(box)}px`,\n                labels = chart.selectAll('.labels').data(heat.data);\n            labels\n                .enter()\n                    .append('text')\n                    .classed('labels', true)\n                    .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n                    .style(\"text-anchor\", \"middle\")\n                    .style(\"alignment-baseline\", \"middle\")\n                    .style(\"fill\", fillLabel)\n                    .style('font-size', fontSize)\n                    .text(heatLabel)\n                .merge(labels)\n                    .text(heatLabel)\n                    .style('font-size', fontSize)\n                    .call(textWrap, Math.ceil(0.8*heat.size))\n                    .transition(this.transition('text'))\n                    .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n                    .style(\"fill\", fillLabel);\n        }\n\n        var bb = {\n            innerWidth: heat.width,\n            innerHeight: heat.height,\n            margin: {\n                top: box.margin.top + dy,\n                left: box.margin.left + dx\n            }\n        };\n        if (model.axisX)\n            this.xAxis1(model.axisX === true ? \"bottom\" : model.axisX, heat.scaleX, bb);\n        if (model.axisY)\n            this.yAxis1(model.axisY === true ? \"left\" : model.axisY, heat.scaleY, bb);\n\n        if (layout === 'heatmap')\n            this.legend({\n                type: 'color',\n                shape: model.shape,\n                scale: heat.colors\n            }, box);\n        else if (layout === 'punchcard')\n            this.legend({\n                type: 'size',\n                shape: model.shape,\n                scale: heat.sizes\n            }, box);\n\n        function heatLabel (d) {\n            return d.data[model.label];\n        }\n\n        function fillLabel (d) {\n            return colorContrast(d.color, '#fff', font.stroke);\n        }\n    },\n\n    heatmap (layout, frame, box, zrange) {\n        var model = this.getModel(),\n            pad = model.pad,\n            x = model.x,\n            y = model.y,\n            z = model.z,\n            gx = frame.dimension(model.x).group().size(),\n            gy = frame.dimension(model.y).group().size(),\n            buckets = Math.min(model.buckets, gx*gy),\n            dx = (1 - pad*(gx + 1))*box.innerWidth/gx,\n            dy = (1 - pad*(gy + 1))*box.innerHeight/gy,\n            data = [],\n            labelsX = [],\n            labelsY = [],\n            xp = map(), yp = map();\n\n        let xv, yv, zv, i, j, colors, sizes, dd, width, height;\n\n        if (dx < dy) {\n            dd = dx;\n            width = box.innerWidth;\n            pad = width*pad;\n            height = gy*(dd + pad) + pad;\n        } else {\n            dd = dy;\n            height = box.innerHeight;\n            pad = height*pad;\n            width = gx*(dd + pad) + pad;\n        }\n\n        zrange = niceRange(zrange, buckets);\n\n        if (layout === 'heatmap') {\n            var cols = this.fill(range(buckets)).colors;\n            if (model.reverseColors) cols = cols.reverse();\n            colors = this.getScale('quantile').range(cols).domain(zrange);\n            sizes = () => 1;\n        } else {\n            var color = this.colors(1)[0];\n            colors = () => color;\n            sizes = this.getScale('quantile').range(range(buckets).map(s => (s+1)/buckets)).domain(zrange);\n        }\n        frame.data.forEach(d => {\n            xv = d[x];\n            yv = d[y];\n            zv = d[z];\n            if (!xp.has(xv)) {\n                xp.set(xv, labelsX.length);\n                labelsX.push(xv);\n            }\n            if (!yp.has(yv)) {\n                yp.set(yv, labelsY.length);\n                labelsY.push(yv);\n            }\n            i = xp.get(xv);\n            j = yp.get(yv);\n            data.push({\n                i: i,\n                j: j,\n                x: pad + dd/2 + i*(dd + pad),\n                y: pad + dd/2 + j*(dd + pad),\n                color: colors(zv),\n                size: dd*sizes(zv),\n                data: d\n            });\n        });\n        return {\n            data: data,\n            size: dd,\n            width: width,\n            height: height,\n            scaleX: this.getScale('band').domain(labelsX).range([0, width]),\n            scaleY: this.getScale('band').domain(labelsY).range([0, height]),\n            colors: colors,\n            sizes: sizes\n        };\n    }\n});\n","import {extent, max} from 'd3-array';\nimport {assign} from 'd3-let';\n\nimport createChart, {vizPrototype} from '../core/chart';\nimport accessor from '../utils/accessor';\nimport niceRange from '../utils/nicerange';\nimport warn from '../utils/warn';\n\n\nvizPrototype.getGeoProjection = function (name) {\n    return this.getD3('geo', name)();\n};\n\n\n//\n//  GeoChart\n//  =============\n//\n//  A chart displaying a geographical map\nexport default createChart('geochart', {\n    // load these libraries - add 'leaflet'?\n    requires: ['d3-scale', 'd3-geo', 'topojson', 'd3-geo-projection', 'd3-svg-legend'],\n\n    schema: {\n        // Geometry data to display in this chart - must be in the topojson source\n        geometry: {\n            type: 'string',\n            description: 'The geometry to visualize from the topojson geometry objects',\n            default: 'countries'\n        },\n        //\n        // for choropleth maps\n        // geoKey and dataKey are used to match geometry with data\n        geoKey: {\n            type: 'string',\n            default: 'id'\n        },\n        dataKey: {\n            type: 'string',\n            default: 'id'\n        },\n        dataLabelKey : {\n            type: 'string',\n            default: 'label'\n        },\n        dataValueKey: {\n            type: 'string',\n            default: 'value'\n        },\n        neighbors: {\n            type: 'boolean',\n            default: false\n        },\n        // how many color buckets to visualise\n        buckets: {\n            type: 'number',\n            default: 10\n        },\n        choroplethScale: {\n            type: 'string',\n            default: 'quantile'\n        },\n        //\n        // specify one of the topojson geometry object for calculating\n        // the projected bounding box\n        boundGeometry: {\n            type: 'string'\n        },\n        // how much to zoom out, 1 = no zoom out, 0.95 to 0.8 are sensible values\n        boundScaleFactor: {\n            type: 'number',\n            default: 0.9\n        },\n        //\n        projection: {\n            type: 'string',\n            default: 'kavrayskiy7'\n        },\n        graticule: {\n            type: 'boolean',\n            default: false\n        },\n        leaflet: {\n            type: 'boolean',\n            default: false\n        },\n        scale: {\n            type: 'number',\n            default: 200\n        }\n    },\n\n    doDraw () {\n        var info = dataInfo(this.frame);\n        if (!info.topology) return warn ('Topojson data not available - cannot draw topology');\n        if (!this._geoPath) this.createGeoPath(info);\n        this.update(info);\n    },\n\n    update (info) {\n        var model = this.getModel(),\n            color = this.getModel('color'),\n            box = this.boundingBox(),\n            group = this.group(),\n            geogroup = this.group('geo'),\n            path = this._geoPath,\n            data = geodata(this.$, info, model);\n\n        if (!data) {\n            var objects = Object.keys(info.topology.objects).map(key => `\"${key}\"`).join(', ');\n            return warn(`Could not find *geometry* \"${model.geometry}\" in [${objects}] - cannot draw geochart`);\n        }\n\n        group\n            .transition(this.transition('group0'))\n            .attr(\"transform\", this.translate(box.padding.left, box.padding.top));\n        geogroup\n            .transition(this.transition('group1'))\n            .attr(\"transform\", this.translate(box.margin.left, box.margin.top));\n\n        var paths = geogroup.selectAll('.geometry').data(data),\n            fill = this.choropleth(data, box);\n\n        this.center(info);\n\n        paths\n            .enter()\n                .append(\"path\")\n                .attr(\"class\", \"geometry\")\n                .attr(\"d\", path)\n                .style('fill', 'none')\n                .style(\"stroke\", this.modelProperty('stroke', color))\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(paths)\n                .transition(this.transition('geometry'))\n                .attr(\"d\", path)\n                .style(\"stroke\", this.modelProperty('stroke', color))\n                .style(\"fill\", fill)\n                .style(\"fill-opacity\", color.fillOpacity);\n\n        paths\n            .exit()\n            .remove();\n    },\n\n    createGeoPath (info) {\n        var model = this.getModel(),\n            projection = this.getGeoProjection(model.projection).scale(model.scale),\n            $ = this.$,\n            path = $.geoPath().projection(projection),\n            self = this,\n            lefletMap;\n\n        this._geoPath = path;\n        this.center(info);\n\n        if (model.leaflet) {\n            var leafletId = `leaflet-${model.uid}`,\n                paper = this.paper();\n\n            this.visualParent.paper\n                    .append('div')\n                    .attr('id', leafletId);\n            lefletMap = new $.Map(leafletId, {center: [37.8, -96.9], zoom: 4})\n                            .addLayer(new $.TileLayer(\"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\")),\n            lefletMap.getPanes().overlayPane.appendChild(paper.element);\n            projection = $.transform({point: projectPoint});\n            lefletMap.on(\"viewreset\", () => self.update(info));\n        }\n\n        return path;\n\n        function projectPoint(x, y) {\n            var point = lefletMap.latLngToLayerPoint(new $.LatLng(y, x));\n            this.stream.point(point.x, point.y);\n        }\n    },\n\n    center (info) {\n        var model = this.getModel();\n        if (!model.boundGeometry) return;\n\n        var path = this._geoPath,\n            projection = path.projection(),\n            box = this.boundingBox(),\n            boundObject = info.topology.objects[model.boundGeometry],\n            boundGeometry = boundObject ? this.$.feature(info.topology, boundObject).features : null;\n\n        if (!boundGeometry) return warn(`Could not find *boundGeometry* \"${model.boundGeometry}\" for centering - skip centering geochart`);\n\n        projection.scale(1).translate([0, 0]);\n\n        var b = path.bounds(boundGeometry[0]),\n            topLeft = b[0],\n            bottomRight = b[1],\n            scaleX = (bottomRight[0] - topLeft[0]) / box.innerWidth,\n            scaleY = (bottomRight[1] - topLeft[1]) / box.innerHeight,\n            scale = Math.round(model.boundScaleFactor / Math.max(scaleX, scaleY)),\n            translate = [\n                (box.innerWidth - scale * (bottomRight[0] + topLeft[0])) / 2,\n                (box.innerHeight - scale * (bottomRight[1] + topLeft[1])) / 2\n            ];\n\n        projection.scale(scale).translate(translate);\n    },\n\n    // choropleth map based on data\n    choropleth (data, box) {\n        var model = this.getModel(),\n            dataLabelKey = model.dataLabelKey,\n            dataValueKey = model.dataValueKey;\n        let dataValue, valueRange, colors, buckets;\n\n        if (model.neighbors) {\n            dataValue = accessor('rank');\n            valueRange = extent(data, dataValue);\n            buckets = valueRange[1] + 1;\n        } else {\n            dataValue = (d) => d.data[dataValueKey];\n            buckets = Math.min(model.buckets, data.length);\n            valueRange = niceRange(extent(data, dataValue), buckets);\n        }\n\n        colors = this.getScale(model.choroplethScale).range(this.colors(buckets).reverse()).domain(valueRange);\n\n        this.legend({\n            type: 'color',\n            scale: colors\n        }, box);\n\n        return d => {\n            d.label = d.data[dataLabelKey] || d.id;\n            d.value = dataValue(d);\n            d.color = colors(d.value);\n            return d.color;\n        };\n    }\n\n});\n\n\nexport function dataInfo (frame) {\n    var info = {};\n    if (frame.type === 'frameCollection')\n        frame.frames.each(df => {\n            if (df.type === 'Topology') info.topology = df;\n            else if (df.type === 'dataframe') info.data = df.data;\n        });\n    else if (frame.type === 'Topology')\n        info.topology = frame;\n    return info;\n}\n\n\n//\n//  Create a geo data frame\n//  ===========================\n//\n//  * geo - d3-geo & topojson object\n//  * info - object with topology and data frame (optional)\nexport function geodata (geo, info, config) {\n    var geoKey = config.geoKey,\n        dataKey = config.dataKey;\n    let data = {}, features, key, props;\n\n    if (!info.topology) return warn('No topology object available');\n    var geometry = info.topology.objects[config.geometry];\n    if (!geometry) return warn(`Topology object ${config.geometry} is not available`);\n\n\n    var neighbors = config.neighbors ? geo.neighbors(geometry.geometries) : null;\n\n    features = geo.feature(info.topology, geometry).features;\n    if (info.data) data = info.data.reduce((o, d) => {o[d[dataKey]] = d; return o;}, {});\n\n    features = features.map(d => {\n        props = d.properties;\n        key = d[geoKey] || props[geoKey];\n        return {\n            id: key,\n            type: d.type,\n            geometry: d.geometry,\n            data: assign({}, props, data[key])\n        };\n    });\n\n    if (neighbors) features.forEach((d, i) => {\n        d.neighbors = neighbors[i];\n        d.rank = max(d.neighbors, j => features[j].rank) + 1 | 0;\n    });\n\n    return features;\n}\n","//\nexport {version as visualizeVersion} from './package.json';\n//\nexport {require} from './src/require';\n//\n// Data layer\nexport {default as DataFrame} from './src/data/dataframe';\nexport {default as DataStore} from './src/data/store';\nexport {default as dataSources} from './src/data/sources';\nexport {default as dataEvents} from './src/data/events';\n//export {default as dataLocale} from './src/data/locale';\n\n//\n//  Core API\nexport {visuals} from './src/core/base';\nexport {default as createChart} from './src/core/chart';\nexport {default as createPaper, Svg, Div} from './src/core/paper';\nexport {default as visualTransform} from './src/transforms/base';\nexport {default as visualTransforms} from './src/transforms/index';\n//\n//  Components\nexport {default as visualComponents} from './src/components/index';\n\n// utilities\nexport {colorScales} from './src/plugins/color';\nexport {default as pyramid} from './src/transforms/pyramid';\nexport {default as niceRange} from './src/utils/nicerange';\nexport {default as slugify} from './src/utils/slugify';\n//\n//  Charts\n//  =========\n//\n//  Last import, important!\nexport {default as Visual} from './src/core/visual';\nexport {default as BarChart} from './src/charts/bar';\nexport {default as LineChart} from './src/charts/line';\nexport {default as AreaChart} from './src/charts/area';\nexport {default as PieChart} from './src/charts/pie';\nexport {default as PyramidChart} from './src/charts/pyramid';\nexport {default as Treemap} from './src/charts/treemap';\nexport {default as TextChart} from './src/charts/text';\nexport {default as Heatmap} from './src/charts/heatmap';\nexport {default as GeoChart} from './src/charts/geo';\nexport {default as createCompositeChart} from './src/charts/composite';\n","import {format} from 'd3-format';\n\nconst memorySymbols = ['K', 'M', 'G'].map((s, i) => {\n    return {\n        symbol: s,\n        size: 1 << (i+1)*10\n    };\n}).reverse();\n\nexport default function (fmt) {\n    const binaryFormat = format(fmt);\n\n    return function (value) {\n        for (let s=0; s<memorySymbols.length; ++s) {\n            if (value >= memorySymbols[s].size) {\n                value /= memorySymbols[s].size;\n                return binaryFormat(value) + memorySymbols[s].symbol + 'B';\n            }\n        }\n        return binaryFormat(value) + 'B';\n    };\n}\n","import {viewProviders} from 'd3-view';\n\n\nexport default {\n    props: ['url'],\n\n    render (data, props, el) {\n        var self = this,\n            inner = this.select(el).html();\n\n        return viewProviders.require('marked').then(marked => {\n            if (data.url) {\n                return this.fetchText(data.url).then(text => {\n                    text = marked(text);\n                    return self.viewElement(`<div class=\"doc\">${text}</div>`);\n                });\n            } else {\n                var text = marked(inner);\n                return self.viewElement(`<div class=\"doc\">${text}</div>`);\n            }\n        });\n    }\n};\n","import {timeFormat} from 'd3-time-format';\n\nconst format = timeFormat('%d %b %Y, %H:%M');\nconst labels = ['system', 'arch', 'processor', 'cpus', 'python'];\nconst template = `<div class=\"card\">\n<dic class=\"card-body\">\n<dl class=\"row\" d3-for=\"entry in info\">\n    <dt class=\"col-sm-4\" d3-html=\"entry.label\"></dt>\n    <dd class=\"col-sm-8\" d3-html=\"entry.value\"></dd>\n</dl>\n</div>\n</div>`;\n\nexport default {\n    model () {\n        return {\n            info: []\n        };\n    },\n    render () {\n        const model = this.model;\n        model.dataStore.onData('benchmarks.info', frame => {\n            model.info = info(frame.data[0]);\n        });\n        return this.viewElement(template);\n    }\n};\n\n\nfunction info (o) {\n    var date = new Date(o.date),\n        data = [\n            {\n                label: 'date',\n                value: format(date)\n            }\n        ];\n    labels.forEach(label => {\n        data.push({\n            label: label,\n            value: o[label]\n        });\n    });\n    return data;\n}\n","import {assign, inBrowser} from 'd3-let';\nimport {view, viewForms, viewBootstrapForms, viewReady, viewEvents, viewProviders} from 'd3-view';\nimport {visualComponents, visuals, colorScales} from 'd3-visualize';\nimport {interpolateRdBu} from 'd3-scale-chromatic';\n\nimport binaryFormat from './bytes';\nimport marked from './marked';\nimport info from './info';\n\n\nif (inBrowser) {\n    if (window.development) viewProviders.setDebug(true);\n}\n\n\ncolorScales.set('redyellowblue', (d3) => d3.scaleSequential(interpolateRdBu));\n\n\nassign(visuals.options.dataContext, {\n    $binaryFormat: binaryFormat\n});\n\n\nexport function start () {\n    viewReady(() => {\n        appView().mount('body');\n    });\n}\n\n\nexport function appView () {\n    var vm = view({\n            components: {\n                marked,\n                info\n            }\n        })\n        .use(viewForms)\n        .use(viewBootstrapForms)\n        .use(visualComponents);\n\n        viewEvents.on('component-mounted', (cm) => {\n            if (cm.name === 'd3form') {\n                cm.model.$on(() => formListener(cm));\n            }\n        });\n\n    return vm;\n}\n\nfunction formListener () {\n\n}\n"],"names":["prefix","msg","providers","logger","debug","defaultDebug","info","fetch","active","arguments","length","isFunction","d3Require","inBrowser","window","require","d3","unsupportedRequire","Promise","reject","Error","warn","properties","map","expression","arg","model","value","refreshClass","isArray","prop","get","sel","property","attr","oldValue","forEach","entry","classed","exist","html","isNumber","isString","dir","transition","passes","style","on","selectChildren","mount","callback","delay","promise","debounce","self","args","resolve","apply","undefined","err","o","defineProperty","select","el","base","attrName","refresh","refreshFunction","createValueType","proto","ValueType","prototype","assign","vType","$set","options","selectAll","values","opt","each","indexOf","push","input","type","tag","tagName","toLowerCase","types","expr","parsed","codes","IDENTIFIER","off","eventName","uid","event","md","$child","$event","eval","bindDestroy","compile","text","handlebars","source","context","s","htmlElement","document","createElement","children","node","HttpError","response","description","statusText","size","url","x","then","jsonResponse","asElement","cache","render","fetchText","template","name","asSelect","Array","slice","call","status","ct","headers","split","json","duration","transitionDuration","code","PERIOD_CODE","COMMA_CODE","SQUOTE_CODE","DQUOTE_CODE","OPAREN_CODE","CPAREN_CODE","OBRACK_CODE","CBRACK_CODE","QUMARK_CODE","SEMCOL_CODE","COLON_CODE","throwError","message","index","error","t","unary_ops","binary_ops","getMaxKeyLen","obj","max_len","len","key","hasOwnProperty","max_unop_len","max_binop_len","literals","this_str","binaryPrecedence","op_val","createBinaryExpression","operator","left","right","LOGICAL_EXP","BINARY_EXP","isDecimalDigit","ch","isIdentifierStart","String","fromCharCode","isIdentifierPart","jsep","charAtFunc","charAt","charCodeAtFunc","charCodeAt","exprI","i","exprICode","gobbleSpaces","gobbleExpression","test","gobbleBinaryExpression","consequent","alternate","CONDITIONAL_EXP","gobbleBinaryOp","to_check","substr","tc_len","biop","prec","stack","biop_info","gobbleToken","pop","gobbleNumericLiteral","gobbleStringLiteral","gobbleVariable","gobbleArray","UNARY_EXP","number","chCode","LITERAL","parseFloat","str","quote","closed","gobbleIdentifier","start","identifier","THIS_EXP","gobbleArguments","termination","ch_i","COMPOUND","gobbleGroup","MEMBER_EXP","CALL_EXP","ARRAY_EXP","nodes","addUnaryOp","op_name","Math","max","addBinaryOp","precedence","addLiteral","literal_name","literal_value","removeUnaryOp","removeBinaryOp","removeLiteral","evaluate","nested","elements","elem","binaryExp","callExpression","callee","object","unaryExp","argument","identifiers","all","set","add","fullName","func","EvalError","op","unaryFunctions","Function","a","b","binaryFunctions","Expression","UID","events","dispatch","triggered","typename","asModel","initials","parent","isolated","Child","ddispatch","defineProperties","$update","createChildConstructor","modelStr","constructor","Object","$events","reactive","isModel","isObject","toString","lazy","typeValue","$change","update","newValue","modelName","$$name","isVanillaObject","reactOn","$on","arrayValue","modelValue","$new","$off","bits","getEvent","join","data","replace","substring","removeEvent","splice","idx","attribute","trigger","has","$isReactive","$owner","$push","array","$splice","count","Model","root","removeAttribute","bindModel","target","modelEvents","viewModel","destroy","Directive","create","viewExpression","directive","addTarget","getTarget","JSON","parse","DATAPREFIX","attrs","keys","p","reduce","toUpperCase","protoComponent","onMounted","mounted","directives","dattrs","attributes","parentModel","datum","props","modelData","dataAttributes","reactiveParentProperty","maybeJson","$$view","newEl","element","createComponent","coreDirectives","classComponents","extendComponents","classDirectives","extendDirectives","Component","components","comp","component","container","createDirective","asView","vm","view","vmMounted","isMounted","childrenMounted","cm","parentNode","insertBefore","remove","dirs","Directives","dirName","preMount","d","execute","selection","__d3_directives__","__d3_view__","promises","mountElement","getdirs","c","plugin","install","d3el","trim","v","itemName","itemClass","creator","items","selector","allItems","entries","filter","exits","forView","protoView","fel","tr","enter","append","cloneNode","fv","merge","display","d3For","d3If","observer","MutationObserver","visualManager","observe","documentElement","records","record","removedNodes","config","viewClass","readyCallbacks","readyState","addEventListener","_completed","domReady","removeEventListener","shift","formElement","id","classes","fieldEl","field","wrappedEl","$formExtensions","extension","div","outer","slot","insert","isDirty","inputData","placeholder","label","form","inputs","changed","addAttributes","stringify","componentsFromType","formComponent","child","addChildren","formChild","required","minLength","l","maxLength","minimum","r","range","maximum","custom","validators","customValidator","_view","validator","validate","$validate","l0","l1","Infinity","method","checks","wrap","optionLabel","optionValue","option","endpoint","$submit","actions","submit","defaultResponse","redirect","location","href","redirectTo","endpointDefauls","e","preventDefault","stopPropagation","$inputData","contentType","body","FormData","$setSubmit","$setSubmitDone","success","failure","$response","fieldset","textarea","submitting","inp","valid","formSubmitted","formPending","$isValid","resultHandler","handler","responses","default","$responseError","level","$message","schema","build","action","$get","addComponent","wrapTemplate","labelTpl","fc","groupTpl","ig","gid","group","theme","bootstrap","wrapBootstrap","wrappers","wrapper","exports","version","crossfilter_identity","permute","n","copy","bisect","crossfilter","bisect_by","by","f","bisectLeft","lo","hi","mid","bisectRight","heap","heap_by","sort","sift","heapselect","heapselect_by","k","queue","min","insertionsort","insertionsort_by","j","quicksort","quicksort_by","quicksort_sizeThreshold","sixth","i1","i5","i3","i4","e1","x1","e2","i2","x2","e3","x3","e4","x4","e5","x5","pivot1","pivotValue1","pivot2","pivotValue2","less","pivotsEqual","great","ek","xk","greatValue","lessValue","crossfilter_array8","crossfilter_arrayUntyped","crossfilter_array16","crossfilter_array32","crossfilter_arrayLengthen","crossfilter_arrayLengthenUntyped","crossfilter_arrayWiden","crossfilter_arrayWidenUntyped","Uint8Array","Uint16Array","Uint32Array","width","crossfilter_filterExact","crossfilter_filterRange","crossfilter_filterAll","crossfilter_null","crossfilter_zero","crossfilter_reduceIncrement","crossfilter_reduceDecrement","crossfilter_reduceAdd","crossfilter_reduceSubtract","removeData","dimension","groupAll","newData","n0","n1","concat","filters","newIndex","crossfilter_index","removed","filterExact","filterRange","filterFunction","filterAll","top","bottom","dispose","one","m","newValues","refilter","lo0","hi0","unshift","preAdd","postAdd","M","crossfilter_range","bounds","lo1","hi1","refilterFunction","oldValues","oldIndex","i0","reIndex","filterIndexBounds","added","filterIndexFunction","zero","reduceCount","reduceSum","order","orderNatural","groups","groupCapacity","crossfilter_capacity","groupWidth","reduceAdd","reduceRemove","reduceInitial","reset","resetNeeded","oldGroups","initial","k0","groupIndex","x0","g0","g","filterListeners","updateMany","resetMany","updateOne","resetOne","groupIncrement","oldK","seenGroups","filterOne","valueOf","indexListeners","removeDataListeners","dataListeners","reduceValue","w","this","module","DataFrame","store","dimensions","serie","_inner","cf","keepExisting","current","accessor","new","total","pivoter","pk","pv","mapper","_data","asFrame","schemes","CSV","isUrl","viewProviders","csvParse","tsvParse","sources","getData","frames","mergeFrames","FrameCollection","frame","isPromise","result","transform","jsonValidator","dummyValidator","transformFactory","logError","doTransform","safeEval","fill","operations","scalar_operations","agg","fields","ops","as","groupby","countAll","fillArray","aggregate","oo","query","dim","q","sortby","timeseries","newframe","tmp","series","globalOptions","dateFormat","converters","utcParse","mappers","converter","DEFAULT_METHOD","DEFAULT_PERIOD","DEFAULT_ALPHA","MAXALPHA","fieldto","y","period","cumulate","buffer","alpha","minmax","sum","cutoff","difference","df","zeros","z","dd","prev","applyTransforms","transforms","applyt","res","ts","dataSourcePrototype","transformStore","dataEvents","DataSource","cfg","getConfig","initDataSource","dataSource","dataName","initialise","addTransforms","dataSources","remote","composite","DataStore","dataCount","ds","cachedFrame","lastFrame","ctx","dataStore","dsname","def","round","pow","WIDTH","HEIGHT","sizeValue","getSize","height","getWidth","widthElement","getWidthElement","getHeight","heightElement","getHeightElement","windowHeight","getParentElementRect","elementWidth","elementHeight","innerHeight","getBoundingClientRect","padding","clone","CONTAINERS","visuals","defaultsFromProperties","schemaDef","definitions","visualPrototype","fetchData","drawing","redraw","draw","visualType","visualParent","getModel","me","refSize","minSize","maxSize","live","getVisualSchema","Visual","visualRoot","viewBase","createVisual","layers","drawCount","__visual__","layer","activate","deactivate","fit","clear","visual","VisualClass","resize","currentSize","viewDebug","paperElement","paper","__paper","paperType","PaperType","papers","gname","querySelectorAll","viz","visualPlugins","protos","vizPrototype","chartPrototype","extendVisualPrototype","plugins","_paper","getVisual","getPaperGroup","childGroup","xt","yt","$","doDraw","boundingBox","_drawArgs","requires","displayError","createPaper","Paper","paperPrototype","box","cname","ge","Svg","svg","Div","getScale","scale","getD3","extendObject","menu","refreshMenu","minHeight","maxHeight","Ds","$visual","getContext","isViz","setupLayer","setupVisual","addSources","formats","specifier","fmt","format","timeFormat","dataContext","cachedFormat","cachedFormatTime","formatter","font","fontSizeMultiplier","resizeDelay","viewDebounce","title","__title","stroke","offset","vizHeight","vizWidth","translate","margin","innerWidth","menuTitle","px","KEYS","LEFTRIGHT","clearCache","clearBBCache","__boundingBox","calculate","$nomargins","margins","marginv","axisDefaults","xAxis","yAxis","getAxis","orientation","xAxis1","axis","_axis","ga","applyTransform","translateAxis","axisTitle","yAxis1","rotate","titleRotate","titleOffset","tickSize","tickSizeOuter","isDate","tickFormat","ticks","formatAxis","hide","abs","ancor","getSymbol","symbol","getCurve","getStack","stackOrder","stackOffset","factory","extend","definition","Color","darker","brighter","reI","reN","reP","reHex3","reHex6","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","define","color","rgb","displayable","exec","parseInt","Rgb","rgbn","rgba","hsla","NaN","rgbConvert","opacity","isNaN","h","Hsl","hslConvert","hsl","m2","m1","hsl2rgb","deg2rad","PI","rad2deg","Kn","Xn","Yn","Zn","t0","t1","t2","t3","labConvert","Lab","Hcl","cos","sin","rgb2xyz","xyz2lab","lab","lab2xyz","xyz2rgb","hclConvert","atan2","sqrt","hcl","A","B","C","D","E","ED","EB","BC_DA","cubehelixConvert","Cubehelix","bl","cubehelix","cosh","sinh","colorScales","scaleSequential","interpolateViridis","interpolateInferno","interpolateMagma","interpolatePlasma","interpolateWarm","interpolateCool","interpolateRainbow","interpolateCubehelixDefault","getColorScale","colors","reversed","scaleDef","minPoints","scaleMinPoints","interpolator","scaleOffset","npoints","points","domain","reverse","modelProperty","linearGradient","col","defs","grad","colto","stops","legend","getLegend","vizModel","legendType","vizSize","fontSize","minFontSize","maxFontSize","orient","titleWidth","titleMinWidth","titleMaxWidth","labelFormat","shapeWidth","shapeHeight","gl","bb","getBBox","locations","topLeft","topRight","bottomLeft","bottomRight","offsetY","offsetX","constant","mouseStrategies","darkerStrategy","fillStrategy","mouse","mouseOver","__mouse_over__","strategy","over","mouseOut","out","filldarker","darkerFactor","fillColor","tooltip","noop","tooltipHtml","show","functor","point","locationCallbacks","selectNode","createSVGPoint","snode","content","poffset","scrollTop","scrollLeft","coords","bbox","getScreenBBox","offsetWidth","offsetHeight","targetel","getScreenCTM","matrix","tbbox","nw","matrixTransform","ne","se","sw","expand","__expanded","hasMargin","button","floor","buttonText","collapseText","expandText","firstPass","radius","textColor","fontFamily","family","click","fillOver","pd","mg","uname","idname","brushX","brushY","brush","vizComponent","inner","getSchema","catch","class","VisualContainer","visualDashboard","visualDrawOnMount","addVisual","dashboard","identity","pad","pyramid","fraction","v0","ph","pj","polygons","descending","_","splits","dx","log10","ndx","ceil","nx0","white","black","dy","wd","lineHeight","lines","word","words","done","tspan","getComputedTextLength","curveTypes","scales","baselines","heightShifts","createChart","lineWidth","cornerRadius","axisX","axisY","scaleY","chart","barChart","VerticalBarChart","HorizontalBarChart","stacked","gframe","pivot","sz","normalize","domainX","sx","grouped","vertical","init","rangeRound","sy","barChartPrototype","scaleX","bars","xrect","yrect","yi","rects","nice","y0","bandwidth","bardim","exit","stackedData","labels","baseline","labelLocation","heightShift","labelWidth","labelOffset","labelTranslate","fillLabel","labelText","textWrap","labelAlign","colorContrast","paddingInner","maxValue","gx","gh","groupData","gy","strokeOpacity","grouper","normalizeData","GroupedData","vals","extent","acc","acc0","acc1","curve","rangeX","domainY","rangeY","sxshift","line","xl","yl","line_","gradient","lineDarken","areas","areagroup","arealine","fillOpacity","xx","y1","area_","area","spacing","pi","rad","proportional","outerRadius","innerRadius","angles","pie","padAngle","startAngle","endAngle","arcs","arc","proportionalData","slices","center","centerFontSize","centerOpacity","legendLabel","fractionFormat","funnel","fr","bi","pim","moveTo","lineTo","closePath","inverted","marks","polygon","xy","segments","objectOnly","labelAccessor","valueAccessor","valueFormat","hierarchy","rootData","eachBefore","dataColor","treemap","tile","camelFunction","leaves","cell","singleData","_counter","textData","hideChildren","_children","widthWrap","sizing","sizeReduction","layout","zrange","heat","heatmap","shape","shapes","heatLabel","sizes","buckets","labelsX","labelsY","xp","yp","xv","yv","zv","niceRange","cols","reverseColors","getGeoProjection","dataInfo","topology","_geoPath","createGeoPath","geogroup","path","geodata","objects","geometry","paths","choropleth","projection","geoPath","lefletMap","leaflet","leafletId","Map","zoom","addLayer","TileLayer","getPanes","overlayPane","appendChild","projectPoint","latLngToLayerPoint","LatLng","stream","boundGeometry","boundObject","feature","features","boundScaleFactor","dataLabelKey","dataValueKey","dataValue","valueRange","neighbors","choroplethScale","geo","geoKey","dataKey","geometries","rank","memorySymbols","binaryFormat","marked","viewElement","onData","date","Date","development","setDebug","interpolateRdBu","appView","use","viewForms","viewBootstrapForms","visualComponents","formListener"],"mappings":"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"}