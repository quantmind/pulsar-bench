{"version":3,"file":"visual.js","sources":["../../node_modules/d3-visualize/src/require.js","../../node_modules/crossfilter/crossfilter.js","../../node_modules/crossfilter/index.js","../../node_modules/d3-visualize/src/utils/accessor.js","../../node_modules/d3-visualize/src/data/dataframe.js","../../node_modules/d3-visualize/src/data/array.js","../../node_modules/d3-visualize/src/data/warn.js","../../node_modules/d3-visualize/src/utils/isurl.js","../../node_modules/d3-visualize/src/data/remote.js","../../node_modules/d3-visualize/src/data/composite.js","../../node_modules/d3-visualize/src/data/expression.js","../../node_modules/d3-visualize/src/transforms/base.js","../../node_modules/d3-visualize/src/transforms/filter.js","../../node_modules/d3-visualize/src/utils/warn.js","../../node_modules/d3-visualize/src/utils/fillarray.js","../../node_modules/d3-visualize/src/transforms/aggregate.js","../../node_modules/d3-visualize/src/transforms/crossfilter.js","../../node_modules/d3-visualize/src/transforms/timeseries.js","../../node_modules/d3-visualize/src/core/options.js","../../node_modules/d3-visualize/src/transforms/mapfields.js","../../node_modules/d3-visualize/src/utils/minmax.js","../../node_modules/d3-visualize/src/transforms/moving-average.js","../../node_modules/d3-visualize/src/transforms/group-small.js","../../node_modules/d3-visualize/src/transforms/diff.js","../../node_modules/d3-visualize/src/transforms/index.js","../../node_modules/d3-visualize/src/data/sources.js","../../node_modules/d3-visualize/src/data/store.js","../../node_modules/d3-visualize/src/utils/round.js","../../node_modules/d3-visualize/src/utils/size.js","../../node_modules/d3-visualize/src/utils/clone.js","../../node_modules/d3-visualize/src/core/base.js","../../node_modules/d3-visualize/src/core/visual.js","../../node_modules/d3-visualize/src/core/chart.js","../../node_modules/d3-visualize/src/core/paper.js","../../node_modules/d3-visualize/src/utils/extend-object.js","../../node_modules/d3-visualize/src/plugins/scale.js","../../node_modules/d3-visualize/src/plugins/menu.js","../../node_modules/d3-visualize/src/plugins/data.js","../../node_modules/d3-visualize/src/utils/format.js","../../node_modules/d3-visualize/src/utils/format-time.js","../../node_modules/d3-visualize/src/plugins/format.js","../../node_modules/d3-visualize/src/plugins/font.js","../../node_modules/d3-visualize/src/plugins/responsive.js","../../node_modules/d3-visualize/src/plugins/title.js","../../node_modules/d3-visualize/src/plugins/margin.js","../../node_modules/d3-visualize/src/plugins/axis.js","../../node_modules/d3-visualize/src/plugins/shapes.js","../../node_modules/d3-color/src/define.js","../../node_modules/d3-color/src/color.js","../../node_modules/d3-color/src/math.js","../../node_modules/d3-color/src/lab.js","../../node_modules/d3-color/src/cubehelix.js","../../node_modules/d3-visualize/src/plugins/color.js","../../node_modules/d3-visualize/src/plugins/legend.js","../../node_modules/d3-visualize/src/utils/constant.js","../../node_modules/d3-visualize/src/utils/functor.js","../../node_modules/d3-visualize/src/utils/identity.js","../../node_modules/d3-visualize/src/plugins/mouse.js","../../node_modules/d3-visualize/src/plugins/tooltip.js","../../node_modules/d3-visualize/src/plugins/expand.js","../../node_modules/d3-visualize/src/plugins/transition.js","../../node_modules/d3-visualize/src/plugins/brush.js","../../node_modules/d3-visualize/src/core/container.js","../../node_modules/d3-visualize/src/components/dashboard.js","../../node_modules/d3-visualize/src/components/visual.js","../../node_modules/d3-visualize/src/components/index.js","../../node_modules/d3-visualize/src/utils/descending.js","../../node_modules/d3-visualize/src/transforms/pyramid.js","../../node_modules/d3-visualize/src/utils/nicerange.js","../../node_modules/d3-visualize/src/utils/contrast.js","../../node_modules/d3-visualize/src/utils/text-wrapping.js","../../node_modules/d3-visualize/src/charts/defs.js","../../node_modules/d3-visualize/src/charts/bar.js","../../node_modules/d3-visualize/src/transforms/groups.js","../../node_modules/d3-visualize/src/charts/line.js","../../node_modules/d3-visualize/src/charts/area.js","../../node_modules/d3-visualize/src/charts/pie.js","../../node_modules/d3-visualize/src/transforms/funnel.js","../../node_modules/d3-visualize/src/utils/polygon.js","../../node_modules/d3-visualize/src/charts/pyramid.js","../../node_modules/d3-visualize/src/utils/camelfunction.js","../../node_modules/d3-visualize/src/charts/treemap.js","../../node_modules/d3-visualize/src/charts/text.js","../../node_modules/d3-visualize/src/charts/heatmap.js","../../node_modules/d3-visualize/src/charts/geo.js","../../node_modules/d3-visualize/index.js","../../visual/bytes.js","../../visual/marked.js","../../visual/info.js","../../visual/index.js"],"sourcesContent":["//\n//  Asynchronous module definitions\nvar queue = [], map = queue.map, some = queue.some, hasOwnProperty = queue.hasOwnProperty;\n\nconst isAbsolute = new RegExp('^([a-z]+://|//)');\nconst libs = new Map;\nconst modules = new Map;\n\n\nfunction urlIsAbsolute (url) {\n    return typeof url === 'string' && isAbsolute.test(url);\n}\n\n\nexport const require = requireFrom(name => {\n    var nameUrl = libs.get(name) || name;\n    if (nameUrl.local) return nameUrl.url;\n    if (urlIsAbsolute(nameUrl)) return nameUrl;\n    return `https://unpkg.com/${nameUrl}`;\n});\n\n\nexport function requireFrom(source) {\n\n    function load (name) {\n        var url = source(name + \"\"), module = modules.get(url);\n        if (!module) modules.set(url, module = new Promise(function(resolve, reject) {\n            var script = document.createElement(\"script\");\n            script.onload = function() {\n                if (queue.length !== 1) return reject(new Error(\"invalid module\"));\n                resolve(queue.pop()(load));\n            };\n            script.onerror = function() {\n                reject(new Error(\"unable to load module\"));\n            };\n            script.async = true;\n            script.src = url;\n            window.define = define;\n            document.head.appendChild(script);\n        }));\n        return module;\n    }\n\n    function require (name) {\n        return arguments.length > 1 ? Promise.all(map.call(arguments, load)).then(merge) : load(name);\n    }\n\n    require.libs = libs;\n    require.modules = modules;\n\n    require.local = function (name, url) {\n        libs.set(name, {\n            local: true,\n            url: url\n        });\n    };\n\n    return require;\n}\n\nfunction merge(modules) {\n  var o = {}, i = -1, n = modules.length, m, k;\n  while (++i < n) {\n    for (k in (m = modules[i])) {\n      if (hasOwnProperty.call(m, k)) {\n        if (m[k] == null) Object.defineProperty(o, k, {get: getter(m, k)});\n        else o[k] = m[k];\n      }\n    }\n  }\n  return o;\n}\n\nfunction getter(object, name) {\n  return function() { return object[name]; };\n}\n\nfunction isexports(name) {\n  return (name + \"\") === \"exports\";\n}\n\nfunction define(name, dependencies, factory) {\n  if (arguments.length < 3) factory = dependencies, dependencies = name;\n  if (arguments.length < 2) factory = dependencies, dependencies = [];\n  queue.push(some.call(dependencies, isexports) ? function(require) {\n    var exports = {};\n    return Promise.all(map.call(dependencies, function(name) {\n      return isexports(name += \"\") ? exports : require(name);\n    })).then(function(dependencies) {\n      factory.apply(null, dependencies);\n      return exports;\n    });\n  } : function(require) {\n    return Promise.all(map.call(dependencies, require)).then(function(dependencies) {\n      return typeof factory === \"function\" ? factory.apply(null, dependencies) : factory;\n    });\n  });\n}\n\ndefine.amd = {};\n","(function(exports){\ncrossfilter.version = \"1.3.12\";\nfunction crossfilter_identity(d) {\n  return d;\n}\ncrossfilter.permute = permute;\n\nfunction permute(array, index) {\n  for (var i = 0, n = index.length, copy = new Array(n); i < n; ++i) {\n    copy[i] = array[index[i]];\n  }\n  return copy;\n}\nvar bisect = crossfilter.bisect = bisect_by(crossfilter_identity);\n\nbisect.by = bisect_by;\n\nfunction bisect_by(f) {\n\n  // Locate the insertion point for x in a to maintain sorted order. The\n  // arguments lo and hi may be used to specify a subset of the array which\n  // should be considered; by default the entire array is used. If x is already\n  // present in a, the insertion point will be before (to the left of) any\n  // existing entries. The return value is suitable for use as the first\n  // argument to `array.splice` assuming that a is already sorted.\n  //\n  // The returned insertion point i partitions the array a into two halves so\n  // that all v < x for v in a[lo:i] for the left side and all v >= x for v in\n  // a[i:hi] for the right side.\n  function bisectLeft(a, x, lo, hi) {\n    while (lo < hi) {\n      var mid = lo + hi >>> 1;\n      if (f(a[mid]) < x) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  // Similar to bisectLeft, but returns an insertion point which comes after (to\n  // the right of) any existing entries of x in a.\n  //\n  // The returned insertion point i partitions the array into two halves so that\n  // all v <= x for v in a[lo:i] for the left side and all v > x for v in\n  // a[i:hi] for the right side.\n  function bisectRight(a, x, lo, hi) {\n    while (lo < hi) {\n      var mid = lo + hi >>> 1;\n      if (x < f(a[mid])) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  bisectRight.right = bisectRight;\n  bisectRight.left = bisectLeft;\n  return bisectRight;\n}\nvar heap = crossfilter.heap = heap_by(crossfilter_identity);\n\nheap.by = heap_by;\n\nfunction heap_by(f) {\n\n  // Builds a binary heap within the specified array a[lo:hi]. The heap has the\n  // property such that the parent a[lo+i] is always less than or equal to its\n  // two children: a[lo+2*i+1] and a[lo+2*i+2].\n  function heap(a, lo, hi) {\n    var n = hi - lo,\n        i = (n >>> 1) + 1;\n    while (--i > 0) sift(a, i, n, lo);\n    return a;\n  }\n\n  // Sorts the specified array a[lo:hi] in descending order, assuming it is\n  // already a heap.\n  function sort(a, lo, hi) {\n    var n = hi - lo,\n        t;\n    while (--n > 0) t = a[lo], a[lo] = a[lo + n], a[lo + n] = t, sift(a, 1, n, lo);\n    return a;\n  }\n\n  // Sifts the element a[lo+i-1] down the heap, where the heap is the contiguous\n  // slice of array a[lo:lo+n]. This method can also be used to update the heap\n  // incrementally, without incurring the full cost of reconstructing the heap.\n  function sift(a, i, n, lo) {\n    var d = a[--lo + i],\n        x = f(d),\n        child;\n    while ((child = i << 1) <= n) {\n      if (child < n && f(a[lo + child]) > f(a[lo + child + 1])) child++;\n      if (x <= f(a[lo + child])) break;\n      a[lo + i] = a[lo + child];\n      i = child;\n    }\n    a[lo + i] = d;\n  }\n\n  heap.sort = sort;\n  return heap;\n}\nvar heapselect = crossfilter.heapselect = heapselect_by(crossfilter_identity);\n\nheapselect.by = heapselect_by;\n\nfunction heapselect_by(f) {\n  var heap = heap_by(f);\n\n  // Returns a new array containing the top k elements in the array a[lo:hi].\n  // The returned array is not sorted, but maintains the heap property. If k is\n  // greater than hi - lo, then fewer than k elements will be returned. The\n  // order of elements in a is unchanged by this operation.\n  function heapselect(a, lo, hi, k) {\n    var queue = new Array(k = Math.min(hi - lo, k)),\n        min,\n        i,\n        x,\n        d;\n\n    for (i = 0; i < k; ++i) queue[i] = a[lo++];\n    heap(queue, 0, k);\n\n    if (lo < hi) {\n      min = f(queue[0]);\n      do {\n        if (x = f(d = a[lo]) > min) {\n          queue[0] = d;\n          min = f(heap(queue, 0, k)[0]);\n        }\n      } while (++lo < hi);\n    }\n\n    return queue;\n  }\n\n  return heapselect;\n}\nvar insertionsort = crossfilter.insertionsort = insertionsort_by(crossfilter_identity);\n\ninsertionsort.by = insertionsort_by;\n\nfunction insertionsort_by(f) {\n\n  function insertionsort(a, lo, hi) {\n    for (var i = lo + 1; i < hi; ++i) {\n      for (var j = i, t = a[i], x = f(t); j > lo && f(a[j - 1]) > x; --j) {\n        a[j] = a[j - 1];\n      }\n      a[j] = t;\n    }\n    return a;\n  }\n\n  return insertionsort;\n}\n// Algorithm designed by Vladimir Yaroslavskiy.\n// Implementation based on the Dart project; see lib/dart/LICENSE for details.\n\nvar quicksort = crossfilter.quicksort = quicksort_by(crossfilter_identity);\n\nquicksort.by = quicksort_by;\n\nfunction quicksort_by(f) {\n  var insertionsort = insertionsort_by(f);\n\n  function sort(a, lo, hi) {\n    return (hi - lo < quicksort_sizeThreshold\n        ? insertionsort\n        : quicksort)(a, lo, hi);\n  }\n\n  function quicksort(a, lo, hi) {\n    // Compute the two pivots by looking at 5 elements.\n    var sixth = (hi - lo) / 6 | 0,\n        i1 = lo + sixth,\n        i5 = hi - 1 - sixth,\n        i3 = lo + hi - 1 >> 1,  // The midpoint.\n        i2 = i3 - sixth,\n        i4 = i3 + sixth;\n\n    var e1 = a[i1], x1 = f(e1),\n        e2 = a[i2], x2 = f(e2),\n        e3 = a[i3], x3 = f(e3),\n        e4 = a[i4], x4 = f(e4),\n        e5 = a[i5], x5 = f(e5);\n\n    var t;\n\n    // Sort the selected 5 elements using a sorting network.\n    if (x1 > x2) t = e1, e1 = e2, e2 = t, t = x1, x1 = x2, x2 = t;\n    if (x4 > x5) t = e4, e4 = e5, e5 = t, t = x4, x4 = x5, x5 = t;\n    if (x1 > x3) t = e1, e1 = e3, e3 = t, t = x1, x1 = x3, x3 = t;\n    if (x2 > x3) t = e2, e2 = e3, e3 = t, t = x2, x2 = x3, x3 = t;\n    if (x1 > x4) t = e1, e1 = e4, e4 = t, t = x1, x1 = x4, x4 = t;\n    if (x3 > x4) t = e3, e3 = e4, e4 = t, t = x3, x3 = x4, x4 = t;\n    if (x2 > x5) t = e2, e2 = e5, e5 = t, t = x2, x2 = x5, x5 = t;\n    if (x2 > x3) t = e2, e2 = e3, e3 = t, t = x2, x2 = x3, x3 = t;\n    if (x4 > x5) t = e4, e4 = e5, e5 = t, t = x4, x4 = x5, x5 = t;\n\n    var pivot1 = e2, pivotValue1 = x2,\n        pivot2 = e4, pivotValue2 = x4;\n\n    // e2 and e4 have been saved in the pivot variables. They will be written\n    // back, once the partitioning is finished.\n    a[i1] = e1;\n    a[i2] = a[lo];\n    a[i3] = e3;\n    a[i4] = a[hi - 1];\n    a[i5] = e5;\n\n    var less = lo + 1,   // First element in the middle partition.\n        great = hi - 2;  // Last element in the middle partition.\n\n    // Note that for value comparison, <, <=, >= and > coerce to a primitive via\n    // Object.prototype.valueOf; == and === do not, so in order to be consistent\n    // with natural order (such as for Date objects), we must do two compares.\n    var pivotsEqual = pivotValue1 <= pivotValue2 && pivotValue1 >= pivotValue2;\n    if (pivotsEqual) {\n\n      // Degenerated case where the partitioning becomes a dutch national flag\n      // problem.\n      //\n      // [ |  < pivot  | == pivot | unpartitioned | > pivot  | ]\n      //  ^             ^          ^             ^            ^\n      // left         less         k           great         right\n      //\n      // a[left] and a[right] are undefined and are filled after the\n      // partitioning.\n      //\n      // Invariants:\n      //   1) for x in ]left, less[ : x < pivot.\n      //   2) for x in [less, k[ : x == pivot.\n      //   3) for x in ]great, right[ : x > pivot.\n      for (var k = less; k <= great; ++k) {\n        var ek = a[k], xk = f(ek);\n        if (xk < pivotValue1) {\n          if (k !== less) {\n            a[k] = a[less];\n            a[less] = ek;\n          }\n          ++less;\n        } else if (xk > pivotValue1) {\n\n          // Find the first element <= pivot in the range [k - 1, great] and\n          // put [:ek:] there. We know that such an element must exist:\n          // When k == less, then el3 (which is equal to pivot) lies in the\n          // interval. Otherwise a[k - 1] == pivot and the search stops at k-1.\n          // Note that in the latter case invariant 2 will be violated for a\n          // short amount of time. The invariant will be restored when the\n          // pivots are put into their final positions.\n          while (true) {\n            var greatValue = f(a[great]);\n            if (greatValue > pivotValue1) {\n              great--;\n              // This is the only location in the while-loop where a new\n              // iteration is started.\n              continue;\n            } else if (greatValue < pivotValue1) {\n              // Triple exchange.\n              a[k] = a[less];\n              a[less++] = a[great];\n              a[great--] = ek;\n              break;\n            } else {\n              a[k] = a[great];\n              a[great--] = ek;\n              // Note: if great < k then we will exit the outer loop and fix\n              // invariant 2 (which we just violated).\n              break;\n            }\n          }\n        }\n      }\n    } else {\n\n      // We partition the list into three parts:\n      //  1. < pivot1\n      //  2. >= pivot1 && <= pivot2\n      //  3. > pivot2\n      //\n      // During the loop we have:\n      // [ | < pivot1 | >= pivot1 && <= pivot2 | unpartitioned  | > pivot2  | ]\n      //  ^            ^                        ^              ^             ^\n      // left         less                     k              great        right\n      //\n      // a[left] and a[right] are undefined and are filled after the\n      // partitioning.\n      //\n      // Invariants:\n      //   1. for x in ]left, less[ : x < pivot1\n      //   2. for x in [less, k[ : pivot1 <= x && x <= pivot2\n      //   3. for x in ]great, right[ : x > pivot2\n      for (var k = less; k <= great; k++) {\n        var ek = a[k], xk = f(ek);\n        if (xk < pivotValue1) {\n          if (k !== less) {\n            a[k] = a[less];\n            a[less] = ek;\n          }\n          ++less;\n        } else {\n          if (xk > pivotValue2) {\n            while (true) {\n              var greatValue = f(a[great]);\n              if (greatValue > pivotValue2) {\n                great--;\n                if (great < k) break;\n                // This is the only location inside the loop where a new\n                // iteration is started.\n                continue;\n              } else {\n                // a[great] <= pivot2.\n                if (greatValue < pivotValue1) {\n                  // Triple exchange.\n                  a[k] = a[less];\n                  a[less++] = a[great];\n                  a[great--] = ek;\n                } else {\n                  // a[great] >= pivot1.\n                  a[k] = a[great];\n                  a[great--] = ek;\n                }\n                break;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // Move pivots into their final positions.\n    // We shrunk the list from both sides (a[left] and a[right] have\n    // meaningless values in them) and now we move elements from the first\n    // and third partition into these locations so that we can store the\n    // pivots.\n    a[lo] = a[less - 1];\n    a[less - 1] = pivot1;\n    a[hi - 1] = a[great + 1];\n    a[great + 1] = pivot2;\n\n    // The list is now partitioned into three partitions:\n    // [ < pivot1   | >= pivot1 && <= pivot2   |  > pivot2   ]\n    //  ^            ^                        ^             ^\n    // left         less                     great        right\n\n    // Recursive descent. (Don't include the pivot values.)\n    sort(a, lo, less - 1);\n    sort(a, great + 2, hi);\n\n    if (pivotsEqual) {\n      // All elements in the second partition are equal to the pivot. No\n      // need to sort them.\n      return a;\n    }\n\n    // In theory it should be enough to call _doSort recursively on the second\n    // partition.\n    // The Android source however removes the pivot elements from the recursive\n    // call if the second partition is too large (more than 2/3 of the list).\n    if (less < i1 && great > i5) {\n      var lessValue, greatValue;\n      while ((lessValue = f(a[less])) <= pivotValue1 && lessValue >= pivotValue1) ++less;\n      while ((greatValue = f(a[great])) <= pivotValue2 && greatValue >= pivotValue2) --great;\n\n      // Copy paste of the previous 3-way partitioning with adaptions.\n      //\n      // We partition the list into three parts:\n      //  1. == pivot1\n      //  2. > pivot1 && < pivot2\n      //  3. == pivot2\n      //\n      // During the loop we have:\n      // [ == pivot1 | > pivot1 && < pivot2 | unpartitioned  | == pivot2 ]\n      //              ^                      ^              ^\n      //            less                     k              great\n      //\n      // Invariants:\n      //   1. for x in [ *, less[ : x == pivot1\n      //   2. for x in [less, k[ : pivot1 < x && x < pivot2\n      //   3. for x in ]great, * ] : x == pivot2\n      for (var k = less; k <= great; k++) {\n        var ek = a[k], xk = f(ek);\n        if (xk <= pivotValue1 && xk >= pivotValue1) {\n          if (k !== less) {\n            a[k] = a[less];\n            a[less] = ek;\n          }\n          less++;\n        } else {\n          if (xk <= pivotValue2 && xk >= pivotValue2) {\n            while (true) {\n              var greatValue = f(a[great]);\n              if (greatValue <= pivotValue2 && greatValue >= pivotValue2) {\n                great--;\n                if (great < k) break;\n                // This is the only location inside the loop where a new\n                // iteration is started.\n                continue;\n              } else {\n                // a[great] < pivot2.\n                if (greatValue < pivotValue1) {\n                  // Triple exchange.\n                  a[k] = a[less];\n                  a[less++] = a[great];\n                  a[great--] = ek;\n                } else {\n                  // a[great] == pivot1.\n                  a[k] = a[great];\n                  a[great--] = ek;\n                }\n                break;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // The second partition has now been cleared of pivot elements and looks\n    // as follows:\n    // [  *  |  > pivot1 && < pivot2  | * ]\n    //        ^                      ^\n    //       less                  great\n    // Sort the second partition using recursive descent.\n\n    // The second partition looks as follows:\n    // [  *  |  >= pivot1 && <= pivot2  | * ]\n    //        ^                        ^\n    //       less                    great\n    // Simply sort it by recursive descent.\n\n    return sort(a, less, great + 1);\n  }\n\n  return sort;\n}\n\nvar quicksort_sizeThreshold = 32;\nvar crossfilter_array8 = crossfilter_arrayUntyped,\n    crossfilter_array16 = crossfilter_arrayUntyped,\n    crossfilter_array32 = crossfilter_arrayUntyped,\n    crossfilter_arrayLengthen = crossfilter_arrayLengthenUntyped,\n    crossfilter_arrayWiden = crossfilter_arrayWidenUntyped;\n\nif (typeof Uint8Array !== \"undefined\") {\n  crossfilter_array8 = function(n) { return new Uint8Array(n); };\n  crossfilter_array16 = function(n) { return new Uint16Array(n); };\n  crossfilter_array32 = function(n) { return new Uint32Array(n); };\n\n  crossfilter_arrayLengthen = function(array, length) {\n    if (array.length >= length) return array;\n    var copy = new array.constructor(length);\n    copy.set(array);\n    return copy;\n  };\n\n  crossfilter_arrayWiden = function(array, width) {\n    var copy;\n    switch (width) {\n      case 16: copy = crossfilter_array16(array.length); break;\n      case 32: copy = crossfilter_array32(array.length); break;\n      default: throw new Error(\"invalid array width!\");\n    }\n    copy.set(array);\n    return copy;\n  };\n}\n\nfunction crossfilter_arrayUntyped(n) {\n  var array = new Array(n), i = -1;\n  while (++i < n) array[i] = 0;\n  return array;\n}\n\nfunction crossfilter_arrayLengthenUntyped(array, length) {\n  var n = array.length;\n  while (n < length) array[n++] = 0;\n  return array;\n}\n\nfunction crossfilter_arrayWidenUntyped(array, width) {\n  if (width > 32) throw new Error(\"invalid array width!\");\n  return array;\n}\nfunction crossfilter_filterExact(bisect, value) {\n  return function(values) {\n    var n = values.length;\n    return [bisect.left(values, value, 0, n), bisect.right(values, value, 0, n)];\n  };\n}\n\nfunction crossfilter_filterRange(bisect, range) {\n  var min = range[0],\n      max = range[1];\n  return function(values) {\n    var n = values.length;\n    return [bisect.left(values, min, 0, n), bisect.left(values, max, 0, n)];\n  };\n}\n\nfunction crossfilter_filterAll(values) {\n  return [0, values.length];\n}\nfunction crossfilter_null() {\n  return null;\n}\nfunction crossfilter_zero() {\n  return 0;\n}\nfunction crossfilter_reduceIncrement(p) {\n  return p + 1;\n}\n\nfunction crossfilter_reduceDecrement(p) {\n  return p - 1;\n}\n\nfunction crossfilter_reduceAdd(f) {\n  return function(p, v) {\n    return p + +f(v);\n  };\n}\n\nfunction crossfilter_reduceSubtract(f) {\n  return function(p, v) {\n    return p - f(v);\n  };\n}\nexports.crossfilter = crossfilter;\n\nfunction crossfilter() {\n  var crossfilter = {\n    add: add,\n    remove: removeData,\n    dimension: dimension,\n    groupAll: groupAll,\n    size: size\n  };\n\n  var data = [], // the records\n      n = 0, // the number of records; data.length\n      m = 0, // a bit mask representing which dimensions are in use\n      M = 8, // number of dimensions that can fit in `filters`\n      filters = crossfilter_array8(0), // M bits per record; 1 is filtered out\n      filterListeners = [], // when the filters change\n      dataListeners = [], // when data is added\n      removeDataListeners = []; // when data is removed\n\n  // Adds the specified new records to this crossfilter.\n  function add(newData) {\n    var n0 = n,\n        n1 = newData.length;\n\n    // If there's actually new data to add…\n    // Merge the new data into the existing data.\n    // Lengthen the filter bitset to handle the new records.\n    // Notify listeners (dimensions and groups) that new data is available.\n    if (n1) {\n      data = data.concat(newData);\n      filters = crossfilter_arrayLengthen(filters, n += n1);\n      dataListeners.forEach(function(l) { l(newData, n0, n1); });\n    }\n\n    return crossfilter;\n  }\n\n  // Removes all records that match the current filters.\n  function removeData() {\n    var newIndex = crossfilter_index(n, n),\n        removed = [];\n    for (var i = 0, j = 0; i < n; ++i) {\n      if (filters[i]) newIndex[i] = j++;\n      else removed.push(i);\n    }\n\n    // Remove all matching records from groups.\n    filterListeners.forEach(function(l) { l(0, [], removed); });\n\n    // Update indexes.\n    removeDataListeners.forEach(function(l) { l(newIndex); });\n\n    // Remove old filters and data by overwriting.\n    for (var i = 0, j = 0, k; i < n; ++i) {\n      if (k = filters[i]) {\n        if (i !== j) filters[j] = k, data[j] = data[i];\n        ++j;\n      }\n    }\n    data.length = j;\n    while (n > j) filters[--n] = 0;\n  }\n\n  // Adds a new dimension with the specified value accessor function.\n  function dimension(value) {\n    var dimension = {\n      filter: filter,\n      filterExact: filterExact,\n      filterRange: filterRange,\n      filterFunction: filterFunction,\n      filterAll: filterAll,\n      top: top,\n      bottom: bottom,\n      group: group,\n      groupAll: groupAll,\n      dispose: dispose,\n      remove: dispose // for backwards-compatibility\n    };\n\n    var one = ~m & -~m, // lowest unset bit as mask, e.g., 00001000\n        zero = ~one, // inverted one, e.g., 11110111\n        values, // sorted, cached array\n        index, // value rank ↦ object id\n        newValues, // temporary array storing newly-added values\n        newIndex, // temporary array storing newly-added index\n        sort = quicksort_by(function(i) { return newValues[i]; }),\n        refilter = crossfilter_filterAll, // for recomputing filter\n        refilterFunction, // the custom filter function in use\n        indexListeners = [], // when data is added\n        dimensionGroups = [],\n        lo0 = 0,\n        hi0 = 0;\n\n    // Updating a dimension is a two-stage process. First, we must update the\n    // associated filters for the newly-added records. Once all dimensions have\n    // updated their filters, the groups are notified to update.\n    dataListeners.unshift(preAdd);\n    dataListeners.push(postAdd);\n\n    removeDataListeners.push(removeData);\n\n    // Incorporate any existing data into this dimension, and make sure that the\n    // filter bitset is wide enough to handle the new dimension.\n    m |= one;\n    if (M >= 32 ? !one : m & -(1 << M)) {\n      filters = crossfilter_arrayWiden(filters, M <<= 1);\n    }\n    preAdd(data, 0, n);\n    postAdd(data, 0, n);\n\n    // Incorporates the specified new records into this dimension.\n    // This function is responsible for updating filters, values, and index.\n    function preAdd(newData, n0, n1) {\n\n      // Permute new values into natural order using a sorted index.\n      newValues = newData.map(value);\n      newIndex = sort(crossfilter_range(n1), 0, n1);\n      newValues = permute(newValues, newIndex);\n\n      // Bisect newValues to determine which new records are selected.\n      var bounds = refilter(newValues), lo1 = bounds[0], hi1 = bounds[1], i;\n      if (refilterFunction) {\n        for (i = 0; i < n1; ++i) {\n          if (!refilterFunction(newValues[i], i)) filters[newIndex[i] + n0] |= one;\n        }\n      } else {\n        for (i = 0; i < lo1; ++i) filters[newIndex[i] + n0] |= one;\n        for (i = hi1; i < n1; ++i) filters[newIndex[i] + n0] |= one;\n      }\n\n      // If this dimension previously had no data, then we don't need to do the\n      // more expensive merge operation; use the new values and index as-is.\n      if (!n0) {\n        values = newValues;\n        index = newIndex;\n        lo0 = lo1;\n        hi0 = hi1;\n        return;\n      }\n\n      var oldValues = values,\n          oldIndex = index,\n          i0 = 0,\n          i1 = 0;\n\n      // Otherwise, create new arrays into which to merge new and old.\n      values = new Array(n);\n      index = crossfilter_index(n, n);\n\n      // Merge the old and new sorted values, and old and new index.\n      for (i = 0; i0 < n0 && i1 < n1; ++i) {\n        if (oldValues[i0] < newValues[i1]) {\n          values[i] = oldValues[i0];\n          index[i] = oldIndex[i0++];\n        } else {\n          values[i] = newValues[i1];\n          index[i] = newIndex[i1++] + n0;\n        }\n      }\n\n      // Add any remaining old values.\n      for (; i0 < n0; ++i0, ++i) {\n        values[i] = oldValues[i0];\n        index[i] = oldIndex[i0];\n      }\n\n      // Add any remaining new values.\n      for (; i1 < n1; ++i1, ++i) {\n        values[i] = newValues[i1];\n        index[i] = newIndex[i1] + n0;\n      }\n\n      // Bisect again to recompute lo0 and hi0.\n      bounds = refilter(values), lo0 = bounds[0], hi0 = bounds[1];\n    }\n\n    // When all filters have updated, notify index listeners of the new values.\n    function postAdd(newData, n0, n1) {\n      indexListeners.forEach(function(l) { l(newValues, newIndex, n0, n1); });\n      newValues = newIndex = null;\n    }\n\n    function removeData(reIndex) {\n      for (var i = 0, j = 0, k; i < n; ++i) {\n        if (filters[k = index[i]]) {\n          if (i !== j) values[j] = values[i];\n          index[j] = reIndex[k];\n          ++j;\n        }\n      }\n      values.length = j;\n      while (j < n) index[j++] = 0;\n\n      // Bisect again to recompute lo0 and hi0.\n      var bounds = refilter(values);\n      lo0 = bounds[0], hi0 = bounds[1];\n    }\n\n    // Updates the selected values based on the specified bounds [lo, hi].\n    // This implementation is used by all the public filter methods.\n    function filterIndexBounds(bounds) {\n      var lo1 = bounds[0],\n          hi1 = bounds[1];\n\n      if (refilterFunction) {\n        refilterFunction = null;\n        filterIndexFunction(function(d, i) { return lo1 <= i && i < hi1; });\n        lo0 = lo1;\n        hi0 = hi1;\n        return dimension;\n      }\n\n      var i,\n          j,\n          k,\n          added = [],\n          removed = [];\n\n      // Fast incremental update based on previous lo index.\n      if (lo1 < lo0) {\n        for (i = lo1, j = Math.min(lo0, hi1); i < j; ++i) {\n          filters[k = index[i]] ^= one;\n          added.push(k);\n        }\n      } else if (lo1 > lo0) {\n        for (i = lo0, j = Math.min(lo1, hi0); i < j; ++i) {\n          filters[k = index[i]] ^= one;\n          removed.push(k);\n        }\n      }\n\n      // Fast incremental update based on previous hi index.\n      if (hi1 > hi0) {\n        for (i = Math.max(lo1, hi0), j = hi1; i < j; ++i) {\n          filters[k = index[i]] ^= one;\n          added.push(k);\n        }\n      } else if (hi1 < hi0) {\n        for (i = Math.max(lo0, hi1), j = hi0; i < j; ++i) {\n          filters[k = index[i]] ^= one;\n          removed.push(k);\n        }\n      }\n\n      lo0 = lo1;\n      hi0 = hi1;\n      filterListeners.forEach(function(l) { l(one, added, removed); });\n      return dimension;\n    }\n\n    // Filters this dimension using the specified range, value, or null.\n    // If the range is null, this is equivalent to filterAll.\n    // If the range is an array, this is equivalent to filterRange.\n    // Otherwise, this is equivalent to filterExact.\n    function filter(range) {\n      return range == null\n          ? filterAll() : Array.isArray(range)\n          ? filterRange(range) : typeof range === \"function\"\n          ? filterFunction(range)\n          : filterExact(range);\n    }\n\n    // Filters this dimension to select the exact value.\n    function filterExact(value) {\n      return filterIndexBounds((refilter = crossfilter_filterExact(bisect, value))(values));\n    }\n\n    // Filters this dimension to select the specified range [lo, hi].\n    // The lower bound is inclusive, and the upper bound is exclusive.\n    function filterRange(range) {\n      return filterIndexBounds((refilter = crossfilter_filterRange(bisect, range))(values));\n    }\n\n    // Clears any filters on this dimension.\n    function filterAll() {\n      return filterIndexBounds((refilter = crossfilter_filterAll)(values));\n    }\n\n    // Filters this dimension using an arbitrary function.\n    function filterFunction(f) {\n      refilter = crossfilter_filterAll;\n\n      filterIndexFunction(refilterFunction = f);\n\n      lo0 = 0;\n      hi0 = n;\n\n      return dimension;\n    }\n\n    function filterIndexFunction(f) {\n      var i,\n          k,\n          x,\n          added = [],\n          removed = [];\n\n      for (i = 0; i < n; ++i) {\n        if (!(filters[k = index[i]] & one) ^ !!(x = f(values[i], i))) {\n          if (x) filters[k] &= zero, added.push(k);\n          else filters[k] |= one, removed.push(k);\n        }\n      }\n      filterListeners.forEach(function(l) { l(one, added, removed); });\n    }\n\n    // Returns the top K selected records based on this dimension's order.\n    // Note: observes this dimension's filter, unlike group and groupAll.\n    function top(k) {\n      var array = [],\n          i = hi0,\n          j;\n\n      while (--i >= lo0 && k > 0) {\n        if (!filters[j = index[i]]) {\n          array.push(data[j]);\n          --k;\n        }\n      }\n\n      return array;\n    }\n\n    // Returns the bottom K selected records based on this dimension's order.\n    // Note: observes this dimension's filter, unlike group and groupAll.\n    function bottom(k) {\n      var array = [],\n          i = lo0,\n          j;\n\n      while (i < hi0 && k > 0) {\n        if (!filters[j = index[i]]) {\n          array.push(data[j]);\n          --k;\n        }\n        i++;\n      }\n\n      return array;\n    }\n\n    // Adds a new group to this dimension, using the specified key function.\n    function group(key) {\n      var group = {\n        top: top,\n        all: all,\n        reduce: reduce,\n        reduceCount: reduceCount,\n        reduceSum: reduceSum,\n        order: order,\n        orderNatural: orderNatural,\n        size: size,\n        dispose: dispose,\n        remove: dispose // for backwards-compatibility\n      };\n\n      // Ensure that this group will be removed when the dimension is removed.\n      dimensionGroups.push(group);\n\n      var groups, // array of {key, value}\n          groupIndex, // object id ↦ group id\n          groupWidth = 8,\n          groupCapacity = crossfilter_capacity(groupWidth),\n          k = 0, // cardinality\n          select,\n          heap,\n          reduceAdd,\n          reduceRemove,\n          reduceInitial,\n          update = crossfilter_null,\n          reset = crossfilter_null,\n          resetNeeded = true,\n          groupAll = key === crossfilter_null;\n\n      if (arguments.length < 1) key = crossfilter_identity;\n\n      // The group listens to the crossfilter for when any dimension changes, so\n      // that it can update the associated reduce values. It must also listen to\n      // the parent dimension for when data is added, and compute new keys.\n      filterListeners.push(update);\n      indexListeners.push(add);\n      removeDataListeners.push(removeData);\n\n      // Incorporate any existing data into the grouping.\n      add(values, index, 0, n);\n\n      // Incorporates the specified new values into this group.\n      // This function is responsible for updating groups and groupIndex.\n      function add(newValues, newIndex, n0, n1) {\n        var oldGroups = groups,\n            reIndex = crossfilter_index(k, groupCapacity),\n            add = reduceAdd,\n            initial = reduceInitial,\n            k0 = k, // old cardinality\n            i0 = 0, // index of old group\n            i1 = 0, // index of new record\n            j, // object id\n            g0, // old group\n            x0, // old key\n            x1, // new key\n            g, // group to add\n            x; // key of group to add\n\n        // If a reset is needed, we don't need to update the reduce values.\n        if (resetNeeded) add = initial = crossfilter_null;\n\n        // Reset the new groups (k is a lower bound).\n        // Also, make sure that groupIndex exists and is long enough.\n        groups = new Array(k), k = 0;\n        groupIndex = k0 > 1 ? crossfilter_arrayLengthen(groupIndex, n) : crossfilter_index(n, groupCapacity);\n\n        // Get the first old key (x0 of g0), if it exists.\n        if (k0) x0 = (g0 = oldGroups[0]).key;\n\n        // Find the first new key (x1), skipping NaN keys.\n        while (i1 < n1 && !((x1 = key(newValues[i1])) >= x1)) ++i1;\n\n        // While new keys remain…\n        while (i1 < n1) {\n\n          // Determine the lesser of the two current keys; new and old.\n          // If there are no old keys remaining, then always add the new key.\n          if (g0 && x0 <= x1) {\n            g = g0, x = x0;\n\n            // Record the new index of the old group.\n            reIndex[i0] = k;\n\n            // Retrieve the next old key.\n            if (g0 = oldGroups[++i0]) x0 = g0.key;\n          } else {\n            g = {key: x1, value: initial()}, x = x1;\n          }\n\n          // Add the lesser group.\n          groups[k] = g;\n\n          // Add any selected records belonging to the added group, while\n          // advancing the new key and populating the associated group index.\n          while (!(x1 > x)) {\n            groupIndex[j = newIndex[i1] + n0] = k;\n            if (!(filters[j] & zero)) g.value = add(g.value, data[j]);\n            if (++i1 >= n1) break;\n            x1 = key(newValues[i1]);\n          }\n\n          groupIncrement();\n        }\n\n        // Add any remaining old groups that were greater than all new keys.\n        // No incremental reduce is needed; these groups have no new records.\n        // Also record the new index of the old group.\n        while (i0 < k0) {\n          groups[reIndex[i0] = k] = oldGroups[i0++];\n          groupIncrement();\n        }\n\n        // If we added any new groups before any old groups,\n        // update the group index of all the old records.\n        if (k > i0) for (i0 = 0; i0 < n0; ++i0) {\n          groupIndex[i0] = reIndex[groupIndex[i0]];\n        }\n\n        // Modify the update and reset behavior based on the cardinality.\n        // If the cardinality is less than or equal to one, then the groupIndex\n        // is not needed. If the cardinality is zero, then there are no records\n        // and therefore no groups to update or reset. Note that we also must\n        // change the registered listener to point to the new method.\n        j = filterListeners.indexOf(update);\n        if (k > 1) {\n          update = updateMany;\n          reset = resetMany;\n        } else {\n          if (!k && groupAll) {\n            k = 1;\n            groups = [{key: null, value: initial()}];\n          }\n          if (k === 1) {\n            update = updateOne;\n            reset = resetOne;\n          } else {\n            update = crossfilter_null;\n            reset = crossfilter_null;\n          }\n          groupIndex = null;\n        }\n        filterListeners[j] = update;\n\n        // Count the number of added groups,\n        // and widen the group index as needed.\n        function groupIncrement() {\n          if (++k === groupCapacity) {\n            reIndex = crossfilter_arrayWiden(reIndex, groupWidth <<= 1);\n            groupIndex = crossfilter_arrayWiden(groupIndex, groupWidth);\n            groupCapacity = crossfilter_capacity(groupWidth);\n          }\n        }\n      }\n\n      function removeData() {\n        if (k > 1) {\n          var oldK = k,\n              oldGroups = groups,\n              seenGroups = crossfilter_index(oldK, oldK);\n\n          // Filter out non-matches by copying matching group index entries to\n          // the beginning of the array.\n          for (var i = 0, j = 0; i < n; ++i) {\n            if (filters[i]) {\n              seenGroups[groupIndex[j] = groupIndex[i]] = 1;\n              ++j;\n            }\n          }\n\n          // Reassemble groups including only those groups that were referred\n          // to by matching group index entries.  Note the new group index in\n          // seenGroups.\n          groups = [], k = 0;\n          for (i = 0; i < oldK; ++i) {\n            if (seenGroups[i]) {\n              seenGroups[i] = k++;\n              groups.push(oldGroups[i]);\n            }\n          }\n\n          if (k > 1) {\n            // Reindex the group index using seenGroups to find the new index.\n            for (var i = 0; i < j; ++i) groupIndex[i] = seenGroups[groupIndex[i]];\n          } else {\n            groupIndex = null;\n          }\n          filterListeners[filterListeners.indexOf(update)] = k > 1\n              ? (reset = resetMany, update = updateMany)\n              : k === 1 ? (reset = resetOne, update = updateOne)\n              : reset = update = crossfilter_null;\n        } else if (k === 1) {\n          if (groupAll) return;\n          for (var i = 0; i < n; ++i) if (filters[i]) return;\n          groups = [], k = 0;\n          filterListeners[filterListeners.indexOf(update)] =\n          update = reset = crossfilter_null;\n        }\n      }\n\n      // Reduces the specified selected or deselected records.\n      // This function is only used when the cardinality is greater than 1.\n      function updateMany(filterOne, added, removed) {\n        if (filterOne === one || resetNeeded) return;\n\n        var i,\n            k,\n            n,\n            g;\n\n        // Add the added values.\n        for (i = 0, n = added.length; i < n; ++i) {\n          if (!(filters[k = added[i]] & zero)) {\n            g = groups[groupIndex[k]];\n            g.value = reduceAdd(g.value, data[k]);\n          }\n        }\n\n        // Remove the removed values.\n        for (i = 0, n = removed.length; i < n; ++i) {\n          if ((filters[k = removed[i]] & zero) === filterOne) {\n            g = groups[groupIndex[k]];\n            g.value = reduceRemove(g.value, data[k]);\n          }\n        }\n      }\n\n      // Reduces the specified selected or deselected records.\n      // This function is only used when the cardinality is 1.\n      function updateOne(filterOne, added, removed) {\n        if (filterOne === one || resetNeeded) return;\n\n        var i,\n            k,\n            n,\n            g = groups[0];\n\n        // Add the added values.\n        for (i = 0, n = added.length; i < n; ++i) {\n          if (!(filters[k = added[i]] & zero)) {\n            g.value = reduceAdd(g.value, data[k]);\n          }\n        }\n\n        // Remove the removed values.\n        for (i = 0, n = removed.length; i < n; ++i) {\n          if ((filters[k = removed[i]] & zero) === filterOne) {\n            g.value = reduceRemove(g.value, data[k]);\n          }\n        }\n      }\n\n      // Recomputes the group reduce values from scratch.\n      // This function is only used when the cardinality is greater than 1.\n      function resetMany() {\n        var i,\n            g;\n\n        // Reset all group values.\n        for (i = 0; i < k; ++i) {\n          groups[i].value = reduceInitial();\n        }\n\n        // Add any selected records.\n        for (i = 0; i < n; ++i) {\n          if (!(filters[i] & zero)) {\n            g = groups[groupIndex[i]];\n            g.value = reduceAdd(g.value, data[i]);\n          }\n        }\n      }\n\n      // Recomputes the group reduce values from scratch.\n      // This function is only used when the cardinality is 1.\n      function resetOne() {\n        var i,\n            g = groups[0];\n\n        // Reset the singleton group values.\n        g.value = reduceInitial();\n\n        // Add any selected records.\n        for (i = 0; i < n; ++i) {\n          if (!(filters[i] & zero)) {\n            g.value = reduceAdd(g.value, data[i]);\n          }\n        }\n      }\n\n      // Returns the array of group values, in the dimension's natural order.\n      function all() {\n        if (resetNeeded) reset(), resetNeeded = false;\n        return groups;\n      }\n\n      // Returns a new array containing the top K group values, in reduce order.\n      function top(k) {\n        var top = select(all(), 0, groups.length, k);\n        return heap.sort(top, 0, top.length);\n      }\n\n      // Sets the reduce behavior for this group to use the specified functions.\n      // This method lazily recomputes the reduce values, waiting until needed.\n      function reduce(add, remove, initial) {\n        reduceAdd = add;\n        reduceRemove = remove;\n        reduceInitial = initial;\n        resetNeeded = true;\n        return group;\n      }\n\n      // A convenience method for reducing by count.\n      function reduceCount() {\n        return reduce(crossfilter_reduceIncrement, crossfilter_reduceDecrement, crossfilter_zero);\n      }\n\n      // A convenience method for reducing by sum(value).\n      function reduceSum(value) {\n        return reduce(crossfilter_reduceAdd(value), crossfilter_reduceSubtract(value), crossfilter_zero);\n      }\n\n      // Sets the reduce order, using the specified accessor.\n      function order(value) {\n        select = heapselect_by(valueOf);\n        heap = heap_by(valueOf);\n        function valueOf(d) { return value(d.value); }\n        return group;\n      }\n\n      // A convenience method for natural ordering by reduce value.\n      function orderNatural() {\n        return order(crossfilter_identity);\n      }\n\n      // Returns the cardinality of this group, irrespective of any filters.\n      function size() {\n        return k;\n      }\n\n      // Removes this group and associated event listeners.\n      function dispose() {\n        var i = filterListeners.indexOf(update);\n        if (i >= 0) filterListeners.splice(i, 1);\n        i = indexListeners.indexOf(add);\n        if (i >= 0) indexListeners.splice(i, 1);\n        i = removeDataListeners.indexOf(removeData);\n        if (i >= 0) removeDataListeners.splice(i, 1);\n        return group;\n      }\n\n      return reduceCount().orderNatural();\n    }\n\n    // A convenience function for generating a singleton group.\n    function groupAll() {\n      var g = group(crossfilter_null), all = g.all;\n      delete g.all;\n      delete g.top;\n      delete g.order;\n      delete g.orderNatural;\n      delete g.size;\n      g.value = function() { return all()[0].value; };\n      return g;\n    }\n\n    // Removes this dimension and associated groups and event listeners.\n    function dispose() {\n      dimensionGroups.forEach(function(group) { group.dispose(); });\n      var i = dataListeners.indexOf(preAdd);\n      if (i >= 0) dataListeners.splice(i, 1);\n      i = dataListeners.indexOf(postAdd);\n      if (i >= 0) dataListeners.splice(i, 1);\n      i = removeDataListeners.indexOf(removeData);\n      if (i >= 0) removeDataListeners.splice(i, 1);\n      m &= zero;\n      return filterAll();\n    }\n\n    return dimension;\n  }\n\n  // A convenience method for groupAll on a dummy dimension.\n  // This implementation can be optimized since it always has cardinality 1.\n  function groupAll() {\n    var group = {\n      reduce: reduce,\n      reduceCount: reduceCount,\n      reduceSum: reduceSum,\n      value: value,\n      dispose: dispose,\n      remove: dispose // for backwards-compatibility\n    };\n\n    var reduceValue,\n        reduceAdd,\n        reduceRemove,\n        reduceInitial,\n        resetNeeded = true;\n\n    // The group listens to the crossfilter for when any dimension changes, so\n    // that it can update the reduce value. It must also listen to the parent\n    // dimension for when data is added.\n    filterListeners.push(update);\n    dataListeners.push(add);\n\n    // For consistency; actually a no-op since resetNeeded is true.\n    add(data, 0, n);\n\n    // Incorporates the specified new values into this group.\n    function add(newData, n0) {\n      var i;\n\n      if (resetNeeded) return;\n\n      // Add the added values.\n      for (i = n0; i < n; ++i) {\n        if (!filters[i]) {\n          reduceValue = reduceAdd(reduceValue, data[i]);\n        }\n      }\n    }\n\n    // Reduces the specified selected or deselected records.\n    function update(filterOne, added, removed) {\n      var i,\n          k,\n          n;\n\n      if (resetNeeded) return;\n\n      // Add the added values.\n      for (i = 0, n = added.length; i < n; ++i) {\n        if (!filters[k = added[i]]) {\n          reduceValue = reduceAdd(reduceValue, data[k]);\n        }\n      }\n\n      // Remove the removed values.\n      for (i = 0, n = removed.length; i < n; ++i) {\n        if (filters[k = removed[i]] === filterOne) {\n          reduceValue = reduceRemove(reduceValue, data[k]);\n        }\n      }\n    }\n\n    // Recomputes the group reduce value from scratch.\n    function reset() {\n      var i;\n\n      reduceValue = reduceInitial();\n\n      for (i = 0; i < n; ++i) {\n        if (!filters[i]) {\n          reduceValue = reduceAdd(reduceValue, data[i]);\n        }\n      }\n    }\n\n    // Sets the reduce behavior for this group to use the specified functions.\n    // This method lazily recomputes the reduce value, waiting until needed.\n    function reduce(add, remove, initial) {\n      reduceAdd = add;\n      reduceRemove = remove;\n      reduceInitial = initial;\n      resetNeeded = true;\n      return group;\n    }\n\n    // A convenience method for reducing by count.\n    function reduceCount() {\n      return reduce(crossfilter_reduceIncrement, crossfilter_reduceDecrement, crossfilter_zero);\n    }\n\n    // A convenience method for reducing by sum(value).\n    function reduceSum(value) {\n      return reduce(crossfilter_reduceAdd(value), crossfilter_reduceSubtract(value), crossfilter_zero);\n    }\n\n    // Returns the computed reduce value.\n    function value() {\n      if (resetNeeded) reset(), resetNeeded = false;\n      return reduceValue;\n    }\n\n    // Removes this group and associated event listeners.\n    function dispose() {\n      var i = filterListeners.indexOf(update);\n      if (i >= 0) filterListeners.splice(i);\n      i = dataListeners.indexOf(add);\n      if (i >= 0) dataListeners.splice(i);\n      return group;\n    }\n\n    return reduceCount();\n  }\n\n  // Returns the number of records in this crossfilter, irrespective of any filters.\n  function size() {\n    return n;\n  }\n\n  return arguments.length\n      ? add(arguments[0])\n      : crossfilter;\n}\n\n// Returns an array of size n, big enough to store ids up to m.\nfunction crossfilter_index(n, m) {\n  return (m < 0x101\n      ? crossfilter_array8 : m < 0x10001\n      ? crossfilter_array16\n      : crossfilter_array32)(n);\n}\n\n// Constructs a new array of size n, with sequential values from 0 to n - 1.\nfunction crossfilter_range(n) {\n  var range = crossfilter_index(n, n);\n  for (var i = -1; ++i < n;) range[i] = i;\n  return range;\n}\n\nfunction crossfilter_capacity(w) {\n  return w === 8\n      ? 0x100 : w === 16\n      ? 0x10000\n      : 0x100000000;\n}\n})(typeof exports !== 'undefined' && exports || this);\n","module.exports = require(\"./crossfilter\").crossfilter;\n","export default function (field) {\n    return function (d) {\n        return d[field];\n    };\n}\n","import {isArray} from 'd3-let';\nimport crossfilter from 'crossfilter';\n\nimport accessor from '../utils/accessor';\n\n\nexport default function DataFrame (data, store) {\n    if (isArray(data) || !arguments.length) data = {\n        store: store,\n        data: data || [],\n        dimensions: {}\n    };\n    Object.defineProperties(this, {\n        _inner: {\n            get () {\n                return data;\n            }\n        },\n        store: {\n            get () {\n                return data.store;\n            }\n        },\n        data: {\n            get () {\n                return data.data;\n            }\n        },\n        dimensions: {\n            get () {\n                return data.dimensions;\n            }\n        },\n        type: {\n            get () {\n                return 'dataframe';\n            }\n        }\n    });\n}\n\n\nDataFrame.prototype = {\n    constructor: DataFrame,\n\n    dataFrame () {\n        return this;\n    },\n\n    size () {\n        return this.data.length;\n    },\n\n    new (serie) {\n        if (isArray(serie)) return new DataFrame(serie, null, this.store);\n        else return new DataFrame(this._inner, serie);\n    },\n\n    cf () {\n        if (!this._inner.cf) this._inner.cf = crossfilter(this.data);\n        return this._inner.cf;\n    },\n\n    //  Create and return a crossfilter dimension\n    //  If value is not specified, keepExisting is by default true, and any\n    //  existing dimension name is recycled.\n    dimension (name, value, keepExisting) {\n        if (arguments.length === 1) keepExisting = true;\n        var current = this.dimensions[name];\n        if (current) {\n            if (keepExisting) return current;\n            current.dispose();\n        }\n        if (!value) value = accessor(name);\n        this.dimensions[name] = this.cf().dimension(value);\n        return this.dimensions[name];\n    },\n\n    //  Sort a dataframe by name and return the top values or all of them if\n    //  top is not defined. The name can be a function.\n    sortby (name, top) {\n        return this.new(this.dimension(name).top(top || Infinity));\n    },\n\n    // return a new dataframe by pivoting values for field name\n    pivot (dimension, key, value, total) {\n        var group = this.dimension(dimension).group();\n        if (!total) total = 'total';\n        return this.new(group.reduce(pivoter(1), pivoter(-1), Object).all().map(d => d.value));\n\n        function pivoter (m) {\n            let pk, pv;\n            return function (o, record) {\n                pk = ''+record[key];\n                pv = m*record[value];\n                o[dimension] = record[dimension];\n                if (pk in o) o[pk] += pv;\n                else o[pk] = pv;\n                if (total in o) o[total] += pv;\n                else o[total] = pv;\n                return o;\n            };\n        }\n    },\n\n    add () {\n        //this._inner.cf.add(data);\n    },\n\n    map (mapper) {\n        return this.new(this.data.map(mapper));\n    }\n};\n","import {isArray, isObject} from 'd3-let';\n\n//\n//  Array DataSource\n//  ====================\n//\n//  Data is given in an array, pkain & simple\nexport default {\n    schema: {\n        type: \"object\",\n        description: 'array of data',\n        properties: {\n            data: {\n                type: \"array\",\n                description: \"array of data\"\n            }\n        }\n    },\n\n    initialise (config) {\n        this._data = config.data;\n    },\n\n    getConfig (config) {\n        if (isArray(config)) return {data: config};\n        else if (isObject(config) && isArray(config.data)) return config;\n    },\n\n    getData () {\n        return this.asFrame(this._data);\n    }\n};\n","import {viewProviders} from 'd3-view';\n\nconst prefix = '[d3-data-source]';\n\n\nexport default function (msg) {\n    viewProviders.logger.warn(`${prefix} ${msg}`);\n}\n","import {isString} from 'd3-let';\n\n\nconst schemes = ['http', 'https', 'ws', 'wss'];\n\n\nexport default function (value) {\n    return isString(value) && schemes.indexOf(value.split('://')[0]) > -1;\n}\n","import {csvParse, tsvParse} from 'd3-dsv';\nimport {set} from 'd3-collection';\nimport {isObject} from 'd3-let';\nimport {viewProviders} from 'd3-view';\n\nimport warn from './warn';\nimport isUrl from '../utils/isurl';\n\nconst CSV = set(['text/plain', 'text/csv', 'application/vnd.ms-excel']);\n//\n//  Remote dataSource\n//  ===================\n//\n//  handle Json and csv data\nexport default {\n    schema: {\n        type: \"object\",\n        description: 'Remote data resource',\n        properties: {\n            url: {\n                type: \"string\",\n                description: \"url for fetching data\"\n            }\n        }\n    },\n\n    getConfig (config) {\n        if (isUrl(config)) return {url: config};\n        else if (isObject(config) && config.url)\n            return config;\n    },\n\n    initialise (config) {\n        this.url = config.url;\n    },\n\n    getData () {\n        var fetch = viewProviders.fetch,\n            self = this;\n        if (!fetch) {\n            warn('fetch provider not available, cannot submit');\n            return [];\n        }\n        return fetch(this.url).then(parse).then(data => self.asFrame(data));\n    }\n};\n\n\nfunction parse (response) {\n    var ct = (response.headers.get('content-type') || '').split(';')[0];\n    if (CSV.has(ct))\n        return response.text().then(csvParse);\n    else if (ct === 'text/tab-separated-values')\n        return response.text().then(tsvParse);\n    else if (ct === 'application/json')\n        return response.json();\n    else {\n        warn(`Cannot load content type '${ct}'`);\n        return [];\n    }\n}\n","import {map} from 'd3-collection';\nimport {isArray, isObject, isPromise, assign} from 'd3-let';\nimport {viewExpression} from 'd3-view';\n\nimport DataFrame from './dataframe';\n//\n//  A composite dataSource\n//  ===================\n//\n//  A composite data source has the source attribute with the name of one\n//  or more data sets to use as the source for this data set.\n//  The source property is useful in combination with a transform pipeline\n//  to derive new data.\n//  If string-valued, indicates the name of the source data set.\n//  If array-valued, specifies a collection of data source names that\n//  should be merged (unioned) together.\nexport default {\n    schema: {\n        type: \"object\",\n        description: 'Composite data source for combining data together',\n        properties: {\n            source: {\n                type: \"array\",\n                description: \"Array of data sources keys\",\n                item: {\n                    type: \"string\"\n                }\n            },\n            expression: {\n                type: \"string\",\n                description: \"expression to evaluate, must return a data frame or a Promise\"\n            }\n        }\n    },\n\n    initialise (config) {\n        this.source = config.source;\n        this.expression = config.expression ? viewExpression(config.expression) : null;\n    },\n\n    getConfig (config) {\n        if (isObject(config) && config.source) {\n            if (!isArray(config.source)) config.source = [config.source];\n            return config;\n        }\n    },\n\n    getData (context) {\n        var store = this.store,\n            sources = this.source,\n            expression = this.expression,\n            self = this;\n\n        return Promise.all(sources.map(source => {\n             return store.getData(source, context);\n        })).then(frames => {\n            let fc;\n            if (frames.length === 1) fc = frames[0];\n            else if (self.config.merge) fc = self.mergeFrames(frames);\n            else {\n                fc = new FrameCollection(store);\n                frames.forEach((frame, index) => {\n                    fc.frames.set(sources[index], frame);\n                });\n            }\n            if (expression) {\n                var model = store.model.$child(assign({}, context, {frame: fc}));\n                fc = expression.eval(model);\n            }\n            if (isPromise(fc)) return fc.then(data => self.asFrame(data));\n            else return self.asFrame(fc);\n        });\n    },\n\n    // TODO: implement frame merging\n    mergeFrames (frames) {\n        return frames[0];\n    }\n};\n\n\nfunction FrameCollection (store) {\n    this.frames = map();\n    Object.defineProperties(this, {\n        store: {\n            get () {\n                return store;\n            }\n        },\n        type: {\n            get () {\n                return 'frameCollection';\n            }\n        }\n    });\n}\n\nFrameCollection.prototype = {\n\n    new (data) {\n        return new DataFrame(data, this.store);\n    },\n\n    dataFrame () {\n        var frames = this.frames.values();\n        for (let i=0; i<frames.length; ++i) {\n            if (frames[i].type === 'dataframe') return frames[i];\n        }\n    }\n};\n","import {isObject, isPromise} from 'd3-let';\nimport {viewExpression} from 'd3-view';\n\n\nexport default {\n    schema: {\n        type: \"object\",\n        description: 'Expression to evaluate by the data store',\n        properties: {\n            expression: {\n                type: \"string\",\n                description: \"expression to evaluate, must return a data frame or a Promise\"\n            }\n        }\n    },\n\n    initialise (config) {\n        this.expression = viewExpression(config.expression);\n    },\n\n    getConfig (config) {\n        if (isObject(config) && config.expression)\n            return config;\n    },\n\n    getData (context) {\n        var self = this,\n            model = this.store.model.$child(context),\n            result = this.expression.eval(model);\n        if (isPromise(result)) return result.then(data => self.asFrame(data));\n        else return self.asFrame(result);\n    }\n};\n","import {viewProviders} from 'd3-view';\n\n\nexport default function (options) {\n    const\n        transform = options.transform,\n        schema = options.schema || {},\n        jsonValidator = viewProviders.jsonValidator ? viewProviders.jsonValidator(options.schema) : dummyValidator;\n    if (!schema.type) schema.type = 'object';\n\n    function transformFactory (config) {\n        const valid = jsonValidator.validate(config);\n\n        if (!valid) return jsonValidator.logError();\n\n        return doTransform;\n\n        function doTransform (frame) {\n            return transform(frame, config);\n        }\n    }\n\n    transformFactory.schema = schema;\n\n    return transformFactory;\n}\n\n\nconst dummyValidator = {\n    validate () {\n        return true;\n    }\n};\n","import {viewExpression} from 'd3-view';\n\nimport transformFactory from './base';\n\n//\n// Create a groupby transform from a config object\nexport default transformFactory ({\n    schema: {\n        description: \"The filter transform removes objects from a data frame based on a provided filter expression\",\n        properties: {\n            expr: {\n                type: \"string\"\n            }\n        },\n        required: [\"expr\"]\n    },\n    transform (frame, config) {\n        var expr = viewExpression(config.expr);\n        return frame.data.reduce((data, d, index) => {\n            if (expr.safeEval({d: d, index: index, frame: frame})) data.push(d);\n            return data;\n        }, []);\n    }\n});\n","import {viewProviders} from 'd3-view';\n\nconst prefix = '[d3-visualize]';\n\n\nexport default function (msg, err) {\n    viewProviders.logger.warn(`${prefix} ${msg}`);\n    if (err) viewProviders.logger.error(err.stack);\n}\n","export default function (size, value) {\n    var a = new Array(size);\n    a.fill(value);\n    return a;\n}\n","import {map} from 'd3-collection';\nimport {isArray, isString} from 'd3-let';\nimport {max, min, sum, mean, median, variance, deviation} from 'd3-array';\n\nimport warn from '../utils/warn';\nimport fillArray from '../utils/fillarray';\n\nexport const operations = map({\n    count,\n    max,\n    min,\n    sum,\n    mean,\n    median,\n    variance,\n    deviation\n});\n\nexport const scalar_operations = map({\n    count (agg) {return agg + 1;},\n    sum (agg, v) {return agg + v;},\n    max: Math.max,\n    min: Math.min\n});\n\n\nfunction count (array, accessor) {\n    return array.reduce((v, d) => {\n        if (accessor(d) !== undefined) v += 1;\n        return v;\n    }, 0);\n}\n//\n// The aggregate transform groups and summarizes an imput data stream to\n// produce a derived output data stream. Aggregate transforms can be used\n// to compute counts, sums, averages and other descriptive statistics over\n// groups of data objects.\nexport default function (config) {\n    let fields = config.fields,\n        ops = config.ops,\n        as = config.as,\n        groupby = config.groupby;\n\n    if (!fields && !ops) return countAll;\n\n    if (!isArray(fields)) return warn('Aggregate transforms expect an array of fields');\n    if (!ops) ops = 'count';\n    if (isString(ops)) ops = fillArray(fields.length, ops);\n    if (!isArray(ops)) return warn('Aggregate transform expects an array of ops');\n    if (ops.length < fields.length) warn('Aggregate transforms expects an ops array with same length as fields');\n    if (!as) as = [];\n    if (!isArray(as)) return warn('Aggregate transform expects an array of as fields');\n    return aggregate;\n\n\n    function countAll (frame) {\n        let key;\n        return frame.data.reduce((o, d) => {\n            for (key in d) {\n                if (key in o) o[key] += 1;\n                else o[key] = 1;\n            }\n            return o;\n        }, {});\n    }\n\n    function aggregate (frame) {\n        var data = [],\n            name, op;\n\n        if (groupby) return group(frame);\n\n        fields.forEach((field, index) => {\n            name = ops[index];\n            op = count;\n            if (name) {\n                op = operations.get(name);\n                if (!op) {\n                    op = count;\n                    warn(`Operation ${ops[index]} is not supported, use count`);\n                }\n            }\n            data.push({\n                label: as[index] || field,\n                data: op(frame.data, d => d[field])\n            });\n        });\n        return data;\n    }\n\n    //\n    //  Perform aggregation with a set of data fields to group by\n    function group (frame) {\n        let v, name, op;\n        const entries = fields.map((field, index) => {\n            name = ops[index];\n            op = scalar_operations.get('count');\n            if (name) {\n                op = scalar_operations.get(name);\n                if (!op) {\n                    op = scalar_operations.get('count');\n                    warn(`Operation ${name} is not supported, use count`);\n                }\n            }\n            return {\n                field: field,\n                as: as[index] || field,\n                op: op\n            };\n        });\n\n        return frame.dimension(groupby).group().reduce((o, record) => {\n            return entries.reduce((oo, entry) => {\n                v = 0;\n                if (entry.as in oo) v = oo[entry.as];\n                oo[entry.as] = entry.op(v, record[entry.field]);\n                return oo;\n            }, o);\n        }, null, Object).all().map(d => {\n            d.value[groupby] = d.key;\n            return d.value;\n        });\n    }\n}\n","import {isArray, isString} from 'd3-let';\nimport warn from '../utils/warn';\n\n//\n// Apply a cross filter to an array of fields\nexport default function (config) {\n    let fields = config.fields,\n        query = config.query;\n\n    if (!isArray(fields)) return warn('crossfilter transform expects an array of fields');\n    if (!isArray(query)) return warn('crossfilter transform expects an array of query');\n    if (query.length != fields.length) return warn('crossfilter transform expects an query array with same length as fields');\n\n    return crossfilter;\n\n    function crossfilter (frame) {\n        let dim, q;\n        fields.forEach((field, index) => {\n            q = query[index];\n            if (isString(q)) q = frame.store.eval(q);\n            dim = frame.dimension(field).filterAll();\n            if (q) dim.filter(q);\n        });\n        if (dim) return frame.new(dim.top(Infinity));\n        return frame;\n    }\n}\n","import warn from '../utils/warn';\n\n//\n// Create a groupby transform from a config object\nexport default function (config) {\n    var sortby = config.sortby,\n        groupby = config.groupby;\n\n    if (!sortby) warn('timeseries transform requires a \"sortby\" entry');\n\n    return timeseries;\n\n    function timeseries (frame) {\n        if (sortby) {\n            if (groupby) {\n                var dim = frame.dimension(groupby),\n                    groups = dim.group().top(Infinity),\n                    newframe = frame.new([]),\n                    tmp;\n                groups.forEach(group => {\n                    tmp = frame.new(dim.filterExact(group.key).top(Infinity)).dimension(sortby).group().top(Infinity);\n                    newframe.series.set(group.key, frame.new(tmp).dimension('key').top(Infinity));\n                });\n                return newframe;\n            } else {\n                return frame.new(frame.dimension(sortby).top(Infinity));\n            }\n        }\n        return frame;\n    }\n}\n","//\n//  Global options for visuals\n//  ============================\n//\nexport default {\n    // visual data source\n    dataSource: null,\n    //\n    size: {\n        // width set by the parent element\n        width: null,\n        // height set as percentage of width\n        height: '70%'\n    }\n};\n","//\n//  Map Fields Transform\n//  ========================\n//\n//  Convert a set af fields to a different data type\n//\nimport {map} from 'd3-collection';\nimport {isString} from 'd3-let';\nimport {utcParse} from 'd3-time-format';\n\nimport transformFactory from './base';\nimport warn from '../utils/warn';\nimport globalOptions from '../core/options';\n\n\nglobalOptions.dateFormat = '%d-%b-%y';\n\n\nconst converters = {\n    date (entry) {\n        return utcParse(entry.dateFormat || globalOptions.dateFormat);\n    },\n    number () {\n        return parseFloat;\n    }\n};\n\nexport default transformFactory({\n    shema: {\n        description: \"map a field values into another type\",\n        properties: {\n            fields: {\n                type: \"object\"\n            },\n            dateFormat: {\n                type: \"string\"\n            }\n        },\n        required: [\"fields\"]\n    },\n    transform (frame, config) {\n        var fields = map(config.fields),\n            mappers = [];\n        let i, converter;\n\n        fields.each((entry, key) => {\n            if (isString(entry)) entry = {type: entry};\n            converter = converters[entry.type];\n            if (!converter) warn(`Cannot convert field ${key} to type ${entry.type}`);\n            else mappers.push([key, converter(entry)]);\n        });\n\n        if (mappers.length)\n            frame = frame.map(d => {\n                for (i=0; i<mappers.length; ++i)\n                    d[mappers[i][0]] = mappers[i][1](d[mappers[i][0]]);\n                return d;\n            });\n\n        return frame;\n    }\n});\n","export default function (value, min, max) {\n    if (max !== undefined) value = Math.min(value, max);\n    return min === undefined ? value : Math.max(value, min);\n}\n","import transformFactory from './base';\nimport minmax from '../utils/minmax';\n\nconst\n    DEFAULT_METHOD = 'ema',   // or sma simple moving average\n    DEFAULT_PERIOD = 10,\n    DEFAULT_ALPHA = 0.5,\n    MAXALPHA = 0.999999;\n\n//\n// Exponential moving average transform\n// Useful for smoothing out volatile timeseries\nexport default transformFactory({\n    shema: {\n        description: \"Create moving average series from existing one. The new series override the existing one unless the as array is provided\",\n        properties: {\n            method: {\n                type: \"string\"\n            },\n            alpha: {\n                type: \"number\"\n            },\n            period: {\n                type: \"number\"\n            },\n            fields: {\n                type: \"array\",\n                items: {\n                    type: \"string\"\n                }\n            },\n            as: {\n                type: \"array\",\n                items: {\n                    type: \"string\"\n                }\n            }\n        },\n        required: [\"fields\"]\n    },\n    transform (frame, config) {\n        const as = config.as || [],\n            method = config.method || DEFAULT_METHOD;\n        let fieldto, y, s;\n\n        config.fields.forEach((field, index) => {\n            fieldto = as[index] || field;\n            //\n            // Simple Moving Average\n            if (method === 'sma') {\n                const period = Math.max(config.period || DEFAULT_PERIOD, 1),\n                    cumulate = [],\n                    buffer = [];\n                frame.data.forEach((d, index) => {\n                    y = d[field];\n                    if (cumulate.length === period) y -= buffer.splice(0, 1)[0];\n                    buffer.push(y);\n                    if (index) y += cumulate[cumulate.length-1];\n                    cumulate.push(y);\n                    d[fieldto] = y/cumulate.length;\n                });\n            //\n            // Exponential moving average\n            } else {\n                const alpha = minmax(config.alpha || DEFAULT_ALPHA, 1-MAXALPHA, MAXALPHA);\n\n                frame.data.forEach((d, index) => {\n                    y = d[field];\n                    if (!index) s = y;\n                    else s = alpha*s + (1-alpha)*y;\n                    d[fieldto] = s;\n                });\n            }\n        });\n    }\n});\n","import {sum} from 'd3-array';\n\nimport accessor from '../utils/accessor';\nimport transformFactory from './base';\n\n//\n// Create a groupby transform from a config object\nexport default transformFactory ({\n    schema: {\n        description: \"Group entries which are below a given aggregate cutoff\",\n        properties: {\n            field: {\n                type: \"string\"\n            },\n            cutoff: {\n                type: \"number\"\n            }\n        },\n        required: [\"field\", \"cutoff\"]\n    },\n    transform (frame, config) {\n        var get = accessor(config.field),\n            total = sum(frame.data, get);\n        let children = [],\n            aggregate = 0;\n        return frame.dimension(config.field).bottom(Infinity).reduce((data, d) => {\n            aggregate += get(d);\n            if (aggregate/total < config.cutoff) children.push(d);\n            else if (children) {\n                children.push(d);\n                d = {\n                    label: 'other',\n                    children: children\n                };\n                d[config.field] = aggregate;\n                children = null;\n                data.push(d);\n            } else\n                data.push(d);\n            return data;\n        }, []);\n    }\n});\n","import {assign} from 'd3-let';\n\nimport transformFactory from './base';\n\n//\n// First order difference along a dimension for a group of fields\nexport default transformFactory ({\n    schema: {\n        description: \"Perfrom a difference for a group of fields along a dimension. It is possible to perform a difference for different groups\",\n        properties: {\n            dimension: {\n                type: \"string\"\n            },\n            period: {\n                type: \"integer\",\n                minimum: 1\n            },\n            fields: {\n                type: \"array\",\n                items: {\n                    type: \"string\"\n                }\n            },\n            as: {\n                type: \"array\",\n                items: {\n                    type: \"string\"\n                }\n            },\n            groupby: {\n                type: \"string\"\n            }\n        },\n        required: [\"dimension\", \"fields\"]\n    },\n    transform (frame, config) {\n        var as = config.as || [],\n            period = config.period || 1,\n            data = [];\n\n        if (config.groupby) {\n            var g = frame.dimension(config.groupby),\n                groups = g.group().all();\n            groups.forEach(d => difference(frame.new(g.filterAll().filter(d.key).top(Infinity))));\n        } else {\n            difference(frame.new());\n        }\n\n        return data;\n\n        function difference (df) {\n            var dim = df.dimension(config.dimension),\n                zeros = config.fields.reduce((z, field) => {z[field] = 0; return z;}, {}),\n                stack = [];\n            let dd, prev;\n\n            dim.top(Infinity).forEach((d, index) => {\n                dd = assign({}, d);\n                stack.push(d);\n                if (index > period) prev = stack.splice(0, 1)[0];\n                else prev = zeros;\n                config.fields.forEach((field, index) => {\n                    d[as[index] || field] = d[field] - prev[field];\n                });\n                data.push(dd);\n            });\n        }\n    }\n});\n","// Collection of transforms\nimport {map} from 'd3-collection';\nimport {isArray, isPromise, assign} from 'd3-let';\n\nimport transform from './base';\nimport filter from './filter';\nimport aggregate from './aggregate';\nimport crossfilter from './crossfilter';\nimport timeseries from './timeseries';\nimport mapfields from './mapfields';\nimport movingaverage from './moving-average';\nimport groupsmall from './group-small';\nimport diff from './diff';\n\n//\n//  transforms Store\nexport default assign(map({\n    filter,\n    aggregate,\n    mapfields,\n    timeseries,\n    crossfilter,\n    movingaverage,\n    groupsmall,\n    diff\n}), {\n    add (name, o) {\n        this.set(name, transform(o));\n    }\n});\n\n\n//  Apply data transforms to a series\n//  Allow for asynchronous transforms\nexport function applyTransforms (frame, transforms) {\n    if (!transforms) return frame;\n    return applyt(frame, transforms.slice());\n}\n\nfunction applyt (frame, transforms, res) {\n    if (isArray(res)) frame = frame.new(res);\n    else if (res) frame = res;\n    if (transforms.length) {\n        var transform = transforms.splice(0, 1)[0],\n            ts = transform ? transform(frame) : null;\n        if (isPromise(ts)) return ts.then(res => applyt(frame, transforms, res));\n        else return applyt(frame, transforms, ts);\n    }\n    return frame;\n}\n","import {map} from 'd3-collection';\nimport {dispatch} from 'd3-dispatch';\nimport {pop, isArray, assign} from 'd3-let';\n\nimport DataFrame from './dataframe';\nimport transformStore, {applyTransforms} from '../transforms/index';\nimport warn from '../utils/warn';\n\nconst dataEvents = dispatch('init', 'data');\n\n\n//\n//  DataSource prototype\n//  ======================\nconst dataSourcePrototype = {\n    schema: {properties: {}},\n    // get the config\n    // This method is used by the prototype\n    // to check if the config object is a valid one\n    getConfig () {},\n\n    // initialise the data source with a config object\n    initialise () {},\n\n    getData () {},\n\n    //\n    addTransforms (transforms) {\n        var self = this;\n        let t;\n        if (!transforms) return;\n        if (!isArray(transforms)) transforms = [transforms];\n        transforms.forEach(transform => {\n            t = transformStore.get(transform.type);\n            if (!t) warn(`Transform type \"${transform.type}\" not known`);\n            else self.transforms.push(t(transform));\n        });\n    },\n    //\n    // given a data object returns a Cross filter object\n    asFrame (data) {\n        if (data && !isArray(data) && data.constructor !== DataFrame) data = [data];\n        if (isArray(data)) {\n            data = data.map(entry => {\n                if (entry.constructor !== Object) entry = {data: entry};\n                return entry;\n            });\n            data = new DataFrame(data, this.store);\n        }\n        return applyTransforms(data, this.transforms);\n    }\n};\n\n\n// DataSource container\nexport default assign(map(), {\n    events: dataEvents,\n\n    add (type, source) {\n\n        // DataSource constructor\n        function DataSource (config, store) {\n            initDataSource(this, type, config, store);\n        }\n\n        DataSource.prototype = assign({}, dataSourcePrototype, source);\n        DataSource.prototype.constructor = DataSource;\n\n        this.set(type, DataSource);\n        return DataSource;\n    },\n\n    // Create a new DataSource\n    create (config, store) {\n        var sources = this.values(),\n            cfg;\n        for (var i=0; i<sources.length; ++i) {\n            cfg = sources[i].prototype.getConfig(config);\n            if (cfg) return new sources[i](cfg, store);\n        }\n    }\n});\n\n\nfunction initDataSource(dataSource, type, config, store) {\n\n    var name = store.dataName(pop(config, 'name')),\n        transforms = [];\n\n    // store.natural = cf.dimension(d => d._id);\n\n    Object.defineProperties(dataSource, {\n        name: {\n            get () {\n                return name;\n            }\n        },\n        store: {\n            get () {\n                return store;\n            }\n        },\n        type: {\n            get () {\n                return type;\n            }\n        },\n        // transforms to apply to data\n        transforms: {\n            get () {\n                return transforms;\n            }\n        },\n        config: {\n            get () {\n                return config;\n            }\n        }\n    });\n\n    dataSource.initialise(config);\n    dataSource.addTransforms(pop(config, 'transforms'));\n    store.sources.set(name, dataSource);\n    dataEvents.call('init', undefined, dataSource);\n}\n","import {map} from 'd3-collection';\nimport {isArray, isString, isPromise, isFunction, assign} from 'd3-let';\nimport {viewExpression, viewModel} from 'd3-view';\n\nimport array from './array';\nimport remote from './remote';\nimport composite from './composite';\nimport expression from './expression';\nimport dataSources from './sources';\nimport transformStore from '../transforms/index';\n\n\ndataSources.add('array', array);\ndataSources.add('remote', remote);\ndataSources.add('composite', composite);\ndataSources.add('expression', expression);\n\n//\n//  DataStore\n//  ==============\n//\n//  Map names to datasets\n//  Individual data sets are assumed to contain a collection of records\n//  (or “rows”), which may contain any number of named data\n//  attributes (fields, or “columns”).\n//  Records are modeled using standard JavaScript objects.\nexport default function DataStore(model) {\n    var sources = map();\n\n    Object.defineProperties(this, {\n        sources: {\n            get () {\n                return sources;\n            }\n        }\n    });\n\n    // transforms function\n    this.transforms = assign({}, transformStore);\n    this.dataCount = 0;\n    this.model = (model && isFunction(model.$child)) ? model : viewModel(model);\n}\n\n\nDataStore.prototype = {\n    size () {\n        return this.sources.size();\n    },\n\n    // Add a new serie from a data source\n    addSources (config) {\n        //\n        // data is a string, it must be already registered with store\n        if (isString(config)) config = {source: config};\n\n        if (isArray(config)) {\n            var self = this;\n            return config.map(cfg => {\n                return dataSources.create(cfg, self);\n            });\n        } else if (config) {\n            return dataSources.create(config, this);\n        }\n    },\n\n    addTransforms (transforms) {\n        assign(this.transforms, transforms);\n    },\n\n    // set, get or remove a data source\n    source (name, source) {\n        if (arguments.length === 1) return this.sources.get(name);\n        if (source === null) {\n            var p = this.sources.get(name);\n            this.sources.remove(name);\n            return p;\n        }\n        this.sources.set(name, source);\n        return this;\n    },\n\n    clearCache () {\n        this.sources.each(ds => {\n            delete ds.cachedFrame;\n        });\n    },\n\n    // get data from a source\n    getData (source, context) {\n        var ds = this.sources.get(source);\n        if (!ds) throw new Error(`Data source ${source} not available`);\n        if (ds.cachedFrame) return Promise.resolve(ds.cachedFrame);\n        var data = ds.getData(context);\n        if (!isPromise(data)) data = Promise.resolve(data);\n        return data.then(frame => {\n            if (ds.config.cache) ds.cachedFrame = frame;\n            return frame;\n        });\n    },\n\n    eval (expr, context) {\n        let ctx = this.model.$child(context);\n        ctx.dataStore = this;\n        return viewExpression(expr).safeEval(ctx);\n    },\n\n    dataName (name) {\n        this.dataCount++;\n        if (name) return '' + name;\n        var def = this.source('default');\n        if (!def) return 'default';\n        return `source${this.dataCount}`;\n    }\n};\n","export default function (x, n) {\n    return n ? Math.round(x * (n = Math.pow(10, n))) / n : Math.round(x);\n}\n","import {select} from 'd3-selection';\n\nimport round from './round';\nimport minmax from './minmax';\n\n\nconst WIDTH = 400;\nconst HEIGHT = '75%';\n\n\nexport function sizeValue (value, size) {\n    if (typeof(value) === \"string\" && value.indexOf('%') === value.length-1)\n        return round(0.01*parseFloat(value)*size);\n    return +value;\n}\n\n// Internal function for evaluating paper dom size\nexport function getSize (element, options) {\n    var size = {\n        width: options.width,\n        height: options.height\n    };\n\n    if (!size.width) {\n        size.width = getWidth(element);\n        if (size.width)\n            size.widthElement = getWidthElement(element);\n        else\n            size.width = WIDTH;\n    }\n\n    if (!size.height) {\n        size.height = getHeight(element);\n        if (size.height)\n            size.heightElement = getHeightElement(element);\n        else\n            size.height = HEIGHT;\n    }\n\n    // Allow to specify height as a percentage of width\n    size.height = minmax(sizeValue(size.height, size.width), undefined, windowHeight());\n    return size;\n}\n\n\nexport function getWidth (element) {\n    var el = getParentElementRect(element, 'width');\n    if (el) return elementWidth(el);\n}\n\n\nexport function getHeight (element) {\n    var el = getParentElementRect(element, 'width');\n    if (el) return elementHeight(el);\n}\n\n\nexport function getWidthElement (element) {\n    return getParentElementRect(element, 'width');\n}\n\n\nexport function getHeightElement (element) {\n    return getParentElementRect(element, 'height');\n}\n\n\nfunction windowHeight () {\n    return window.innerHeight;\n}\n\n\nfunction elementWidth (el) {\n    var w = el.getBoundingClientRect()['width'],\n        s = select(el),\n        left = padding(s.style('padding-left')),\n        right = padding(s.style('padding-right'));\n    return w - left - right;\n}\n\n\nfunction elementHeight (el) {\n    var w = el.getBoundingClientRect()['height'],\n        s = select(el),\n        top = padding(s.style('padding-top')),\n        bottom = padding(s.style('padding-bottom'));\n    return w - top - bottom;\n}\n\n\nfunction getParentElementRect (element, key) {\n    let parent = element.node ? element.node() : element,\n        v;\n    while (parent && parent.tagName !== 'BODY') {\n        v = parent.getBoundingClientRect()[key];\n        if (v)\n            return parent;\n        parent = parent.parentNode;\n    }\n}\n\n\nfunction padding (value) {\n    if (value && value.substring(value.length-2) == 'px')\n        return +value.substring(0, value.length-2);\n    return 0;\n}\n","import {isArray, isObject} from 'd3-let';\n\n\nexport default function clone (o) {\n    if (isArray(o)) return o.map(clone);\n    else if (isObject(o)) {\n        var v = {};\n        for (let key in o) {\n            v[key] = clone(o[key]);\n        }\n        return v;\n    } else return o;\n}\n","import {pop, isString, isObject, assign} from 'd3-let';\nimport {dispatch} from 'd3-dispatch';\nimport {viewBase, viewModel} from 'd3-view';\nimport 'd3-transition';\n\nimport globalOptions from './options';\nimport {sizeValue} from '../utils/size';\nimport minmax from '../utils/minmax';\nimport clone from '../utils/clone';\n\n\nconst CONTAINERS = ['visual', 'container'];\n\n//\n//  Gloval visuals object\n//  ==========================\n//\n//  Container of\n//  * live visuals\n//  * visual types\n//  * paper types\n//  * visual events\nexport const visuals = {\n    live: [],\n    types: {},\n    papers: {},\n    options: globalOptions,\n    schema: {\n        title: \"Visualize Specification Language\",\n        type: \"object\",\n        definitions: {\n            size: {\n                oneOf: [\n                    {\n                        type: \"number\",\n                        description: \"size in pixels\",\n                        minimum: 0\n                    },\n                    {\n                        type: \"string\",\n                        description: \"Size as a percentage\"\n                    }\n                ]\n            }\n        }\n    },\n    events: dispatch(\n        'before-init',\n        'after-init',\n        'resize',\n        'before-draw',\n        'after-draw'\n    )\n};\n\nfunction defaultsFromProperties (properties) {\n    var options = {};\n    let value, prop, key;\n    for (key in properties) {\n        prop = properties[key];\n        if (prop['$ref']) prop = schemaDef(prop['$ref']);\n        value = prop.default;\n        options[key] = value === undefined ? null : value;\n    }\n    return options;\n}\n\n\nfunction schemaDef (d) {\n    var dd = d.split('/');\n    return visuals.schema.definitions[dd[dd.length-1]] || {};\n}\n\n//\n//  Visual Interface\n//  ====================\n//\n//  Base prototype object for visuals\n//\nexport const visualPrototype = {\n\n    // initialise the visual with options\n    initialise () {\n\n    },\n\n    // draw this visual\n    draw () {},\n\n    // redraw the visual\n    // this is the method that should be invoked by applications\n    redraw (fetchData) {\n        if (this.drawing) {\n            var self = this,\n                event = `after-draw.${this.toString()}`;\n            visuals.events.on(event, () => {\n                // remove callback\n                visuals.events.on(event, null);\n                self.redraw(fetchData);\n            });\n        } else\n            this.drawing = this.draw(fetchData);\n        return this.drawing;\n    },\n\n    // destroy the visual\n    destroy () {},\n\n    toString () {\n        return `${this.visualType}-${this.model.uid}`;\n    },\n\n    // get a reactive model for type\n    getModel (type) {\n        if (!type) type = this.visualType;\n        var model = this.model[type];\n        if (!model && type in globalOptions) {\n            var options = pop(this.options, type),\n                self = this;\n            if (this.visualParent)\n                model = this.visualParent.getModel(type).$child(options);\n            else {\n                model = this.model.$new(globalOptions[type]);\n                model.$update(options);\n            }\n            this.model[type] = model;\n            //\n            // Trigger redraw when model change\n            // Do not fecth data\n            model.$on(() => self.redraw(false));\n        }\n        return model;\n    },\n\n    // apply the visualmodel uid to a name\n    idname (name) {\n        if (!name) name = this.visualType;\n        return `${name}-${this.model.uid}`;\n    },\n\n    modelProperty (name, model) {\n        var me = this.getModel(),\n            value = me[name];\n        return value === undefined ? model[name] : value;\n    },\n\n    dim (size, refSize, minSize, maxSize) {\n        return minmax(sizeValue(size, refSize), minSize, maxSize);\n    },\n    // pop this visual from a container\n    pop (container) {\n        if (container) {\n            var idx = container.live.indexOf(this);\n            if (idx > -1) container.live.splice(idx, 1);\n        }\n    },\n\n    getVisualSchema (name) {\n        var schema = this.options.visuals ? this.options.visuals[name] : null,\n            parent = this.visualParent;\n        if (parent && isString(schema)) {\n            name = schema;\n            schema = parent.getVisualSchema(name);\n        } else if (parent && !schema)\n            schema = parent.getVisualSchema(name);\n        if (isObject(schema))\n            return clone(schema);\n    }\n};\n\n//\n//  Create a new Visual Constructor\nexport default function (type, proto) {\n    const schema = pop(proto, 'schema');\n    if (schema) {\n        visuals.options[type] = defaultsFromProperties(schema);\n        visuals.schema.definitions[type] = {\n            type: \"object\",\n            properties: assign({\n                data: {\n                    \"$ref\": \"#/definitions/data\"\n                }\n            }, schema)\n        };\n    }\n\n    function Visual(element, options, parent, model) {\n        Object.defineProperties(this, {\n            visualType: {\n                get () {\n                    return type;\n                }\n            },\n            isViz: {\n                get () {\n                    return CONTAINERS.indexOf(type) === -1;\n                }\n            },\n            visualRoot: {\n                get () {\n                    if (this.visualParent) return this.visualParent.visualRoot;\n                    return this;\n                }\n            }\n        });\n        this.visualParent = parent;\n        this.model = parent ? parent.model.$new() : (model || viewModel());\n        this.options = options || {};\n        this.drawing = false;\n        visuals.events.call('before-init', undefined, this);\n        this.initialise(element);\n        visuals.events.call('after-init', undefined, this);\n    }\n\n    Visual.prototype = assign({}, viewBase, visualPrototype, proto);\n    Visual.prototype.constructor = Visual;\n    visuals.types[type] = Visual;\n    return Visual;\n}\n","import {pop, inBrowser} from 'd3-let';\nimport {viewDebug} from 'd3-view';\nimport {select} from 'd3-selection';\n\nimport createVisual, {visuals} from './base';\nimport warn from '../utils/warn';\nimport {getSize} from '../utils/size';\n\n//\n//  Visual\n//  =============\n//\n//  A Visual is a a container of visual layers and it is\n//  associated with an HTML element\n//\n//  Usually a Visual contains one layer only, however it is possible to\n//  have more than one by combining several layers together. Importantly,\n//  layers in one visual generate HTMLElements which are children of the visual\n//  element and inherit both the width and height.\n//\n//  A visual register itself with the visuals.live array\n//\nexport default createVisual('visual', {\n\n    schema: {\n        render: {\n            type: 'string',\n            enum: ['canvas', 'svg'],\n            default: 'svg'\n        },\n        // width set by the parent element\n        width: {\n            description: 'Width of the visual',\n            '$refs': '#/definitions/size'\n        },\n        // height set as percentage of width\n        height: {\n            description: 'Height of the visual',\n            '$refs': '#/definitions/size',\n            default: \"70%\"\n        }\n    },\n\n    initialise (element) {\n        if (!element) throw new Error('HTMLElement required by visual group');\n        if (this.visualParent && this.visualParent.visualType !== 'container')\n            throw new Error('Visual parent can be a container only');\n        if (!this.select(element).select('.paper').node())\n            this.select(element).append('div').classed('paper', true);\n\n        Object.defineProperties(this, {\n            element : {\n                get () {\n                    return element;\n                }\n            },\n            paperElement : {\n                get () {\n                    return this.sel.select('.paper');\n                }\n            },\n            sel: {\n                get () {\n                    return this.select(element);\n                }\n            },\n            size: {\n                get () {\n                    return [this.width, this.height];\n                }\n            }\n        });\n\n        this.sel.classed('d3-visual', true);\n        // list of layers which define the visual\n        this.layers = [];\n        this.drawCount = 0;\n        visuals.live.push(this);\n        element.__visual__ = this;\n        if (this.visualParent) this.visualParent.live.push(this);\n    },\n\n    activate () {\n        this.layers.forEach(layer => layer.activate());\n    },\n\n    deactivate () {\n        this.layers.forEach(layer => layer.deactivate());\n    },\n\n    getVisual () {\n        return this;\n    },\n\n    // Draw the visual\n    draw (fetchData) {\n        if (this.drawing) {\n            warn(`${this.toString()} already drawing`);\n            return this.drawing;\n        }\n        else if (!this.drawCount) {\n            this.drawCount = 1;\n            this.fit();\n        } else {\n            this.drawCount++;\n            this.clear();\n        }\n        var self = this;\n        visuals.events.call('before-draw', undefined, this);\n        return Promise.all(this.layers.map(visual => {\n            return visual.redraw(fetchData);\n        })).then(() => {\n            delete self.drawing;\n            visuals.events.call('after-draw', undefined, self);\n        }, err => {\n            delete self.drawing;\n            warn(`Could not draw ${self.toString()}: ${err}`, err);\n        });\n    },\n\n    clear () {},\n\n    // Add a new visual to this group\n    addVisual (options) {\n        var type = pop(options, 'type');\n        var VisualClass = visuals.types[type];\n        if (!VisualClass)\n            warn(`Cannot add visual \"${type}\", not available`);\n        else\n            return new VisualClass(this.element, options, this);\n    },\n    //\n    // Fit the root element to the size of the parent element\n    fit () {\n        this.resize(null, true);\n        return this;\n    },\n\n    // resize the chart\n    resize (size, fit) {\n        if (!size) size = getSize(this.element.parentNode || this.element, this.getModel());\n        var currentSize = this.size;\n\n        if (fit || (currentSize[0] !== size.width || currentSize[1] !== size.height)) {\n            if (!fit) viewDebug(`Resizing \"${this.toString()}\"`);\n            this.width = size.width;\n            this.height = size.height;\n            // this.paper.style('width', this.width + 'px').style('height', this.height + 'px');\n            this.paperElement.style('height', this.height + 'px');\n            visuals.events.call('resize', undefined, this);\n            // if we are not just fitting draw the visual without fetching data!!\n            if (!fit) this.draw(false);\n        }\n        return this;\n    },\n\n    paper () {\n        var paper = this.__paper,\n            render = this.getModel().render;\n        if (paper && paper.paperType === render) return paper;\n        var PaperType = visuals.papers[render];\n        if (!PaperType) throw new Error(`Unknown paper ${render}`);\n        paper = new PaperType(this);\n        this.__paper = paper;\n        return paper;\n    },\n\n    getPaperGroup (gname) {\n        return this.paper().group(gname);\n    },\n\n    destroy () {\n        this.pop(this.visualParent);\n        this.pop(visuals);\n    }\n});\n\n\nif (inBrowser) {\n    // DOM observer\n    // Check for changes in the DOM that leads to visual actions\n    const observer = new MutationObserver(visualManager);\n    observer.observe(document.documentElement, {\n        childList: true,\n        subtree: true\n    });\n}\n\n//\n//  Clears visualisation going out of scope\nfunction visualManager (records) {\n    records.forEach(record => {\n        var nodes = record.removedNodes;\n        if (!nodes || !nodes.length) return;  // phantomJs hack\n        nodes.forEach(node => {\n            if (node.querySelectorAll) {\n                if (!node.__visual__)\n                    select(node).selectAll('.d3-visual').each(destroy);\n                else\n                    destroy.call(node);\n            }\n        });\n    });\n}\n\n\nfunction destroy () {\n    var viz = this.__visual__;\n    if (viz) {\n        viz.destroy();\n        viewDebug(`Removed \"${viz.toString()}\" from DOM, ${visuals.live.length} live visuals left`);\n    }\n    else warn('d3-visual without __visual__ object');\n}\n","import {isFunction, pop, assign} from 'd3-let';\nimport {viewProviders} from 'd3-view';\n\nimport createVisual, {visuals} from './base';\nimport Visual from './visual';\nimport warn from '../utils/warn';\n\n\n//\n//  crateChart\n//\n//  A chart is a drawing of a data frame in two dimension\nexport default function (type) {\n    if (viewProviders.visualPlugins) {\n        extendVisualPrototype(viewProviders.visualPlugins);\n        viewProviders.visualPlugins = null;\n    }\n    var protos = [{}, vizPrototype, chartPrototype];\n    for (var i=1; i<arguments.length; ++i) protos.push(arguments[i]);\n    return createVisual(type, assign.apply(undefined, protos));\n}\n\n\nfunction extendVisualPrototype (plugins) {\n    let options, proto;\n    Object.keys(plugins).forEach(name => {\n        options = plugins[name].options;\n        proto = plugins[name].prototype;\n        if (options) visuals.options[name] = options;\n        if (proto) assign(vizPrototype, proto);\n    });\n}\n\n//  Viz Prototype\n//  =================\nexport const vizPrototype = {\n    $: null,\n\n    initialise (element) {\n        // No visual parent, create the visual\n        var visual = this.visualParent;\n        if (this.options.active !== undefined)\n            this.active = pop(this.options, 'active');\n        else\n            this.active = true;\n        if (!visual) {\n            this.visualParent = visual = new Visual(element, this.options, null, this.model);\n            this.model = visual.model.$new();\n            this.options = {};\n        } else if (!visual.layers)\n            throw new Error(`visual parent of ${this.visualType} does not have layers`);\n        visual.layers.push(this);\n    },\n\n    //\n    // paper object for this visualisation\n    paper () {\n        return this.visualParent.paper();\n    },\n\n    activate (callback) {\n        if (!this.active) {\n            this.active = true;\n            this.group()\n                .transition(this.model.uid)\n                .on('end', () => {\n                    if(callback) callback();\n                })\n                .style('opacity', 1);\n        }\n        return this;\n    },\n\n    deactivate (callback) {\n        if (this.active) {\n            this.active = false;\n            this.group()\n                .transition(this.model.uid)\n                .on('end', () => {\n                    if(callback) callback();\n                })\n                .style('opacity', 0);\n        }\n        return this;\n    },\n\n    getVisual () {\n        return this.visualParent.getVisual();\n    },\n\n    // a group selection for a given name\n    group (name) {\n        var me = `${this.visualType}-${this.model.uid}`,\n            group = this.visualParent.getPaperGroup(me);\n        if (name && name !== this.visualType) return this.paper().childGroup(group, name);\n        else return group;\n    },\n\n    translate (x, y) {\n        if (isFunction(x)) {\n            return function (d) {\n                var xt = x(d) || 0,\n                    yt = y(d) || 0;\n                return `translate(${xt}, ${yt})`;\n            };\n        } else return `translate(${x}, ${y})`;\n    },\n\n    getD3 (prefix, name) {\n        return this.$[`${prefix}${name[0].toUpperCase()}${name.substring(1)}`];\n    },\n\n    displayError () {}\n};\n\n\nexport const chartPrototype = {\n\n    //  override draw method\n    draw (fetchData) {\n        if (this.drawing) {\n            warn(`${this.toString()} already drawing`);\n            return this.drawing;\n        }\n        var self = this,\n            doDraw = this.doDraw;\n\n        this.paper().size(this.boundingBox(true));\n\n        if(!this.active) return;\n\n        visuals.events.call('before-draw', undefined, this);\n\n        if (fetchData === false && this._drawArgs) {\n            delete self.drawing;\n            doDraw.apply(self, this._drawArgs);\n            visuals.events.call('after-draw', undefined, self);\n        } else {\n            return Promise.all([\n                this.requires ? viewProviders.require.apply(undefined, this.requires) : [],\n                // this.getMetaData(),\n                this.getData()\n            ]).then(args => {\n                delete self.drawing;\n                var frame = args[1];\n                if (frame) {\n                    this.$ = args[0];\n                    this.frame = frame;\n                    doDraw.apply(self);\n                    visuals.events.call('after-draw', undefined, self);\n                }\n            }, err => {\n                delete self.drawing;\n                warn(`Could not draw ${self.toString()}: ${err}`, err);\n                this.displayError(err);\n            });\n        }\n    }\n};\n","import {assign} from 'd3-let';\nimport {viewBase} from 'd3-view';\n\nimport {visuals} from './base';\n\n\nexport default function createPaper (type, proto) {\n\n    function Paper (viz, uid) {\n        var element = this.initialise(viz, uid);\n        Object.defineProperties(this, {\n            element: {\n                get () {\n                    return element;\n                }\n            },\n            sel: {\n                get () {\n                    return this.select(element);\n                }\n            },\n            paperType: {\n                get () {\n                    return type;\n                }\n            }\n        });\n    }\n\n    Paper.prototype = assign({}, viewBase, paperPrototype, proto);\n\n    visuals.papers[type] = Paper;\n    return Paper;\n}\n\n\nconst paperPrototype = {\n\n    initialise () {},\n    transition () {},\n    size (box) {\n        this.sel\n            .attr('width', box.width)\n            .attr('height', box.height);\n        return this;\n    },\n\n    group (cname, transform) {\n        return this.childGroup(this.sel, cname, transform);\n    },\n\n    childGroup (g, cname, transform) {\n        if (!cname) cname = 'main';\n        var ge = g.selectAll(`.${cname}`)\n                    .data([0])\n                    .enter()\n                    .append('g').classed(cname, true);\n        // TODO, not sure we need this anymore - we gave applyTransform\n        if (transform)\n            ge.attr('transform', transform)\n                .merge()\n                .attr('transform', transform);\n        return g.select(`.${cname}`);\n    },\n\n    dim (value) {\n        return value;\n    }\n};\n\n\nexport const Svg = createPaper('svg', {\n\n    initialise (visual, uid) {\n        if (!uid) visual.model.uid;\n        var svg = visual.paperElement.select(`svg#${uid}`);\n        if (!svg.size())\n            svg = visual.paperElement.append('svg')\n                .attr('id', uid)\n                .classed(visual.visualType, true)\n                .style('position', 'absolute');\n        return svg.node();\n    }\n});\n\n\nexport const Div = createPaper('div', {\n\n    initialise (viz) {\n        var uid = viz.model.uid,\n            visual = viz.visualParent;\n        var div = visual.paperElement.select(`div#${uid}`);\n        if (!div.size())\n            div = visual.paperElement.append('div')\n                    .attr('id', uid)\n                    .classed(visual.visualType, true)\n                    .style('position', 'absolute');\n        return div.node();\n    },\n\n    size (box) {\n        this.sel\n            .style('width', `${box.width}px`)\n            .style('height', `${box.height}px`);\n        return this;\n    },\n\n    childGroup (g, cname) {\n        if (!cname) cname = 'main';\n        g.selectAll(`.${cname}`)\n            .data([0]).enter()\n            .append('div').classed(cname, true);\n        return g.select(`.${cname}`);\n    },\n});\n","import {isFunction} from 'd3-let';\n\nexport default function (obj, cfg) {\n    let keys;\n    if (cfg.$events) keys = cfg.$events.keys();\n    else keys = Object.keys(cfg);\n    keys.forEach(key => {\n        if (isFunction(obj[key]))\n            obj[key](cfg[key]);\n    });\n    return obj;\n}\n","//\n//  Axis Plugin\n//  ================\n//\n//  * A visual must require \"d3-scale\"\n//\nimport {isString} from 'd3-let';\nimport {vizPrototype} from '../core/chart';\nimport extendObject from '../utils/extend-object';\n\n\nvizPrototype.getScale = function (cfg) {\n    if (isString(cfg)) cfg = {type: cfg};\n    var scale = this.getD3('scale', cfg.type)();\n    return extendObject(scale, cfg);\n};\n","//\n//  Add a menu buttom to a visual\n\nimport globalOptions from '../core/options';\nimport {visuals} from '../core/base';\n\n\nglobalOptions.menu = {\n    display: false,\n    height: '8%',\n    maxHeight: 50,\n    minHeight: 20\n};\n\n\nvisuals.events.on('after-init.menu', viz => {\n    if (viz.visualType === 'visual') {\n        var menu = viz.getModel('menu');\n        if (menu.display) {\n            viz.menu = viz.sel.insert('nav', ':first-child').classed('d3-nav navbar p-1', true);\n            viz.menu.append('h4').classed('title', true);\n        }\n    }\n});\n\nvisuals.events.on('before-draw.menu', viz => {\n    if (viz && viz.menu) {\n        refreshMenu(viz);\n    }\n});\n\n\nfunction refreshMenu(viz) {\n    var menu = viz.getModel('menu'),\n        height = viz.dim(menu.height, viz.height, menu.minHeight, menu.maxHeight);\n    viz.menu.style('height', `${height}px`);\n}\n","//\n//  dataStore integration with visuals\nimport {isString, pop, assign} from 'd3-let';\n\nimport {visuals} from '../core/base';\nimport DataStore from '../data/store';\nimport dataSources from '../data/sources';\nimport {vizPrototype} from '../core/chart';\nimport warn from '../utils/warn';\n\n\nassign(visuals.schema.definitions, {\n    data: {\n        type: \"array\",\n        items: {\n            '$ref': '#/definitions/dataSource'\n        }\n    },\n    dataSource: {\n        oneOf: dataSources.values().map(Ds => {\n            const schema = Ds.prototype.schema;\n            schema.properties.transforms = {'$ref': '#/definitions/transforms'};\n            return schema;\n        })\n    }\n});\n//  getData method\n//  =====================\n//\n//  Inject a method for easily retrieving data from the datastore\nvizPrototype.getData = function () {\n    var name = this.model.data;\n    if (!name) {\n        warn(`Visual ${this.visualType} without data name, cannot get data`);\n        return;\n    }\n    return this.dataStore.getData(name, {$visual: this});\n};\n\n//\n// Context for expression evaluation\nvizPrototype.getContext = function (context) {\n    return this.dataStore.model.$child(context);\n};\n\n\nvisuals.events.on('before-init.data', viz => {\n    if (!viz.isViz) return;\n    // remove data from options\n    viz.data = pop(viz.options, 'data');\n});\n\n\nvisuals.events.on('after-init.data', viz => {\n    Object.defineProperties(viz, {\n        dataStore : {\n            get () {\n                return viz.model.root.dataStore;\n            }\n        },\n    });\n    if (viz.isViz) setupLayer(viz);\n    else setupVisual(viz);\n});\n\n\nfunction setupVisual (visual) {\n    var store = visual.dataStore,\n        data = pop(visual.options, 'data');\n    //\n    if (!store) {\n        // create the data store for the visual or container\n        store = new DataStore(visual.getModel('dataContext'));\n        visual.model.root.dataStore = store;\n    }\n    store.addSources(data);\n}\n\n\nfunction setupLayer (layer) {\n    var store = layer.dataStore,\n        data = pop(layer, 'data');\n    if (!data) return;\n    if (isString(data)) data = {source: data};\n    if (!data.name) data.name = layer.model.uid;\n    data = store.addSources(data);\n    if (data)\n        layer.model.$set('data', data.name);\n    else\n        warn(`Could not create data source ${data.name}`);\n}\n","import {format} from 'd3-format';\nimport {map} from 'd3-collection';\n\nconst formats = map();\n\nexport default function (specifier, value) {\n    var fmt = formats.get(specifier);\n    if (!fmt) {\n        fmt = format(specifier);\n        formats.set(specifier, fmt);\n    }\n    return arguments.length == 2 ? fmt(value) : fmt;\n}\n","import {timeFormat} from 'd3-time-format';\nimport {map} from 'd3-collection';\n\nconst formats = map();\n\nexport default function (specifier, value) {\n    var fmt = formats.get(specifier);\n    if (!fmt) {\n        fmt = timeFormat(specifier);\n        formats.set(specifier, fmt);\n    }\n    return arguments.length == 2 ? fmt(value) : fmt;\n}\n","//\n//  Add formatting capabilities to visuals\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\nimport cachedFormat from '../utils/format';\nimport cachedFormatTime from '../utils/format-time';\n\n//\n// Visual Data Context\nvisuals.options.dataContext = {\n    $format: cachedFormat,\n    $formatTime: cachedFormatTime\n};\n\n\nvizPrototype.format = function (fmt) {\n    var store = this.dataStore,\n        formatter = store.eval(fmt);\n    if (formatter) return formatter;\n    try {\n        return cachedFormat(fmt);\n    } catch (e) {\n        return cachedFormatTime(fmt);\n    }\n};\n","import {vizPrototype} from '../core/chart';\nimport {visuals} from '../core/base';\n\n\nvisuals.options.font = {\n    size: '3%',\n    minSize: 10,\n    maxSize: 20,\n    stroke: '#333',\n    family: null\n};\n\n\nvizPrototype.font = function (box, font) {\n    font = font ? font : this.getModel('font');\n\n    var model = this.getModel(),\n        size = this.dim(font.size, box.height, font.minSize, font.maxSize);\n    if (model.fontSizeMultiplier)\n        size *= model.fontSizeMultiplier;\n    return size;\n};\n","import {inBrowser} from 'd3-let';\nimport {viewDebounce} from 'd3-view';\nimport {select} from 'd3-selection';\n\nimport {visuals} from '../core/base';\nimport globalOptions from '../core/options';\n\n\nif (!globalOptions.resizeDelay)\n    globalOptions.resizeDelay = 200;\n\n\nif (inBrowser) {\n    var resize = viewDebounce(() => {\n        visuals.live.forEach(p => p.resize());\n    }, globalOptions.resizeDelay);\n\n    select(window).on('resize.visuals', resize);\n}\n","// Title plot annotation\nimport {isString} from 'd3-let';\n\nimport {visuals} from '../core/base';\nimport globalOptions from '../core/options';\n\n\nglobalOptions.title = {\n    text: null,\n    size: '3%',\n    minSize: 15,\n    maxSize: 25,\n    offset: ['10%', 0]\n};\n\n\nvisuals.events.on('before-init.title', viz => {\n    var title = viz.options.title;\n    if (isString(title)) viz.options.title = {text: title};\n});\n\n\nvisuals.events.on('after-draw.title', viz => {\n    var title = viz.getModel('title');\n    let visual = viz;\n    if (visual.visualType === 'visual') delete visual.__title;\n    else if (viz.isViz) visual = viz.visualParent;\n    else return;\n    if (!title.text) return;\n    if (visual.menu && !visual.__title) {\n        visual.__title = title;\n        menuTitle(visual, title);\n    } else if (viz.isViz) {\n        var box = viz.boundingBox(true),\n            font = viz.getModel('font'),\n            stroke = title.stroke || font.stroke,\n            size = viz.font(box, title),\n            text = viz.group().selectAll('text.chartitle').data([title.text]),\n            top = viz.dim(title.offset[0], box.vizHeight),\n            left = viz.dim(title.offset[1], box.vizWidth),\n            translate = viz.translate(box.margin.left+box.innerWidth/2+left, top);\n        text.enter()\n            .append('text')\n            .classed('chartitle', true)\n            .attr(\"transform\", translate)\n            .style(\"text-anchor\", \"middle\")\n            .style(\"font-size\", size)\n            .style(\"fill\", stroke)\n            .text(d => d)\n        .merge(text)\n            .transition()\n            .attr(\"transform\", translate)\n            .style(\"font-size\", size)\n            .style(\"fill\", stroke)\n            .text(d => d);\n    }\n});\n\n\nfunction menuTitle(visual, title) {\n    var height = number(visual.menu.style('height')),\n        maxSize = title.maxSize ? Math.min(height-4, title.maxSize) : height-4,\n        size = visual.dim(title.size, visual.width, title.minSize, maxSize);\n    visual.menu.select('.title')\n        .html(title.text)\n        .style('font-size', `${size}px`)\n        .style('line-height', `${height}px`);\n}\n\n\nfunction number (px) {\n    return +px.substring(0, px.length-2);\n}\n","import {isObject, isArray} from 'd3-let';\n\nimport globalOptions from '../core/options';\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\nimport {sizeValue} from '../utils/size';\n\n\nexport const KEYS = ['top', 'bottom', 'left', 'right'];\nconst LEFTRIGHT = ['left', 'right'];\n\n\n// margin for visual marks\nglobalOptions.margin = {\n    top: 20,\n    bottom: 20,\n    left: 20,\n    right: 20\n};\n// padding for the visual paper\nglobalOptions.padding = {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0\n};\n\n\n//\n//  Bounding box for a viz\n//  ==========================\nvizPrototype.boundingBox = function (clearCache) {\n    if (clearCache) clearBBCache(this);\n    if (!this.__boundingBox) {\n        var width = this.visualParent.width,\n            height = this.visualParent.height,\n            padding = calculate(this.getModel('padding'), width, height),\n            vizWidth = width - padding.left - padding.right,\n            vizHeight = height - padding.top - padding.bottom,\n            margin = calculate(this.getModel('margin'), vizWidth, vizHeight),\n            total = KEYS.reduce((o, key) => {\n                o[key] = margin[key] + padding[key];\n                return o;\n            }, {});\n        this.__boundingBox = {\n            margin: margin,\n            padding: padding,\n            total: total,\n            width: width,\n            height: height,\n            vizWidth: vizWidth,\n            vizHeight: vizHeight,\n            innerWidth: width - total.left - total.right,\n            innerHeight: height - total.top - total.bottom,\n            $nomargins: $nomargins\n        };\n    }\n    return this.__boundingBox;\n};\n\n\nvisuals.events.on('after-init.margin', viz => {\n    viz.margin = margins('margin', viz);\n    viz.padding = margins('padding', viz);\n});\n\n\nvisuals.events.on('before-draw.margin', viz => {\n    if (viz.isViz) clearBBCache(viz);\n});\n\n\nfunction margins (name, viz) {\n    var value = viz.options[name];\n    if (value !== undefined && !isObject(value))\n        viz.options[name] = marginv(value || 0);\n}\n\n\nfunction calculate (model, width, height) {\n    return KEYS.reduce((o, key) => {\n        o[key] = sizeValue(model[key], LEFTRIGHT.indexOf(key) > -1 ? width : height);\n        return o;\n    }, {});\n}\n\n\nfunction clearBBCache (viz) {\n    delete viz.__boundingBox;\n    if (isArray(viz.layers)) viz.layers.forEach(clearBBCache);\n}\n\n\nfunction $nomargins () {\n    return {\n        width: this.innerWidth,\n        height: this.innerHeight,\n        margin: marginv(0),\n        padding: marginv(0),\n        total: marginv(0),\n        innerWidth: this.innerWidth,\n        innerHeight: this.innerHeight,\n        $nomargins: this.$nomargins\n    };\n}\n\n\nfunction marginv (v) {\n    return {\n        left: v,\n        right: v,\n        top: v,\n        bottom: v\n    };\n}\n","//\n//  Axis Plugin\n//  ================\n//\n//  * A visual must require \"d3-axis\"\n//\nimport {timeFormat} from 'd3-time-format';\nimport {isDate, assign} from 'd3-let';\n\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\n\n\nconst axisDefaults = {\n    ticks: 5,\n    tickSize: 6,\n    tickSizeOuter: null,\n    //\n    // tick labels\n    rotate: null,\n    ancor: 'end',\n    format: null,\n    timeFormat: '%Y-%m-%d',\n    stroke: '#333',\n    hide: null, // specify a pixel size below which tick labels are not displayed\n    //\n    // title\n    title: null,\n    titleRotate: null,\n    titleOffset: 0.7\n};\n\n\nvisuals.options.xAxis = assign({\n    location: \"bottom\"\n}, axisDefaults);\n\n\nvisuals.options.yAxis = assign({\n    location: \"left\"\n}, axisDefaults);\n\n\nvizPrototype.getAxis = function (orientation, scale) {\n    return this.getD3('axis', orientation)(scale);\n};\n\n\nvizPrototype.xAxis1 = function (location, scale, box, value) {\n    var model = this.getModel('xAxis'),\n        axis = this._axis(location, scale, model, value),\n        ga = this.group('x-axis');\n    this.applyTransform(ga, this.translateAxis(location, box));\n    formatAxis(ga.transition(this.transition('x-axis')).call(axis), model, scale);\n    if (model.title)\n        this.axisTitle(ga, location, scale, box, model);\n    return ga;\n};\n\n\nvizPrototype.yAxis1 = function (location, scale, box, value) {\n    var model = this.getModel('yAxis'),\n        axis = this._axis(location, scale, model, value),\n        ga = this.group('y-axis');\n    this.applyTransform(ga, this.translateAxis(location, box));\n    formatAxis(ga.transition(this.transition('x-axis')).call(axis), model, scale);\n    if (model.title)\n        this.axisTitle(ga, location, scale, box, model);\n    return ga;\n};\n\n\n//\n//  Apply Axis title\nvizPrototype.axisTitle = function (ga, location, scale, box, model) {\n    var title = ga.selectAll('text.title').data([model.title]),\n        rotate = model.titleRotate || 0,\n        x = 0,\n        y = 0;\n\n    if (!rotate && (location === 'right' || location === 'left')) rotate = -90;\n    if (location == \"left\") {\n        x =-model.titleOffset*box.margin.left;\n        y = box.innerHeight/2;\n    }\n    var translate = `translate(${x},${y}) rotate(${rotate})`,\n        font = this.font(box);\n\n    title\n        .enter()\n            .append('text')\n            .classed('title', true)\n            .attr(\"transform\", translate)\n            .style(\"text-anchor\", \"middle\")\n            .style(\"font-size\", font)\n            .style(\"fill\", model.stroke)\n            .text(d => d)\n        .merge(title)\n            .transition()\n            .attr(\"transform\", translate)\n            .style(\"font-size\", font)\n            .style(\"fill\", model.stroke)\n            .text(d => d);\n};\n\nvizPrototype.translateAxis = function (location, box) {\n    if (location === 'top' || location === 'left')\n        return this.translate(box.margin.left, box.margin.top);\n    else if (location === 'bottom')\n        return this.translate(box.margin.left, box.margin.top+box.innerHeight);\n    else\n        return this.translate(box.margin.left+box.innerWidth, box.margin.top);\n};\n\nvizPrototype._axis = function (location, scale, model, value) {\n    var axis = this.getAxis(location, scale).tickSize(model.tickSize);\n    if (model.tickSizeOuter !== null) axis.tickSizeOuter(model.tickSizeOuter);\n    if (isDate(value)) axis.tickFormat(timeFormat(model.timeFormat));\n    else if (model.format !== null) axis.tickFormat(this.format(model.format));\n    return axis.ticks(model.ticks);\n};\n\n\nfunction formatAxis (ga, model, scale) {\n    ga.select('path.domain').attr('stroke', model.stroke);\n    var ticks = ga.selectAll('text').attr('fill', model.stroke);\n    if (model.hide) {\n        var range = scale.range(),\n            dim = Math.abs(range[0] - range[range.length-1]);\n        if (dim < model.hide) ga.style('opacity', 0);\n        else ga.style('opacity', 1);\n    }\n    if (model.rotate) {\n        ticks.attr('transform', `rotate(${model.rotate})`)\n            .style('text-anchor', model.ancor);\n    }\n}\n","import {vizPrototype} from '../core/chart';\n\n\nvizPrototype.getSymbol = function (name) {\n    return this.$.symbol().type(this.getD3('symbol', name));\n};\n\n\nvizPrototype.getCurve = function (name) {\n    return this.getD3('curve', name);\n};\n\n\nvizPrototype.getStack = function () {\n    var model = this.getModel();\n    if (model.stack) {\n        var s = this.$.stack();\n        if (model.stackOrder) s.order(this.getD3('stack', model.stackOrder));\n        if (model.stackOffset) s.offset(this.getD3('stack', model.stackOffset));\n        return s;\n    }\n};\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex3 = /^#([0-9a-f]{3})$/,\n    reHex6 = /^#([0-9a-f]{6})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  toString: function() {\n    return this.rgb() + \"\";\n  }\n});\n\nexport default function color(format) {\n  var m;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format])\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (0 <= this.r && this.r <= 255)\n        && (0 <= this.g && this.g <= 255)\n        && (0 <= this.b && this.b <= 255)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  toString: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"rgb(\" : \"rgba(\")\n        + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar Kn = 18,\n    Xn = 0.950470, // D65 standard referent\n    Yn = 1,\n    Zn = 1.088830,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) {\n    var h = o.h * deg2rad;\n    return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n  }\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var b = rgb2xyz(o.r),\n      a = rgb2xyz(o.g),\n      l = rgb2xyz(o.b),\n      x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn),\n      y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.0721750 * l) / Yn),\n      z = xyz2lab((0.0193339 * b + 0.1191920 * a + 0.9503041 * l) / Zn);\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    y = Yn * lab2xyz(y);\n    x = Xn * lab2xyz(x);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      xyz2rgb( 3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB\n      xyz2rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z),\n      xyz2rgb( 0.0556434 * x - 0.2040259 * y + 1.0572252 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction xyz2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2xyz(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + Kn * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - Kn * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return labConvert(this).rgb();\n  }\n}));\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","import {map} from 'd3-collection';\nimport {range} from 'd3-array';\nimport {color} from 'd3-color';\nimport {isObject, isFunction, isArray} from 'd3-let';\n\nimport globalOptions from '../core/options';\nimport {vizPrototype} from '../core/chart';\n\nexport const colorScales = map();\n\n\nglobalOptions.color = {\n    scale: 'cool',\n    // Minumim number of colors in a sequantial color scale\n    // This helps in keeping a consistent palette when few colors are used\n    scaleMinPoints: 6,\n    // An offset in the color scale, useful for combined visuals\n    scaleOffset: 0,\n    stroke: '#333',\n    strokeOpacity: 1,\n    fillOpacity: 1,\n};\n\ncolorScales.set('viridis', (d3) =>  d3.scaleSequential(d3.interpolateViridis));\ncolorScales.set('inferno', (d3) =>  d3.scaleSequential(d3.interpolateInferno));\ncolorScales.set('magma', (d3) =>  d3.scaleSequential(d3.interpolateMagma));\ncolorScales.set('plasma', (d3) =>  d3.scaleSequential(d3.interpolatePlasma));\ncolorScales.set('warm', (d3) =>  d3.scaleSequential(d3.interpolateWarm));\ncolorScales.set('cool', (d3) =>  d3.scaleSequential(d3.interpolateCool));\ncolorScales.set('rainbow', (d3) =>  d3.scaleSequential(d3.interpolateRainbow));\ncolorScales.set('cubehelix', (d3) =>  d3.scaleSequential(d3.interpolateCubehelixDefault));\n\nvizPrototype.getColorScale = function (name) {\n    return colorScales.get(name)(this.$);\n};\n//\n//  Color scale method\n//  ==========================\nvizPrototype.colors = function (n, opacity) {\n    var model = this.getModel('color');\n    let reversed = false, scaleDef, scale;\n\n    if (isArray(model.scale)) scale = this.getScale('ordinal').range(model.scale);\n    else {\n        scaleDef = this.getColorScale(model.scale);\n        if (!scaleDef) throw new Error(`Unknown scale ${model.scale}`);\n        if (!isObject(scaleDef)) scaleDef = {scale: scaleDef};\n        if (scaleDef.minPoints === undefined) scaleDef.minPoints = model.scaleMinPoints;\n        scale = scaleDef.scale;\n        reversed = scaleDef.reversed;\n    }\n\n    if (isFunction(scale.interpolator)) {\n        var offset = model.scaleOffset,\n            npoints = n + offset,\n            points = Math.max(npoints, scaleDef.minPoints),\n            domain = reversed ? [points-1, 0] : [0, points-1];\n        scale.domain(domain);\n        let c;\n        return range(offset, Math.min(npoints, points)).map(v => {\n            c = color(scale(v));\n            c.opacity = opacity;\n            return c;\n        });\n    } else {\n        var colors = scale.range().slice();\n        if (reversed) colors.reverse();\n        let b, c, m;\n        for (let i=0; i<model.scaleOffset; ++i) {\n            colors.push(colors.shift());\n        }\n        return range(n).map(() => {\n            b = colors.shift();\n            c = color(b);\n            m = color(b);\n            c.opacity = opacity;\n            colors.push(''+m.brighter(0.2));\n            return c;\n        });\n    }\n};\n\n\nvizPrototype.fill = function (data) {\n    var model = this.getModel('color'),\n        opacity = this.modelProperty('fillOpacity', model),\n        colors = this.colors(data.length, opacity);\n\n    function fill (d, idx) {\n        return colors[idx];\n    }\n\n    fill.colors = colors;\n\n    return fill;\n};\n\nvizPrototype.stroke = function (data) {\n    var model = this.getModel('color'),\n        opacity = this.modelProperty('strokeOpacity', model),\n        colors = this.colors(data.length, opacity);\n\n    function stroke (d, idx) {\n        return colors[idx];\n    }\n\n    stroke.colors = colors;\n\n    return stroke;\n};\n\n//\n//  Linear Gradient method\n//  ==========================\n//\n//  Create a monocromatic linear gradient in the visualization box,\n//  either horizontal or vertical\nvizPrototype.linearGradient = function (col, box, orientation, gid) {\n    var paper = this.paper().sel,\n        defs = paper.select('defs');\n    if (!defs.node()) defs = paper.append('defs');\n    const\n        grad = defs.selectAll(`#${gid}`).data([0]),\n        colto = color(col);\n\n    colto.opacity = 0.1;\n\n    grad.enter()\n        .append('linearGradient')\n        .attr('id', gid)\n        .attr('x1', '0%')\n        .attr('y1', '0%')\n        .attr('x2', orientation === 'vertical' ? '0%' : '100%')\n        .attr('y2', orientation === 'vertical' ? '100%' : '0%');\n\n    var stops = defs.select(`#${gid}`)\n                    .selectAll('stop')\n                    .data([{offset: '0%', color: col}, {offset: '100%', color: colto}]);\n\n    stops.enter()\n            .append('stop')\n        .merge(stops)\n            .attr('offset', d => d.offset)\n            .attr('stop-color', d => d.color);\n\n    return `url(#${gid})`;\n};\n","import {map} from 'd3-collection';\nimport {pop} from 'd3-let';\n\nimport globalOptions from '../core/options';\nimport {vizPrototype} from '../core/chart';\nimport warn from '../utils/warn';\n\n\nglobalOptions.legend = {\n    location: \"top-right\",\n    orient: \"vertical\",\n    fontSize: '3%',\n    title: '',\n    titleWidth: \"20%\",\n    labelFormat: null,\n    titleMinWidth: 30,\n    titleMaxWidth: 60,\n    minFontSize: 10,\n    maxFontSize: 20,\n    offset: [10, 10],\n    shapeWidth: 15,\n    shapeHeight: 15,\n    hide: 300, // specify a pixel size below which tick labels are not displayed\n};\n\n\nvizPrototype.getLegend = function (name) {\n    return this.getD3('legend', name);\n};\n\n//\n//  Legend method\n//  ==========================\nvizPrototype.legend = function (cfg, box) {\n    var vizModel = this.getModel(),\n        model = this.getModel('legend'),\n        font = this.getModel('font'),\n        name = pop(cfg, 'type') || vizModel.legendType,\n        vizSize = Math.max(box.vizHeight, box.vizWidth),\n        fontSize = this.dim(model.fontSize, vizSize, model.minFontSize, model.maxFontSize),\n        legend = this.getLegend(name);\n\n    if (!model.location) return;\n\n    if (!legend) return warn(`Could not load legend ${name}`);\n    legend = legend().orient(model.orient);\n\n    if (model.title) {\n        legend.title(model.title);\n        if (model.titleWidth) {\n            var width = this.dim(model.titleWidth, vizSize, model.titleMinWidth, model.titleMaxWidth);\n            legend.titleWidth(width);\n        }\n    }\n\n    if (model.labelFormat) legend.labelFormat(model.labelFormat);\n    legend.shapeWidth(model.shapeWidth).shapeHeight(model.shapeHeight);\n\n    // apply cfg parameters\n    for (let key in cfg) legend[key](cfg[key]);\n\n    var gl = this.group('legend')\n            .style('font-size', `${fontSize}px`)\n            .html('')\n            .call(legend),\n        bb = gl.node().getBBox(),\n        offset = locations.get(model.location).call(this, bb, box, model),\n        transform = this.translate(offset.x, offset.y);\n    gl.selectAll('text').style('fill', model.stroke || font.stroke);\n    this.applyTransform(gl, transform);\n    //\n    //\n    // if the legend needs to be hidden below a certain size\n    if (model.hide) {\n        if (vizSize < model.hide) gl.style('opacity', 0);\n        else gl.style('opacity', 1);\n    }\n};\n\n\nexport const locations = map({\n    top,\n    bottom,\n    right,\n    left,\n    'top-left': topLeft,\n    'top-right': topRight,\n    'bottom-left': bottomLeft,\n    'bottom-right': bottomRight\n});\n\n\nfunction top (bb, box, options) {\n    var offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: box.margin.left + (box.innerWidth - bb.width)/2,\n        y: offsetY\n    };\n}\n\n\nfunction bottom (bb, box, options) {\n    var offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: box.margin.left + (box.innerWidth - bb.width)/2,\n        y: box.vizHeight - bb.height - offsetY\n    };\n}\n\n\nfunction right (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth);\n    return {\n        x: box.vizWidth - bb.width - offsetX,\n        y: box.margin.top + (box.innerHeight - bb.height)/2\n    };\n}\n\n\nfunction left (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth);\n    return {\n        x: box.margin.left - offsetX,\n        y: box.margin.top + (box.innerHeight - bb.height)/2\n    };\n}\n\n\nfunction topLeft (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth),\n        offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: box.margin.left + (box.innerWidth - bb.width)/2 + offsetX,\n        y: offsetY\n    };\n}\n\n\nfunction topRight (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth),\n        offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: box.vizWidth - bb.width - offsetX,\n        y: offsetY\n    };\n}\n\n\nfunction bottomLeft (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth),\n        offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: bb.width + offsetX,\n        y: box.vizHeight - bb.height - offsetY\n    };\n}\n\n\nfunction bottomRight (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth),\n        offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: box.vizWidth - bb.width - offsetX,\n        y: box.vizHeight - bb.height - offsetY\n    };\n}\n","export default function (x) {\n    return function constant() {\n        return x;\n    };\n}\n","import {isFunction} from 'd3-let';\n\nimport constant from './constant';\n\nexport default function (v) {\n    if (isFunction(v)) return v;\n    return constant(v);\n}\n","export default function (d) {\n    return d;\n}\n","//\n//\n//  Mouse events handling\n//  ==========================\n//\nimport {map} from 'd3-collection';\nimport {color} from 'd3-color';\n\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\nimport warn from '../utils/warn';\n\n\nexport const mouseStrategies = map({\n    darker: darkerStrategy(),\n    fill: fillStrategy()\n});\n\n\nvisuals.options.mouse = {\n    over: ['darker'],\n    darkerFactor: 0.5,\n    fillColor: '#addd8e'\n};\n\n\nvizPrototype.mouseOver = function () {\n    var self = this,\n        model = this.getModel('mouse');\n\n    return function (d, i) {\n        if (!this.__mouse_over__) this.__mouse_over__ = {};\n        var sel = self.select(this);\n        let strategy;\n        model.over.forEach(name => {\n            strategy = mouseStrategies.get(name);\n            if (!strategy) warn(`Unknown mouse strategy ${name}`);\n            else strategy(self, sel, d, i);\n        });\n    };\n};\n\nvizPrototype.mouseOut = function () {\n    var self = this,\n        model = this.getModel('mouse');\n\n    return function (d, i) {\n        if (!this.__mouse_over__) this.__mouse_over__ = {};\n        var sel = self.select(this);\n        let strategy;\n        model.over.forEach(name => {\n            strategy = mouseStrategies.get(name);\n            if (!strategy) warn(`Unknown mouse strategy ${name}`);\n            else strategy.out(self, sel, d, i);\n        });\n    };\n};\n\n\nfunction darkerStrategy () {\n\n    function darker (viz, sel) {\n        var model = viz.getModel('mouse'),\n            fill = color(sel.style('fill')),\n            filldarker = fill.darker(model.darkerFactor),\n            node = sel.node();\n        node.__mouse_over__.fill = fill;\n        sel.style('fill', filldarker);\n    }\n\n    darker.out = function (viz, sel) {\n        var node = sel.node(),\n            fill = node.__mouse_over__.fill;\n        if (fill) sel.style('fill', fill);\n    };\n\n    return darker;\n}\n\n\nfunction fillStrategy () {\n\n    function fill (viz, sel) {\n        var model = viz.getModel('mouse'),\n            fill = color(sel.style('fill')),\n            node = sel.node();\n        node.__mouse_over__.fill = fill;\n        sel.transition().style('fill', model.fillColor);\n    }\n\n    fill.out = function (viz, sel) {\n        var node = sel.node(),\n            fill = node.__mouse_over__.fill;\n        if (fill) sel.transition().style('fill', fill);\n    };\n\n    return fill;\n}\n","import {map} from 'd3-collection';\nimport {inBrowser} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\nimport functor from '../utils/functor';\nimport noop from '../utils/identity';\nimport {mouseStrategies} from './mouse';\n\n\nvisuals.options.tooltip = {\n    location: \"top\",\n    offset: [10, 10],\n    html: \"\"\n};\n\n\nif (inBrowser) vizPrototype.tooltip = tooltip();\nelse vizPrototype.tooltip = noop;\n\n\nmouseStrategies.set('tooltip', function () {\n\n    function tooltip (viz, sel, d, i) {\n        var html = viz.tooltipHtml(sel, d, i);\n        if (html) {\n            var model = viz.getModel('tooltip');\n            viz.tooltip.location(model.location).offset(model.offset).html(html).show(sel.node());\n        }\n    }\n\n    tooltip.out = function (viz) {\n        viz.tooltip.hide();\n    };\n\n    return tooltip;\n}());\n\n\nvizPrototype.tooltipHtml = function (sel, d, i) {\n    var model = this.getModel('tooltip');\n    if (model.html)\n        return this.dataStore.eval(model.html, {\n            d: d,\n            index: i,\n            model: this.getModel()\n        });\n};\n\n\nfunction tooltip () {\n\n    var location = functor('top'),\n        offset = functor([0, 0]),\n        html = functor(' '),\n        node = null,\n        point = null;\n\n    const locationCallbacks = map({\n        top,\n        bottom,\n        right,\n        left,\n        'top-left': topLeft,\n        'top-right': topRight,\n        'bottom-left': bottomLeft,\n        'bottom-right': bottomRight\n    });\n\n    const locations = locationCallbacks.keys();\n\n    function selectNode() {\n        if (node === null) {\n            node = select(document.body)\n                        .append('div')\n                        .classed('d3-tooltip', true)\n                        .style('position', 'absolute')\n                        .style('top', 0)\n                        .style('opacity', 0)\n                        .style('pointer-events', 'none')\n                        .style('box-sizing', 'border-box')\n                        .node();\n            point = select(document.body)\n                        .append('svg')\n                        .style('opacity', 0)\n                        .style('pointer-events', 'none')\n                        .node().createSVGPoint();\n        }\n        return select(node);\n    }\n\n    function tooltip () {\n    }\n\n    tooltip.show = function (target) {\n        var args = Array.prototype.slice.call(arguments),\n            snode = selectNode(),\n            content = html.apply(this, args) || '',\n            poffset = offset.apply(this, args),\n            dir = location.apply(this, args),\n            scrollTop  = document.documentElement.scrollTop || document.body.scrollTop,\n            scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft,\n            coords;\n\n        snode.html(content).style('opacity', 1).style('pointer-events', 'all');\n\n        let i = locations.length;\n        while (i--) snode.classed(locations[i], false);\n        coords = locationCallbacks.get(dir).call(this, target, poffset);\n        snode.classed(dir, true)\n            .style('top', coords.top + scrollTop + 'px')\n            .style('left', coords.left + scrollLeft + 'px');\n\n        return tooltip;\n    };\n\n    tooltip.hide = function () {\n        selectNode().style('opacity', 0).style('pointer-events', 'none');\n        return tooltip;\n    };\n\n    // Returns tip or location\n    tooltip.location = function (v) {\n        if (!arguments.length) return location;\n        location = v === null ? v : functor(v);\n        return tooltip;\n    };\n\n    tooltip.html = function(v) {\n        if (!arguments.length) return html;\n        html = v === null ? v : functor(v);\n        return tooltip;\n    };\n\n    tooltip.offset = function(v) {\n        if (!arguments.length) return offset;\n        offset = v == null ? v : functor(v);\n        return tooltip;\n    };\n\n    return tooltip;\n\n\n\n    function top (target, offset) {\n        var bbox = getScreenBBox(target);\n        return {\n            left: bbox.n.x - node.offsetWidth / 2,\n            top:  bbox.n.y - node.offsetHeight - offset[1]\n        };\n    }\n\n\n    function bottom (bb, box, options) {\n        return {\n            top: box.total.left + (box.innerWidth - bb.width)/2,\n            left: box.height - bb.height - options.offsetY\n        };\n    }\n\n\n    function right (target, offset) {\n        var bbox = getScreenBBox(target);\n        return {\n            left: bbox.e.x + offset[0],\n            top:  bbox.e.y - node.offsetHeight / 2,\n        };\n    }\n\n\n    function left (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: options.offsetY\n        };\n    }\n\n\n    function topLeft (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: options.offsetY\n        };\n    }\n\n\n    function topRight (bb, box, options) {\n        return {\n            x: box.width - bb.width - options.offsetX,\n            y: options.offsetY\n        };\n    }\n\n\n    function bottomLeft (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: box.height - bb.height - options.offsetY\n        };\n    }\n\n\n    function bottomRight (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: box.height - bb.height - options.offsetY\n        };\n    }\n\n\n    // Private - gets the screen coordinates of a shape\n    //\n    // Given a shape on the screen, will return an SVGPoint for the locations\n    // n(north), s(south), e(east), w(west), ne(northeast), se(southeast),\n    // nw(northwest), sw(southwest).\n    //\n    //    +-+-+\n    //    |   |\n    //    +   +\n    //    |   |\n    //    +-+-+\n    //\n    // Returns an Object {n, s, e, w, nw, sw, ne, se}\n    function getScreenBBox (targetel) {\n\n        while (targetel.getScreenCTM == null && targetel.parentNode == null) {\n            targetel = targetel.parentNode;\n        }\n\n        var bbox = {},\n            matrix = targetel.getScreenCTM(),\n            tbbox = targetel.getBBox(),\n            width = tbbox.width,\n            height = tbbox.height,\n            x = tbbox.x,\n            y = tbbox.y;\n\n        point.x = x;\n        point.y = y;\n        bbox.nw = point.matrixTransform(matrix);\n        point.x += width;\n        bbox.ne = point.matrixTransform(matrix);\n        point.y += height;\n        bbox.se = point.matrixTransform(matrix);\n        point.x -= width;\n        bbox.sw = point.matrixTransform(matrix);\n        point.y -= height / 2;\n        bbox.w = point.matrixTransform(matrix);\n        point.x += width;\n        bbox.e = point.matrixTransform(matrix);\n        point.x -= width / 2;\n        point.y -= height / 2;\n        bbox.n = point.matrixTransform(matrix);\n        point.y += height;\n        bbox.s = point.matrixTransform(matrix);\n\n        return bbox;\n    }\n}\n","//\n//\n//  Expand viusals layers and visuals\n//  =======================================\n//\nimport {visuals} from '../core/base';\nimport {locations} from './legend';\nimport {KEYS} from './margin';\n\nvisuals.options.expand = {\n    location: 'top-right',\n    expandText: 'expand',\n    collapseText: 'collapse',\n    height: 15,\n    width: 15,\n    radius: 3,\n    offset: [0, 0],\n    stroke: '#adadad',\n    fill: '#fff',\n    fillOver: '#e6e6e6',\n    textColor: '#111'\n};\n\n\n\nvisuals.events.on('after-draw.expand', viz => {\n    var visual = viz.visualParent;\n    if (!viz.isViz || visual.layers.length <= 1) return;\n\n    var model = viz.getModel('expand');\n    // If not expanded already check if this can be expanded\n    if (!viz.__expanded)\n        if (!model.location || !hasMargin(viz.getModel('padding'))) return;\n\n    var font = viz.getModel('font'),\n        box = viz.boundingBox(),\n        button = viz.group('expand'),\n        node = button.node(),\n        size = Math.floor(0.8*Math.min(model.width, model.height)),\n        buttonText = viz.__expanded ? model.collapseText : model.expandText,\n        firstPass = false;\n\n    if (!button.select('rect').size()) {\n        firstPass = true;\n        button.attr('cursor', 'pointer')\n                .on(\"mouseover\", mouseOver)\n                .on(\"mouseout\", mouseOut);\n\n        button.append('rect')\n            .classed('button', true)\n            .attr('x', 0)\n            .attr('y', 0)\n            .attr('rx', model.radius)\n            .attr('ry', model.radius)\n            .attr('width', model.width)\n            .attr('height', model.height)\n            .attr('stroke', model.stroke)\n            .attr('fill', model.fill)\n            .attr('cursor', 'pointer');\n\n        button\n            .append('text')\n            .attr('x', model.width/2)\n            .attr('y', model.height/2)\n            .attr('fill', model.textColor)\n            .attr('font-family', model.fontFamily || font.family)\n            .attr('text-anchor', \"middle\")\n            .attr('alignment-baseline', \"middle\")\n            .attr('font-size', size);\n\n        button.append('rect')\n            .classed('placeholder', true)\n            .attr('x', 0)\n            .attr('y', 0)\n            .attr('rx', model.radius)\n            .attr('ry', model.radius)\n            .attr('width', model.width)\n            .attr('height', model.height)\n            .attr('stroke', 'none')\n            .attr('fill', 'transparent')\n            .on(\"click\", click);\n    }\n\n    button.select('text').text(() => buttonText);\n    var bb = locations.get(model.location).call(viz, node.getBBox(), box, model);\n    if (!firstPass) button = button.transition(viz.transition('expand'));\n    button.attr('transform', viz.translate(bb.x, bb.y));\n\n    function mouseOver() {\n        viz.select(this).select('rect.button')\n            .attr('fill', model.fillOver);\n    }\n\n    function mouseOut() {\n        viz.select(this).select('rect.button')\n            .attr('fill', model.fill);\n    }\n\n    function click() {\n        var pd = viz.getModel('padding');\n        mouseOut.call(this);\n        if (!viz.__expanded) {\n            viz.__expanded = {\n                padding: KEYS.reduce((o, key) => {\n                    if(pd[key]) {\n                        o[key] = pd[key];\n                        pd[key] = 0;\n                    }\n                    return o;\n                }, {})\n            };\n            visual.deactivate();\n            viz.activate();\n        } else {\n            var padding = viz.__expanded.padding;\n            delete viz.__expanded;\n            visual.activate();\n            KEYS.forEach(key => {\n                if (padding[key]) pd[key] = padding[key];\n            });\n        }\n        visual.redraw(false);\n    }\n\n});\n\n\nfunction hasMargin(mg) {\n    return mg.left || mg.right || mg.top || mg.bottom;\n}\n","import {transition} from 'd3-transition';\n\nimport {vizPrototype} from '../core/chart';\nimport {visuals} from '../core/base';\n\n\nvisuals.options.transition = {\n    duration: 250,\n    delay: 0,\n    ease: null\n};\n\n\nvizPrototype.transition = function (name) {\n    var uname = this.idname(name),\n        model = this.getModel('transition');\n    return transition(uname).duration(model.duration);\n};\n\n\nvizPrototype.applyTransform = function (sel, transform) {\n    //var cname = sel.attr('class'),\n    ///    model = this.getModel('transition'),\n    //    tr = cname ? transition(cname).duration(model.duration) : null,\n    var t = sel.attr('transform');\n    if (!t) sel.attr('transform', transform);\n    sel.transition().attr('transform', transform);\n};\n","import {vizPrototype} from '../core/chart';\n\n\nvizPrototype.brushX = function () {\n    return this.$.brushX();\n};\n\nvizPrototype.brushY = function () {\n    return this.$.brushY();\n};\n\nvizPrototype.brush = function () {\n    return this.$.brush();\n};\n","import createVisual, {visuals} from './base';\nimport warn from '../utils/warn';\n\n\nexport default createVisual('container', {\n\n    initialise () {\n        this.live = [];\n        if (this.visualParent) this.visualParent.live.push(this);\n    },\n\n    draw (fetchData) {\n        if (this.drawing) {\n            warn(`${this.toString()} already drawing`);\n            return this.drawing;\n        }\n        var self = this;\n        visuals.events.call('before-draw', undefined, self);\n        return Promise.all(this.live.map(visual => visual.redraw(fetchData))).then(() => {\n            delete self.drawing;\n            visuals.events.call('after-draw', undefined, self);\n        });\n    },\n\n    destroy () {\n        this.pop(this.visualParent);\n    }\n});\n","import {isString, isObject, assign} from 'd3-let';\n\nimport VisualContainer from '../core/container';\nimport warn from '../utils/warn';\n\n//\n//  vizComponent base prototype\n//  =============================\n//\n//  Some common properties and methods for all visualize components\n//\nexport const vizComponent = {\n    props: [\n        'schema',\t    // Schema is a collection of fields to display in the table\n        'datasource',\t// Data source\n        'plugins',      // list of string/objects\n        'options'\n\t],\n\n    render (props, attrs, el) {\n        var self = this,\n            inner = this.select(el).html();\n        //\n        // build\n        return this.getSchema(props.schema, schema => {\n            if (!isObject(schema)) schema = {};\n            schema = assign({}, props.options, schema);\n            return self.build(schema, inner, attrs);\n        });\n    },\n\n    // get the schema from the input schema property\n    getSchema (input, build) {\n        var parent = this.model.visual;\n\n        // allow to specify the schema as an entry of\n        // visuals object in the dashboard schema\n        if (parent && parent !== this.model && isString(input)) {\n            var schema = parent.getVisualSchema(input);\n            if (schema) input = schema;\n        }\n\n        if (isString(input)) {\n            return this.json(input).then(build).catch(err => {\n                warn(`Could not reach ${input}: ${err}`, err);\n            });\n        }\n        else return build(input);\n    },\n    //\n    // build the visual component has the schema available\n    build () {}\n};\n//\n//  Dashboard Component\n//  ========================\n//\n//  A collection of visual components arranged according\n//  to a custom layout.\n//\n//  * Dashboard visuals are independent of each other but\n//    interact via the data object\n//  * The Dashboard layout is given by the inner HTML elements\n//  * The configuration is obtained via the schema property which\n//    can be either:\n//      1) an object\n//      2) a url\nexport default assign({}, vizComponent, {\n\n    build (schema, inner, attrs) {\n        var model = this.model,\n            sel = this.createElement('div'),\n            root = model.root;\n        if (attrs.class) sel.attr('class', attrs.class);\n        if (!schema.visuals) schema.visuals = {};\n        model.visual = new VisualContainer(sel.node(), schema, model.visual, model.visual ? null : model.$new());\n        if (!root.visualDashboard) root.visualDashboard = model.visual;\n        return sel.html(inner);\n    }\n});\n","import {pop, assign} from 'd3-let';\n\nimport {vizComponent} from './dashboard';\nimport Visual from '../core/visual';\n\n\n//\n//  Visual component\n//  ======================\n//\n//  An element containing a visualization\nexport default assign({}, vizComponent, {\n\n    build (schema, inner, attrs) {\n        var sel = this.createElement('div'),\n            type = schema.type || 'visual',\n            model = this.model,\n            visualDrawOnMount = pop(schema, 'visualDrawOnMount'),\n            options = {},\n            layers;\n\n        if (attrs.class) sel.attr('class', attrs.class);\n\n        if (type === 'visual') {\n            layers = pop(schema, 'layers');\n            options = schema;\n        }\n        else\n            options.visual = pop(schema, 'visual') || {};\n\n        if (visualDrawOnMount !== undefined) model.visualDrawOnMount = visualDrawOnMount;\n        model.visual = new Visual(sel.node(), options, model.visual, model.visual ? null : model.$new());\n        if (type !== 'visual') model.visual.addVisual(schema);\n        else if (layers) {\n            layers.forEach(layer => model.visual.addVisual(layer));\n        }\n        return sel;\n    },\n\n    // once the element is mounted in the dom, draw the visual\n    mounted () {\n        if (this.model.visualDrawOnMount === false) return;\n        this.model.visual.redraw();\n    }\n});\n","//\n//  d3-view components\n//  ======================\n//\n//  d3-view plugin for visualization components\n//\n//  visual plugins first\nimport '../plugins/scale';\nimport '../plugins/menu';\nimport '../plugins/data';\nimport '../plugins/format';\nimport '../plugins/font';\nimport '../plugins/responsive';\nimport '../plugins/title';\nimport '../plugins/margin';\nimport '../plugins/axis';\nimport '../plugins/shapes';\nimport '../plugins/color';\nimport '../plugins/legend';\nimport '../plugins/tooltip';\nimport '../plugins/mouse';\nimport '../plugins/expand';\nimport '../plugins/transition';\nimport '../plugins/brush';\nimport dashboard from './dashboard';\nimport visual from './visual';\n\n\n// Visual components plugin\nexport default {\n\n    install (vm) {\n        vm.addComponent('dashboard', dashboard);\n        vm.addComponent('visual', visual);\n    }\n\n};\n","export default function (a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","import constant from \"../utils/constant\";\nimport descending from \"../utils/descending\";\nimport identity from \"../utils/identity\";\n\n//\n//  Pyramid Shape generator\n//  ============================\nexport default function () {\n    var value = identity,\n        pad = constant(0),\n        height = 1,\n        base = 1;\n\n    function pyramid (data) {\n        let i, j, k, points, fraction,\n            hi, x, y, v0, ph, pj;\n        var n = data.length,\n            r = 0.5*base/height,\n            polygons = new Array(n),\n            index = new Array(n);\n\n        for (i=0; i<n; ++i) {\n            polygons[index[i] = i] = +value(data[i], i, data);\n        }\n\n        // Sort the polygons\n        index.sort((i, j) => {return descending(polygons[i], polygons[j]);});\n\n        // Compute the polygons! They are stored in the original data's order.\n        v0 = polygons[index[0]];\n        hi = null;\n\n        for (i=n-1; i>=0; --i) {\n            points = [];\n            if (hi === null)\n                points.push([0, 0]);\n            else {\n                y = hi + ph;\n                x = y*r;\n                points.push([x, y]);\n                points.push([-x, y]);\n            }\n            j = index[i];\n            k = n - i - 1;\n            fraction = polygons[j]/v0;\n            pj = Math.sqrt(fraction);\n            hi = height*pj;\n            ph = i ? pad(pj, k) : 0;\n            y = hi - ph;\n            x = y*r;\n            points.push([-x, y]);\n            points.push([x, y]);\n            polygons[j] = {\n                index: k,\n                value: polygons[j],\n                fraction: fraction,\n                points: points,\n                data: data[j]\n            };\n        }\n        return polygons;\n    }\n\n    pyramid.value = function(_) {\n        return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pyramid) : value;\n    };\n\n    pyramid.base = function (_) {\n        return arguments.length ? (base = _, pyramid) : base;\n    };\n\n    pyramid.height = function (_) {\n        return arguments.length ? (height = _, pyramid) : height;\n    };\n\n    pyramid.pad = function(_) {\n        return arguments.length ? (pad = typeof _ === \"function\" ? _ : constant(+_), pyramid) : pad;\n    };\n\n    return pyramid;\n}\n","export default function (range, splits) {\n    var x0 = range[0],\n        x1 = range[1],\n        dx = (x1 - x0)/splits,\n        n = Math.floor(Math.log10(dx)),\n        v = Math.pow(10, n);\n    if (dx/v > 5) v *= 10;\n    v *= 0.1;\n\n    var ndx = v*Math.ceil(dx/v),\n        nx0 = v*Math.floor(x0/v);\n    return [nx0, nx0 + splits*ndx];\n}\n","import {color} from 'd3-color';\n\n\nexport default function (c, white, black) {\n    c = color(c);\n    return (c.r*0.299 + c.g*0.587 + c.b*0.114) > 186 ? (black || '#000') : (white || '#fff');\n}\n","import {select} from 'd3-selection';\n\nimport functor from './functor';\n\n\n//Text wrapping code adapted from Mike Bostock\nexport default function (text, width, callback) {\n    width = functor(width);\n\n    text.each(function(d, i) {\n        var text = select(this),\n            dy = parseFloat(text.attr(\"dy\")) || 0,\n            wd = width(d, i),\n            lineHeight = 1.2,\n            lines = text.text().split('\\n');\n\n        let word, words, done,\n            tspan = text.text(null)\n                        .append(\"tspan\")\n                        .attr(\"x\", 0)\n                        .attr(\"dy\", dy + \"em\");\n\n        lines.forEach((t, i) => {\n            done = [];\n            words = t.split(/\\s+/).reverse();\n            if (i)\n                tspan = text.append(\"tspan\")\n                        .attr(\"x\", 0)\n                        .attr(\"dy\", lineHeight + dy + \"em\");\n\n            while (word = words.pop()) {\n                done.push(word);\n                tspan.text(done.join(' '));\n                if (tspan.node().getComputedTextLength() > wd && done.length > 1) {\n                    done.pop();\n                    tspan.text(done.join(' '));\n                    done = [word];\n                    tspan = text.append(\"tspan\")\n                                .attr(\"x\", 0)\n                                .attr(\"dy\", lineHeight + dy + \"em\")\n                                .text(word);\n                }\n            }\n        });\n\n        if (callback)\n            text.selectAll('tspan')\n                .each(callback);\n    });\n}\n","import {assign} from 'd3-let';\n\nimport {visuals} from '../core/base';\n\nconst curveTypes = [\n    \"basis\", \"basisClosed\", \"basisOpen\", \"bundle\",\n    \"cardinal\", \"cardinalClosed\", \"cardinalOpen\",\n    \"catmullRom\", \"catmullRomClosed\", \"catmullRomOpen\",\n    \"linear\", \"linearClosed\", \"monotoneX\", \"monotoneY\",\n    \"natural\", \"step\", \"stepAfter\", \"stepBefore\"\n];\n\nconst scales = [\"linear\", \"log\", \"time\"];\n\nassign(visuals.schema.definitions, {\n    curve: {\n        type: \"string\",\n        description: \"curve type for line and area charts\",\n        default: \"natural\",\n        enum: curveTypes\n    },\n    stack: {\n        type: \"object\",\n        properties: {\n            order: {\n                type: \"string\",\n                enum: ['ascending', 'descending', 'insideOut', 'none', 'reverse'],\n                default: 'none'\n            },\n            offset: {\n                type: \"string\",\n                enum: ['diverging', 'expand', 'none', 'silhouette', 'wiggle'],\n                default: 'none'\n            }\n        }\n    }\n});\n\nexport default {\n    lineWidth: {\n        type: \"number\",\n        default: 1\n    },\n    curve: {\n        \"$ref\": \"#/definitions/curve\"\n    },\n    cornerRadius: {\n        type: \"number\",\n        default: 0,\n        minimum: 0,\n        description: \"corner radius in pixels\"\n    },\n    x: {\n        type: \"string\",\n        description: \"data accessor for the x coordinate\",\n        default: \"x\"\n    },\n    y: {\n        type: \"string\",\n        description: \"data accessor for the y coordinate\",\n        default: \"y\"\n    },\n    scaleX: {\n        type: \"string\",\n        description: \"scale for the x coordinate\",\n        enum: scales,\n        default: \"linear\"\n    },\n    scaleY: {\n        type: \"string\",\n        description: \"scale for the y coordinate\",\n        enum: scales,\n        default: \"linear\"\n    },\n    axisX: {\n        type: \"boolean\",\n        description: \"draw x axis\",\n        default: false\n    },\n    axisY: {\n        type: \"boolean\",\n        description: \"draw y axis\",\n        default: false\n    },\n    groupby: {\n        type: \"string\",\n        description: \"Group data by a given dimension\"\n    },\n    stack: {\n        \"$ref\": \"#/definitions/stack\"\n    },\n    gradient: {\n        type: \"boolean\",\n        description: \"Gradient to zero opacity\",\n        default: false\n    },\n    lineDarken: {\n        type: \"number\",\n        description: \"Darken line color\",\n        minimum: 0,\n        maximum: 1,\n        default: 0.2\n    }\n};\n","import {assign} from 'd3-let';\nimport {max} from 'd3-array';\n\nimport createChart from '../core/chart';\nimport colorContrast from '../utils/contrast';\nimport textWrap from '../utils/text-wrapping';\nimport defs from './defs';\n\n\nconst baselines = {\n    center: \"middle\",\n    top: \"hanging\",\n    bottom: \"baseline\",\n    outside: \"baseline\"\n};\nconst heightShifts = {\n    center (d, h) {\n        return h/2;\n    },\n    top (d, h, offset) {\n        return offset;\n    },\n    bottom (d, h, offset) {\n        return h - offset;\n    },\n    outside (d, h, offset) {\n        return -offset;\n    }\n};\n\n//\n//  Bar Chart\n//  =============\n//\n//  The barchart is one of the most flexible visuals.\n//  It can be used to display label data as well as\n//  timeserie data. It can display absulte values as\n//  proportional data via vertical staking and normalization\nexport default createChart('barchart', {\n    requires: ['d3-scale', 'd3-axis', 'd3-svg-legend'],\n\n    schema: {\n        x: defs.x,\n        y: defs.y,\n        orientation: {\n            type: \"string\",\n            enum: ['vertical', 'orizontal'],\n            default: 'vertical'\n        },\n        groupby: defs.groupby,\n        stack: defs.stack,\n        waffle: {\n            \"type\": \"boolean\",\n            description: \"ability to draw a waffle chart\"\n        },\n        normalize: {\n            \"type\": \"boolean\"\n        },\n        lineWidth: defs.lineWidth,\n        cornerRadius: defs.cornerRadius,\n        axisX: defs.axisX,\n        axisY: defs.axisY,\n        scaleY: defs.scaleY,\n        //\n        sortby: {\n            type: \"string\",\n            enum: ['x', 'y']\n        },\n        label: {\n            type: \"string\",\n            description: \"expression for label text\"\n        },\n        scaleX: {\n            type: 'object',\n            default: {\n                type: 'band',\n                padding: 0.2\n            },\n            properties: {\n                type: {\n                    type: 'string'\n                },\n                padding: {\n                    type: 'number'\n                }\n            }\n        }\n    },\n\n    options: {\n        //\n        // allow to place labels in bars\n        labelLocation: \"center\",\n        labelOffset: 10,\n        labelWidth: 0.7,\n        //\n        // legend & tooltip\n        valueformat: '.1f',\n        legendType: 'color',\n        legendLabel: 'label'\n    },\n\n    doDraw () {\n        var model = this.getModel(),\n            frame = this.frame,\n            data = frame.data,\n            box = this.boundingBox(),\n            group = this.group(),\n            chart = this.group('chart'),\n            x = model.x,\n            y = model.y,\n            groupby = model.groupby,\n            barChart = model.orientation === 'vertical' ? new VerticalBarChart(this) : new HorizontalBarChart(this);\n\n        let groups, stacked = false;\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left, box.margin.top));\n\n        if (groupby) {\n            groups = frame.dimension(groupby).group().top(Infinity).map(g => g['key']);\n            if (groups.length <= 1) groups = null;\n        }\n\n        if (groups) {\n            var gframe = frame.pivot(x, groupby, y);\n            if (model.sortby === 'y') gframe = gframe.sortby('total');\n            data = gframe.data;\n            barChart.sz.domain(groups).range(this.fill(groups).colors);\n            if (model.stack) {\n                if (model.normalize)\n                    data = this.normalize(gframe);\n                stacked = true;\n            }\n        } else {\n            barChart.sz.domain([y]).range(this.fill([y]).colors);\n            stacked = true;\n        }\n\n        // set domain for the labels\n        var domainX = data.map(d => d[x]);\n        barChart.sx.domain(domainX);\n        //\n        // Stacked bar chart\n        if (stacked || !groups)\n            barChart.stacked(chart, data, groups);\n        else\n            barChart.grouped(chart, data, groups);\n\n        // Axis\n        barChart.axis(domainX);\n        // Legend\n        barChart.legend(groups);\n    }\n});\n\n\nfunction VerticalBarChart (viz) {\n    this.vertical = true;\n    this.init(viz);\n    this.sx.rangeRound([0, this.box.innerWidth]);\n    this.sy.rangeRound([this.box.innerHeight, 0]);\n}\n\nfunction HorizontalBarChart (viz) {\n    this.init(viz);\n    this.sx.rangeRound([0, this.box.innerHeight]);\n    this.sy.rangeRound([0, this.box.innerWidth]);\n}\n\nconst barChartPrototype = {\n\n    init (viz) {\n        this.viz = viz;\n        this.model = viz.getModel();\n        this.box = viz.boundingBox();\n        this.sx = viz.getScale(this.model.scaleX),\n        this.sy = viz.getScale(this.model.scaleY),\n        this.sz = viz.getScale('ordinal');\n    },\n\n    legend (groups) {\n        if (groups) this.viz.legend({\n            type: 'color',\n            scale: this.sz\n        }, this.box);\n    },\n\n    stacked (chart, data, groups) {\n        var color = this.viz.getModel('color'),\n            sx = this.sx,\n            sy = this.sy,\n            sz = this.sz,\n            x = this.model.x,\n            y = this.model.y,\n            viz = this.viz,\n            radius = this.model.cornerRadius;\n        let bars = chart.selectAll('.group'),\n            width, height, xrect, yrect, yi, rects;\n\n        if (groups) {\n            this.sy.domain([0, max(data, d => d.total)]).nice();\n        } else {\n            this.sy.domain([0, max(data, d => d[y])]).nice();\n            groups = [this.model.y];\n        }\n\n        if (this.vertical) {\n            xrect = x0;\n            yrect = y0;\n            width = sx.bandwidth;\n            height = bardim;\n            yi = 1;\n        } else {\n            xrect = y0;\n            yrect = x0;\n            width = bardim;\n            height = sx.bandwidth;\n            yi = 0;\n        }\n        data = viz.getStack().keys(groups)(data);\n        bars = bars.data(data);\n        bars.exit().transition().style('opacity', 0).remove();\n\n        rects = bars.enter()\n                        .append('g')\n                        .classed('group', true)\n                        .attr('fill', d => sz(d.key))\n                    .merge(bars)\n                        .attr('fill', d => sz(d.key))\n                        .attr('stroke', viz.modelProperty('stroke', color))\n                        .attr('stroke-opacity', viz.modelProperty('strokeOpacity', color))\n                        .selectAll('rect')\n                        .data(stackedData);\n\n        rects.enter()\n            .append('rect')\n                .attr('x', xrect)\n                .attr('y', yrect)\n                .attr('height', height)\n                .attr('width', width)\n                .attr('rx', radius)\n                .attr('ry', radius)\n                .on(\"mouseover\", viz.mouseOver())\n                .on(\"mouseout\", viz.mouseOut())\n            .merge(rects)\n                .transition()\n                .attr('x', xrect)\n                .attr('y', yrect)\n                .attr('height', height)\n                .attr('width', width);\n\n        rects.exit().transition().style('opacity', 0).remove();\n\n        // add labels\n        if (this.model.label) {\n            var font = viz.getModel('font'),\n                label = this.model.label,\n                fontSize = `${viz.font(this.box)}px`,\n                labels = chart.selectAll('.labels').data(data),\n                baseline = this.vertical ? baselines[this.model.labelLocation] || \"baseline\" : \"middle\",\n                heightShift = heightShifts[this.model.labelLocation],\n                labelWidth = this.model.labelWidth,\n                labelOffset = this.model.labelOffset;\n\n            rects = labels.enter()\n                    .append('g')\n                    .classed('labels', true)\n                .merge(labels)\n                    .selectAll('text')\n                    .data(stackedData);\n\n            rects.enter()\n                .append('text')\n                .classed('label', true)\n                .attr(\"transform\", labelTranslate)\n                .style(\"fill\", fillLabel)\n                .style('font-size', fontSize)\n                .text(labelText)\n            .merge(rects)\n                .text(labelText)\n                .style('font-size', fontSize)\n                .call(textWrap, d => labelWidth*width(d), labelAlign)\n                .transition(viz.transition('text'))\n                .attr(\"transform\", labelTranslate)\n                .style(\"fill\", fillLabel);\n        }\n\n        function bardim (d) {\n            return sy(d[1-yi]) - sy(d[yi]);\n        }\n\n        function x0 (d) {\n            return sx(d.data[x]);\n        }\n\n        function y0 (d) {\n            return sy(d[yi]);\n        }\n\n        function stackedData (d) {\n            d.forEach(r => {\n                r.key = d.key;\n                r.value = r.data[d.key];\n            });\n            return d;\n        }\n\n        function labelTranslate (d, index) {\n            var x = xrect(d, index) + width(d, index)/2,\n                y = yrect(d, index) + heightShift(d, height(d, index), labelOffset);\n            return viz.translate(x, y);\n        }\n\n        function fillLabel (d) {\n            return colorContrast(sz(d.key), '#fff', font.stroke);\n        }\n\n        function labelText (d, index) {\n            return viz.dataStore.eval(label, {d: d, index: index});\n        }\n\n        function labelAlign () {\n            viz.select(this)\n                .attr(\"alignment-baseline\", baseline)\n                .attr(\"text-anchor\", \"middle\");\n        }\n    },\n\n    grouped (chart, data, groups) {\n        var color = this.viz.getModel('color'),\n            sx = this.sx,\n            sy = this.sy,\n            sz = this.sz,\n            x = this.model.x,\n            viz = this.viz,\n            radius = this.model.cornerRadius,\n            padding = sx.paddingInner(),\n            x1 = viz.getScale('band')\n                    .domain(groups)\n                    .paddingInner(0.5*padding),\n            bars = chart.selectAll('.group');\n        let width, height, xrect, rects;\n\n        // set the value domain\n        sy.domain([0, max(data, maxValue)]).nice();\n\n        if (this.vertical) {\n            x1.rangeRound([0, sx.bandwidth()]);\n            xrect = gx;\n            width = x1.bandwidth;\n            height = gh;\n        } else {\n            xrect = gx;\n            height = x1.bandwidth;\n            width = gh;\n        }\n\n        bars = bars.data(data);\n        bars.exit().remove();\n        //\n        // join for rectangles\n        rects = bars\n            .enter()\n                .append('g')\n                .classed('group', true)\n                .attr(\"transform\", d => viz.translate(xrect(d), 0))\n            .merge(bars)\n                .attr(\"transform\", d => viz.translate(xrect(d), 0))\n                .selectAll('rect')\n                .data(groupData);\n        //\n        rects.exit()\n            .transition()\n            .style('opacity', 0)\n            .remove();\n        //\n        rects\n            .enter()\n                .append('rect')\n                .attr('x', d => x1(d.key))\n                .attr('y', gy)\n                .attr('rx', radius)\n                .attr('ry', radius)\n                .attr('height', height)\n                .attr('width', width)\n                .attr('stroke-width', this.model.lineWidth)\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', 0)\n                .attr('fill', d => sz(d.key))\n                .on(\"mouseover\", viz.mouseOver())\n                .on(\"mouseout\", viz.mouseOut())\n            .merge(rects)\n                .transition(viz.transition('rect'))\n                .attr('x', d => x1(d.key))\n                .attr('y', gy)\n                .attr('height', height)\n                .attr('width', width)\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', color.strokeOpacity)\n                .attr('fill', d => sz(d.key));\n\n        rects.exit().remove();\n\n        function gx (d) {\n            return sx(d[x]);\n        }\n\n        function gy (d) {\n            return sy(d.value);\n        }\n\n        function gh (d) {\n            return sy(0) - sy(d.value);\n        }\n\n        function groupData (d) {\n            return groups.map(key => {\n                return {key: key, value: d[key]};\n            });\n        }\n\n        function maxValue (d) {\n            return groups.reduce((v, key) => {\n                return Math.max(v, d[key]);\n            }, 0);\n        }\n    }\n};\n\n\nVerticalBarChart.prototype = assign({}, barChartPrototype, {\n    axis (domainX) {\n        if (this.model.axisX)\n            this.viz.xAxis1(this.model.axisX === true ? \"bottom\" : this.model.axisX, this.sx, this.box, domainX[0]);\n        if (this.model.axisY)\n            this.viz.yAxis1(this.model.axisY === true ? \"left\" : this.model.axisY, this.sy, this.box);\n    }\n});\n\nHorizontalBarChart.prototype = assign({}, barChartPrototype, {\n    axis (domainX) {\n        if (this.model.axisX)\n            this.viz.xAxis1(this.model.axisX === true ? \"left\" : this.model.axisX, this.sx, this.box, domainX[0]);\n        if (this.model.axisY)\n            this.viz.yAxis1(this.model.axisY === true ? \"bottom\" : this.model.axisY, this.sy, this.box);\n    }\n});\n","import {extent} from 'd3-array';\n\n//\n//  Create a Grouper generator\n//  ===============================\n//\n//  This is a chart transform rather than a data transform\nexport default function () {\n    var groupby = null,\n        x = 'x',\n        y = 'y',\n        sort = false,\n        stack = null,\n        normalize = false;\n\n    function grouper (frame) {\n        let stacked = false,\n            data, labels, s;\n\n        if (groupby) {\n            labels = frame.dimension(groupby).group().top(Infinity).map(g => g['key']).sort();\n            if (labels.length <= 1) labels = null;\n        }\n\n        if (labels) {\n            frame = frame.pivot(x, groupby, y);\n            if (sort) frame = frame.sortby('total');\n            data = frame.data;\n            if (stack) {\n                if (normalize)\n                    data = normalizeData(data);\n                data = stack.keys(labels)(data);\n                stacked = true;\n            }\n        } else {\n            data = frame.data;\n            labels = [y];\n        }\n\n        if (!stacked)\n            data = labels.map((key, index) => {\n                s = data.map(d => {\n                    s = [0, d[key]];\n                    s.data = d;\n                    return s;\n                });\n                s.index = index;\n                s.key = key;\n                return s;\n            });\n\n        return new GroupedData(data, x, y, stacked);\n    }\n\n    grouper.groupby = function(_) {\n        if (arguments.length) {\n            groupby = _;\n            return grouper;\n        }\n        return groupby;\n    };\n\n    grouper.x = function(_) {\n        return arguments.length ? (x = _, grouper) : x;\n    };\n\n    grouper.y = function(_) {\n        return arguments.length ? (y = _, grouper) : y;\n    };\n\n    grouper.normalize = function(_) {\n        return arguments.length ? (normalize = _, grouper) : normalize;\n    };\n\n    grouper.stack = function(_) {\n        return arguments.length ? (stack = _, grouper) : stack;\n    };\n\n    return grouper;\n}\n\n\nfunction GroupedData (data, x, y, stacked) {\n    this.data = data;\n    this.stacked = stacked;\n    this.x = x;\n    this.y = y;\n}\n\nGroupedData.prototype = {\n    rangeX () {\n        return this.range(this.x);\n    },\n    rangeY () {\n        return this.range();\n    },\n    range (key) {\n        let range, vals;\n        if (key)\n            vals = this.data.reduce((a, d) => {\n                range = extent(d, acc);\n                a.push(range[0]);\n                a.push(range[1]);\n                return a;\n            }, []);\n        else\n        vals = this.data.reduce((a, d) => {\n            range = extent(d, acc0);\n            a.push(range[0]);\n            a.push(range[1]);\n            range = extent(d, acc1);\n            a.push(range[0]);\n            a.push(range[1]);\n            return a;\n        }, []);\n        return extent(vals);\n\n        function acc0 (d) {\n            return d[0];\n        }\n\n        function acc1 (d) {\n            return d[1];\n        }\n\n        function acc (d) {\n            return d.data[key];\n        }\n    }\n};\n\n\nfunction normalizeData (data) {\n    return data;\n}\n","import {isFunction} from 'd3-let';\n\nimport createChart from '../core/chart';\nimport grouper from '../transforms/groups';\nimport defs from './defs';\n//\n//  Line Chart\n//  =============\n//\n//  The barchart is one of the most flexible visuals.\n//  It can be used to display label data as well as\n//  timeserie data. It can display absulte values as\n//  proportional data via vertical staking and normalization\nexport default createChart('linechart', {\n    requires: ['d3-scale', 'd3-shape', 'd3-axis', 'd3-svg-legend'],\n\n    schema: {\n        lineWidth: defs.lineWidth,\n        curve: defs.curve,\n        x: defs.x,\n        y: defs.y,\n        scaleX: defs.scaleX,\n        scaleY: defs.scaleY,\n        groupby: defs.groupby,\n        axisX: defs.axisX,\n        axisY: defs.axisY\n    },\n\n    doDraw () {\n        var model = this.getModel(),\n            frame = this.frame,\n            x = model.x,\n            y = model.y,\n            box = this.boundingBox(),\n            info = grouper()\n                        .groupby(model.groupby)\n                        .x(x)\n                        .y(y)(frame),\n            domainX = info.rangeX(),\n            domainY = info.rangeY(),\n            sx = this.getScale(model.scaleX)\n                            .domain(domainX)\n                            .rangeRound([0, box.innerWidth]),\n            sy = this.getScale(model.scaleY)\n                            .domain(domainY)\n                            .rangeRound([box.innerHeight, 0]).nice(),\n            group = this.group(),\n            chart = this.group('chart'),\n            lines = chart.selectAll('.line').data(info.data),\n            colors = this.stroke(info.data).colors,\n            sxshift = 0,\n            //merge = paper.transition('update'),\n            line_ = this.$.line()\n                .x(xl)\n                .y(yl)\n                .curve(this.getCurve(model.curve));\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left, box.margin.top));\n\n        // TODO: generalize this hack\n        if (isFunction(sx.bandwidth)) {\n            sx.domain(info.data[0].map(d => d.data[x]));\n            sxshift = sx.bandwidth()/2;\n        }\n\n        lines\n            .enter()\n                .append('path')\n                .attr('class', 'line')\n                .attr('fill', 'none')\n                .attr('stroke', stroke)\n                .attr('stroke-width', model.lineWidth)\n                .attr('d', line_)\n            .merge(lines)\n                .transition()\n                .attr('stroke', stroke)\n                .attr('stroke-width', model.lineWidth)\n                .attr('d', line_);\n\n        lines\n            .exit()\n            .transition()\n            .style('opacity', 0)\n            .remove();\n\n        if (model.axisX)\n            this.xAxis1(model.axisX === true ? \"bottom\" : model.axisX, sx, box);\n        if (model.axisY)\n            this.yAxis1(model.axisY === true ? \"left\" : model.axisY, sy, box);\n\n        if (info.data.length > 1)\n            this.legend({\n                type: 'color',\n                scale: this.getScale('ordinal').range(colors).domain(info.data.map(d => d.key))\n            }, box);\n\n        function stroke (d, i) {\n            return colors[i];\n        }\n\n        function xl(d) {\n            return sx(d.data[x]) + sxshift;\n        }\n\n        function yl(d) {\n            return sy(d[1]);\n        }\n    }\n});\n","import {color} from 'd3-color';\n\nimport createChart from '../core/chart';\nimport grouper from '../transforms/groups';\nimport defs from './defs';\n\n//\n//  Area Chart\n//  =============\nexport default createChart('areachart', {\n    requires: ['d3-scale', 'd3-shape', 'd3-axis', 'd3-svg-legend'],\n\n    schema: {\n        lineWidth: defs.lineWidth,\n        curve: defs.curve,\n        x: defs.x,\n        y: defs.y,\n        scaleX: defs.scaleX,\n        scaleY: defs.scaleY,\n        groupby: defs.groupby,\n        axisX: defs.axisX,\n        axisY: defs.axisY,\n        stack: defs.stack,\n        gradient: defs.gradient,\n        lineDarken: defs.lineDarken\n    },\n\n    doDraw () {\n        var self = this,\n            frame = this.frame,\n            model = this.getModel(),\n            x = model.x,\n            y = model.y,\n            col = this.getModel('color'),\n            box = this.boundingBox(),\n            info = grouper()\n                        .groupby(model.groupby)\n                        .stack(this.getStack())\n                        .x(x)\n                        .y(y)(frame),\n            domainX = info.rangeX(),\n            domainY = info.rangeY(),\n            scaleX = this.getScale(model.scaleX)\n                            .domain(domainX)\n                            .rangeRound([0, box.innerWidth]),\n            scaleY = this.getScale(model.scaleY)\n                            .domain(domainY)\n                            .rangeRound([box.innerHeight, 0]).nice(),\n            group = this.group(),\n            chart = this.group('chart'),\n            areas = chart.selectAll('.areagroup').data(info.data),\n            colors = this.colors(info.data.length),\n            fill = model.gradient ? colors.map((c, i) => self.linearGradient(c, box, 'vertical', `fill${self.model.uid}-${i}`)) : colors,\n            curve = this.getCurve(model.curve);\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left, box.margin.top));\n\n        areas.exit()\n            .transition()\n            .style('opacity', 0)\n            .remove();\n\n        var areagroup = areas\n            .enter()\n                .append('g')\n                .classed('areagroup', true)\n            .merge(areas)\n                .selectAll('path')\n                .data(arealine);\n\n        areagroup\n            .enter()\n                .append('path')\n                .attr('class', d => d.type)\n                .attr('fill', d => d.fill)\n                .attr('stroke', d => d.stroke)\n                .attr('d', d => d.draw)\n            .merge(areagroup)\n                .transition(this.transition('area'))\n                .attr('d', d => d.draw)\n                .attr('fill', d => d.fill)\n                .attr('stroke', d => d.stroke)\n                .attr('fill-opacity', col.fillOpacity)\n                .attr('stroke-width', model.lineWidth)\n                .attr('stroke-opacity', col.strokeOpacity);\n\n        areagroup\n            .exit()\n            .transition()\n            .style('opacity', 0)\n            .remove();\n\n        if (model.axisX)\n            this.xAxis1(model.axisX === true ? \"bottom\" : model.axisX, scaleX, box, domainX[0]);\n        if (model.axisY)\n            this.yAxis1(model.axisY === true ? \"left\" : model.axisY, scaleY, box, domainY[0]);\n\n        if (info.data.length > 1)\n            this.legend({\n                type: 'color',\n                scale: this.getScale('ordinal').range(colors).domain(info.data.map(d => d.key))\n            }, box);\n\n        function xx(d) {\n            return scaleX(d.data[x]);\n        }\n\n        function y0(d) {\n            return scaleY(d[0]);\n        }\n\n        function y1(d) {\n            return scaleY(d[1]);\n        }\n\n        function arealine (d) {\n            var area_ = self.$.area()\n                            .curve(curve)\n                            .x(xx)\n                            .y1(y1)\n                            .y0(y0),\n                line_ = self.$.line()\n                            .curve(curve)\n                            .x(xx)\n                            .y(y1),\n                c = color(colors[d.index]);\n\n            return [\n                {\n                    type: 'area',\n                    data: d,\n                    draw: area_(d),\n                    stroke: 'none',\n                    fill: fill[d.index]\n                },\n                {\n                    type: 'line',\n                    data: d,\n                    draw: line_(d),\n                    fill: 'none',\n                    stroke: c.darker(model.lineDarken)\n                }\n            ];\n        }\n    },\n\n    ticks (size, spacing) {\n        return Math.max(Math.floor(size/spacing), 1);\n    }\n});\n","import {map} from 'd3-collection';\nimport {viewExpression} from 'd3-view';\nimport {format} from 'd3-format';\n\nimport createChart from '../core/chart';\nimport {sizeValue} from '../utils/size';\nimport textWrap from '../utils/text-wrapping';\nimport defs from './defs';\n\n\nconst pi = Math.PI;\nconst rad = pi/180;\n\n\nexport const proportional = {\n\n    proportionalData (frame, field) {\n        return frame.dimension(field).top(Infinity);\n    },\n\n    total (field) {\n        var total = 0;\n\n        function value (d) {\n            total += d[field];\n            return d[field];\n        }\n\n        value.total = () => total;\n        return value;\n    }\n};\n\n//\n//  Pie Chart\n//  =============\n//\nexport default createChart('piechart', proportional, {\n    requires: ['d3-scale', 'd3-shape', 'd3-svg-legend'],\n\n    schema: {\n        // The data values from this field will be encoded as angular spans.\n        // If omitted, all pie slices will have equal spans\n        field: {\n            type: 'string',\n            default: 'data'\n        },\n        label: {\n            type: 'string',\n            default: 'label'\n        },\n        startAngle: {\n            description: \"Overall start angle of the pie in degree\",\n            default: 0,\n            type: \"number\"\n        },\n        endAngle: {\n            description: \"Overall end angle of the pie in degree\",\n            default: 360,\n            type: \"number\"\n        },\n        sort: {\n            type: 'string',\n            description: 'sort data before visualizing',\n            enum: ['none', 'ascending', 'descending'],\n            default: 'none'\n        },\n        innerRadius: {\n            description: \"Inner radius for donuts\",\n            default: 0,\n            oneOf: [\n                {type: \"number\", minimum: 0},\n                {type: \"string\"}\n            ]\n        },\n        padAngle: {\n            description: \"Angular separation between each adjacent arcs in degree\",\n            default: 0,\n            type: \"number\",\n            minimum: 0\n        },\n        cornerRadius: defs.cornerRadius,\n        lineWidth: defs.lineWidth,\n        //\n        center: {\n            type: \"string\",\n            description: \"Expression which display information in the center of the pie chart. Should be used with innerRadius greater than 0\"\n        },\n        centerFont: {\n            description: \"Center text font size and family\",\n            '$ref': \"#/definitions/font\"\n        }\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            color = this.getModel('color'),\n            field = model.field,\n            box = this.boundingBox(),\n            outerRadius = Math.min(box.innerWidth, box.innerHeight)/2,\n            innerRadius = sizeValue(model.innerRadius, outerRadius),\n            total = this.total(field),\n            angles = this.$.pie()\n                .padAngle(rad*model.padAngle)\n                .startAngle(rad*model.startAngle)\n                .endAngle(rad*model.endAngle)\n                .value(total),\n            arcs = this.$.arc()\n                .innerRadius(innerRadius)\n                .outerRadius(outerRadius)\n                .cornerRadius(model.cornerRadius),\n            group = this.group(),\n            chart = this.group('chart'),\n            data = angles(this.proportionalData(frame, field)),\n            fill = this.fill(data),\n            slices = chart.selectAll('.slice').data(data);\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left+box.innerWidth/2, box.margin.top+box.innerHeight/2));\n\n        slices\n            .enter()\n                .append('path')\n                .attr('class', 'slice')\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', 0)\n                .attr('fill', fill)\n                .attr('stroke-width', model.lineWidth)\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(slices)\n                .transition()\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', color.strokeOpacity)\n                .attr('d', arcs)\n                .attr('fill', fill);\n\n        slices.exit().transition().remove();\n\n        if (model.center) {\n            var d = map(data.reduce((o, d) => {o[d.data.label] = d; return o;})),\n                text = this.dataStore.eval(model.center, {total: total.total(), d: d});\n            if (text) {\n                var font = this.getModel('font'),\n                    size = this.dim(model.centerFontSize, box.innerWidth),\n                    center = chart.selectAll('.info').data([text]);\n\n                center\n                    .enter()\n                        .append('text')\n                        .attr('class', 'info')\n                        .attr(\"text-anchor\", \"middle\")\n                        .attr(\"alignment-baseline\", \"middle\")\n                        .style(\"font-size\", `${size}px`)\n                        .style('fill-opacity', 0)\n                    .merge(center)\n                        .text(text)\n                        .style('fill-opacity', model.centerOpacity)\n                        .style('fill', font.stroke)\n                        .call(textWrap, 1.5*(innerRadius || outerRadius));\n\n            }\n        }\n        if (!model.legendType) return;\n        total = total.total();\n        var expr = viewExpression(model.legendLabel),\n            fmt = format(model.fractionFormat),\n            labels = data.map((d, idx) => {\n                return expr.eval({\n                    d: d,\n                    value: d.value,\n                    format: fmt,\n                    total: total,\n                    fraction: d.value/total,\n                    label: d.data[model.label] || idx\n                });\n            });\n        this.legend({\n            scale: this.getScale('ordinal').domain(labels).range(fill.colors)\n        }, box);\n    }\n});\n","import constant from \"../utils/constant\";\nimport descending from \"../utils/descending\";\nimport identity from \"../utils/identity\";\n\n\nexport default function () {\n    var value = identity,\n        pad = constant(0),\n        height = 1,\n        base = 1;\n\n    function funnel (data) {\n        let i, j, points, fr,\n            v0, bi, pim, pi=0, h=0;\n\n        var n = data.length,\n            polygons = new Array(n),\n            index = new Array(n),\n            hi = height/n;\n\n        // evaluate the value for each data point\n        for (i=0; i<n; ++i) {\n            polygons[index[i] = i] = +value(data[i], i, data);\n        }\n\n        // Sort the polygons\n        index.sort((i, j) => {return descending(polygons[i], polygons[j]);});\n\n        // Compute the polygons! They are stored in the original data's order.\n        v0 = polygons[index[0]];\n\n        for (i=0; i<n; ++i) {\n            j = index[i];\n            fr = polygons[j]/v0;\n            bi = base*fr;\n            pim = pi;\n            pi = height*(i === n-1 ? 0 : 0.5*pad(fr, i));\n            points = [\n                [bi/2, h+pim],\n                [-bi/2, h+pim],\n                [-bi/2, h+hi-pi],\n                [bi/2, h+hi-pi]\n            ];\n            h += hi;\n            polygons[j] = {\n                index: i,\n                value: polygons[j],\n                fraction: fr,\n                points: points,\n                data: data[j]\n            };\n        }\n        return polygons;\n    }\n\n    funnel.value = function(_) {\n        return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), funnel) : value;\n    };\n\n    funnel.base = function (_) {\n        return arguments.length ? (base = _, funnel) : base;\n    };\n\n    funnel.height = function (_) {\n        return arguments.length ? (height = _, funnel) : height;\n    };\n\n    funnel.pad = function(_) {\n        return arguments.length ? (pad = typeof _ === \"function\" ? _ : constant(+_), funnel) : pad;\n    };\n\n    return funnel;\n}\n","//\n//  Custom Symbol type\n//  =====================\n//\n//  Draw a polygon given an array of points\n//  This can be used as type in a d3-shape symbol\nexport default function (points) {\n\n    return {\n        draw (context) {\n            points.forEach((point, idx) => {\n                if (!idx) context.moveTo(point[0], point[1]);\n                else context.lineTo(point[0], point[1]);\n            });\n            context.closePath();\n        }\n    };\n}\n","import {viewExpression} from 'd3-view';\n\nimport createChart from '../core/chart';\nimport pyramid from '../transforms/pyramid';\nimport funnel from '../transforms/funnel';\nimport polygon from '../utils/polygon';\nimport {proportional} from './pie';\n\n\nexport default createChart('pyramidchart', proportional, {\n    requires: ['d3-scale', 'd3-shape', 'd3-svg-legend'],\n\n    options: {\n        field: 'data',\n        label: 'label',\n        pad: 0.005,\n        lineWidth: 1,\n        inverted: false,\n        funnel: false,\n        legendType: 'color',\n        invereted: false,\n        legendLabel: \"label + ' - ' + format('.1%', fraction)\"\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            field = model.field,\n            color = this.getModel('color'),\n            box = this.boundingBox(),\n            polygons = (model.funnel ? funnel () : pyramid())\n                .pad(model.pad)\n                .value(d => d[field]),\n            scaleX = this.getScale('linear').rangeRound([0, box.innerWidth]),\n            scaleY = this.getScale('linear').rangeRound(model.inverted ? [box.innerHeight, 0] : [0, box.innerHeight]),\n            data = frame.new(polygons(this.proportionalData(frame, field))).dimension('fraction').bottom(Infinity),\n            marks = this.$.symbol().type(d => polygon(d.points.map(xy => [scaleX(xy[0]), scaleY(xy[1])]))).size(1),\n            fill = this.fill(data),\n            group = this.group(),\n            chart = this.group('chart'),\n            segments = chart\n                .style(\"shape-rendering\", \"crispEdges\")\n                .selectAll('.segment').data(data);\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left+box.innerWidth/2, box.margin.top));\n\n        segments\n            .enter()\n                .append('path')\n                .attr('class', 'segment')\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', 0)\n                .attr('fill', fill)\n                .attr('stroke-width', model.lineWidth)\n                .attr('d', marks)\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(segments)\n                .transition()\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', color.strokeOpacity)\n                .attr('d', marks)\n                .attr('fill', fill);\n\n        segments.exit().remove();\n\n        if (!model.legendType) return;\n        var expr = viewExpression(model.legendLabel),\n            self = this,\n            labels = data.map((d, idx) => {\n                return expr.eval(self.getContext({\n                    d: d,\n                    value: d.value,\n                    fraction: d.fraction,\n                    label: d.data[model.label] || idx\n                }));\n            });\n        this.legend({\n            scale: this.getScale('ordinal').domain(labels).range(fill.colors)\n        }, box);\n    }\n\n});\n","export default function (o, prefix, name, objectOnly) {\n    if (name.substring(0, prefix.length) !== prefix)\n        name = `${prefix}${name[0].toUpperCase()}${name.substring(1)}`;\n    return objectOnly ? o[name] : o[name]();\n}\n","import {format} from 'd3-format';\n\nimport createChart from '../core/chart';\nimport camelFunction from '../utils/camelfunction';\nimport accessor from '../utils/accessor';\nimport colorContrast from '../utils/contrast';\n\n//\n//  Treemap\n//  =============\n//\nexport default createChart('treemap', {\n    requires: ['d3-scale', 'd3-hierarchy'],\n\n    options: {\n        label: 'label',\n        field: 'data',\n        padding: 2,\n        tile: 'resquarify',\n        format: ','\n    },\n\n    doDraw (frame, d3) {\n        var model = this.getModel(),\n            font = this.getModel('font'),\n            box = this.boundingBox(),\n            labelAccessor = accessor(model.label),\n            valueAccessor = accessor(model.field),\n            valueFormat = format(model.format),\n            root = d3.hierarchy(rootData(frame.data))\n                    .sum(valueAccessor)\n                    .sort((a, b) => b.value - a.value)\n                    .eachBefore(dataColor),\n            treemap = d3.treemap()\n                        .tile(camelFunction(d3, 'treemap', model.tile, true))\n                        .size([box.innerWidth, box.innerHeight])\n                        .round(true)\n                        .padding(model.padding),\n            colors = this.fill(root.children).colors,\n            group = this.group()\n                        .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                        .style(\"shape-rendering\", \"crispEdges\"),\n            leaves = treemap(root).leaves(),\n            cell = group.selectAll('g').data(leaves),\n            self = this;\n\n        this.paper().size(box);\n        cell.exit().remove();\n\n        cell = cell\n            .enter()\n                .append('g')\n                .attr(\"transform\", d => this.translate(d.x0, d.y0))\n            .merge(cell)\n                .attr(\"transform\", d => this.translate(d.x0, d.y0));\n\n        var rects = cell.selectAll('rect').data(singleData);\n\n        rects.enter()\n                .append('rect')\n                .attr(\"width\", d => d.x1 - d.x0)\n                .attr(\"height\", d => d.y1 - d.y0)\n                .attr(\"fill\", d => colors[d.data._counter])\n                .attr('stroke', 'none')\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(rects)\n                .transition()\n                .attr(\"width\", d => d.x1 - d.x0)\n                .attr(\"height\", d => d.y1 - d.y0)\n                .attr(\"fill\", d => colors[d.data._counter]);\n\n        rects = cell.selectAll('text').data(singleData);\n        rects.enter()\n            .append(\"text\")\n            .style('fill', d => colorContrast(colors[d.data._counter], '#fff', font.stroke))\n            .selectAll(\"tspan\")\n                .data(textData)\n                .enter()\n                    .append(\"tspan\")\n                    .style('font-size', d => d.size)\n                    .attr(\"x\", 4)\n                    .attr(\"y\", (d, i) => 1.5*d.size + i * 1.2 * d.size)\n                    .text(d => d.text);\n\n\n        function dataColor (d) {\n            if (!d.parent) d.data._counter = 0;\n            else {\n                d.data._counter = d.parent.data._counter;\n                d.parent.data._counter++;\n            }\n        }\n\n        function rootData (data) {\n            data = {children: hideChildren(data)};\n            data[model.label] = 'root';\n            return data;\n        }\n\n        function textData (d) {\n            var size = self.font({height: Math.min(d.x1 - d.x0, d.y1 - d.y0)}),\n                text = labelAccessor(d.data).split(/(?=[A-Z][^A-Z])/g);\n            text.push(valueFormat(d.value));\n            return text.map(t => {return {size:size, text:t};});\n        }\n\n        function singleData (d) {\n            return [d];\n        }\n\n        function hideChildren (data) {\n            let children;\n            return data.map(d => {\n                children = d.children;\n                if (children) {\n                    d._children = hideChildren(children);\n                    delete d.children;\n                }\n                return d;\n            });\n        }\n    }\n});\n","import createChart from '../core/chart';\nimport textWrap from '../utils/text-wrapping';\n\n\nexport default createChart('text', {\n\n    options: {\n        label: 'label',\n        data: 'data',\n        text: 'label + \" \" + data',\n        sizeReduction: 0.7\n    },\n\n    doDraw (frame) {\n        var self = this,\n            model = this.getModel(),\n            font = this.getModel('font'),\n            box = this.boundingBox(),\n            size = this.font(box),\n            group = this.group(),\n            chart = this.group('chart'),\n            words = chart.selectAll('text').data(frame.data),\n            width = box.innerWidth/frame.data.length,\n            widthWrap = 0.4*width,\n            store = this.dataStore,\n            stroke = this.modelProperty('stroke', font);\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left, box.margin.top + box.innerHeight/2));\n\n        words\n            .enter()\n                .append('text')\n                .attr(\"transform\", shift)\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"alignment-baseline\", \"middle\")\n                .style('fill', stroke)\n            .merge(words)\n                .attr(\"transform\", shift)\n                .text(d => store.eval(model.text, d))\n                .style('fill', stroke)\n                .call(textWrap, widthWrap, sizing);\n\n        group.exit().remove();\n\n\n        function shift (d, i) {\n            return self.translate((i+0.5)*width, 0);\n        }\n\n        function sizing (d, i) {\n            var s = size;\n            if (i) s = model.sizeReduction*size;\n            self.select(this).attr('font-size', `${s}px`);\n        }\n    }\n});\n","import {extent, range} from 'd3-array';\nimport {map} from 'd3-collection';\n\nimport accessor from '../utils/accessor';\nimport niceRange from '../utils/nicerange';\nimport createChart from '../core/chart';\nimport colorContrast from '../utils/contrast';\nimport textWrap from '../utils/text-wrapping';\n//\n//  Heatmap\n//  =============\n//\n//  A heatmap is a graphical representation of data where the individual\n//  values contained in a matrix are represented as colors.\n//  This chart type allow to specify to types of layout:\n//  * heatmap - classical heatmap\n//  * punchcard - the z dimension is converted into different sizes of the shape elements\n//  * contour - similar to heatmap but continous rather than descrete\nexport default createChart('heatmap', {\n    requires: ['d3-scale', 'd3-axis', 'd3-svg-legend'],\n\n    options: {\n        shape: 'square',\n        layout: 'heatmap',\n        buckets: 10,\n        pad: 0.005,     // padding for heatmap & punchcard\n        x: 'x',\n        y: 'y',\n        z: 'data',\n        //\n        label: null,    // expression for label text\n        //\n        axisX: true,\n        axisY: true,\n        reverseColors: true,\n        tableColors: null\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            color = this.getModel('color'),\n            font = this.getModel('font'),\n            layout = model.layout,\n            box = this.boundingBox(),\n            zrange = extent(frame.data, accessor(model.z));\n\n        if (zrange[0] < 0 && layout === 'punchcard') layout = 'heatmap';\n\n        var heat = this.heatmap(layout, frame, box, zrange),\n            dx = (box.innerWidth - heat.width)/2,\n            dy = (box.innerHeight - heat.height)/2,\n            shape = this.getSymbol(model.shape).size(d => d.size*d.size),\n            group = this.group(),\n            chart = this.group('chart'),\n            shapes = chart.selectAll('.shape').data(heat.data);\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left + dx, box.margin.top + dy));\n\n        if (range[0] < 0 && layout === 'punchcard') layout = 'heatmap';\n\n        shapes\n            .enter()\n                .append('path')\n                .classed('shape', true)\n                .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n                .attr(\"fill\", d => d.color)\n                .attr(\"fill-opacity\", 0)\n                .attr(\"stroke-opacity\", 0)\n                .attr(\"stroke\", color.stroke)\n                .attr('d', shape)\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(shapes)\n                .transition(this.transition())\n                .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n                .attr(\"fill-opacity\", color.fillOpacity)\n                .attr(\"fill\", d => d.color)\n                .attr(\"stroke-opacity\", color.strokeOpacity)\n                .attr(\"stroke\", color.stroke)\n                .attr('d', shape);\n\n        // add labels\n        if (model.label && layout === 'heatmap') {\n            var fontSize = `${this.font(box)}px`,\n                labels = chart.selectAll('.labels').data(heat.data);\n            labels\n                .enter()\n                    .append('text')\n                    .classed('labels', true)\n                    .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n                    .style(\"text-anchor\", \"middle\")\n                    .style(\"alignment-baseline\", \"middle\")\n                    .style(\"fill\", fillLabel)\n                    .style('font-size', fontSize)\n                    .text(heatLabel)\n                .merge(labels)\n                    .text(heatLabel)\n                    .style('font-size', fontSize)\n                    .call(textWrap, Math.ceil(0.8*heat.size))\n                    .transition(this.transition('text'))\n                    .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n                    .style(\"fill\", fillLabel);\n        }\n\n        var bb = {\n            innerWidth: heat.width,\n            innerHeight: heat.height,\n            margin: {\n                top: box.margin.top + dy,\n                left: box.margin.left + dx\n            }\n        };\n        if (model.axisX)\n            this.xAxis1(model.axisX === true ? \"bottom\" : model.axisX, heat.scaleX, bb);\n        if (model.axisY)\n            this.yAxis1(model.axisY === true ? \"left\" : model.axisY, heat.scaleY, bb);\n\n        if (layout === 'heatmap')\n            this.legend({\n                type: 'color',\n                shape: model.shape,\n                scale: heat.colors\n            }, box);\n        else if (layout === 'punchcard')\n            this.legend({\n                type: 'size',\n                shape: model.shape,\n                scale: heat.sizes\n            }, box);\n\n        function heatLabel (d) {\n            return d.data[model.label];\n        }\n\n        function fillLabel (d) {\n            return colorContrast(d.color, '#fff', font.stroke);\n        }\n    },\n\n    heatmap (layout, frame, box, zrange) {\n        var model = this.getModel(),\n            pad = model.pad,\n            x = model.x,\n            y = model.y,\n            z = model.z,\n            gx = frame.dimension(model.x).group().size(),\n            gy = frame.dimension(model.y).group().size(),\n            buckets = Math.min(model.buckets, gx*gy),\n            dx = (1 - pad*(gx + 1))*box.innerWidth/gx,\n            dy = (1 - pad*(gy + 1))*box.innerHeight/gy,\n            data = [],\n            labelsX = [],\n            labelsY = [],\n            xp = map(), yp = map();\n\n        let xv, yv, zv, i, j, colors, sizes, dd, width, height;\n\n        if (dx < dy) {\n            dd = dx;\n            width = box.innerWidth;\n            pad = width*pad;\n            height = gy*(dd + pad) + pad;\n        } else {\n            dd = dy;\n            height = box.innerHeight;\n            pad = height*pad;\n            width = gx*(dd + pad) + pad;\n        }\n\n        zrange = niceRange(zrange, buckets);\n\n        if (layout === 'heatmap') {\n            var cols = this.fill(range(buckets)).colors;\n            if (model.reverseColors) cols = cols.reverse();\n            colors = this.getScale('quantile').range(cols).domain(zrange);\n            sizes = () => 1;\n        } else {\n            var color = this.colors(1)[0];\n            colors = () => color;\n            sizes = this.getScale('quantile').range(range(buckets).map(s => (s+1)/buckets)).domain(zrange);\n        }\n        frame.data.forEach(d => {\n            xv = d[x];\n            yv = d[y];\n            zv = d[z];\n            if (!xp.has(xv)) {\n                xp.set(xv, labelsX.length);\n                labelsX.push(xv);\n            }\n            if (!yp.has(yv)) {\n                yp.set(yv, labelsY.length);\n                labelsY.push(yv);\n            }\n            i = xp.get(xv);\n            j = yp.get(yv);\n            data.push({\n                i: i,\n                j: j,\n                x: pad + dd/2 + i*(dd + pad),\n                y: pad + dd/2 + j*(dd + pad),\n                color: colors(zv),\n                size: dd*sizes(zv),\n                data: d\n            });\n        });\n        return {\n            data: data,\n            size: dd,\n            width: width,\n            height: height,\n            scaleX: this.getScale('band').domain(labelsX).range([0, width]),\n            scaleY: this.getScale('band').domain(labelsY).range([0, height]),\n            colors: colors,\n            sizes: sizes\n        };\n    }\n});\n","import {extent, max} from 'd3-array';\nimport {assign} from 'd3-let';\n\nimport createChart, {vizPrototype} from '../core/chart';\nimport accessor from '../utils/accessor';\nimport niceRange from '../utils/nicerange';\nimport warn from '../utils/warn';\n\n\nvizPrototype.getGeoProjection = function (name) {\n    return this.getD3('geo', name)();\n};\n\n\n//\n//  GeoChart\n//  =============\n//\n//  A chart displaying a geographical map\nexport default createChart('geochart', {\n    // load these libraries - add 'leaflet'?\n    requires: ['d3-scale', 'd3-geo', 'topojson', 'd3-geo-projection', 'd3-svg-legend'],\n\n    schema: {\n        // Geometry data to display in this chart - must be in the topojson source\n        geometry: {\n            type: 'string',\n            description: 'The geometry to visualize from the topojson geometry objects',\n            default: 'countries'\n        },\n        //\n        // for choropleth maps\n        // geoKey and dataKey are used to match geometry with data\n        geoKey: {\n            type: 'string',\n            default: 'id'\n        },\n        dataKey: {\n            type: 'string',\n            default: 'id'\n        },\n        dataLabelKey : {\n            type: 'string',\n            default: 'label'\n        },\n        dataValueKey: {\n            type: 'string',\n            default: 'value'\n        },\n        neighbors: {\n            type: 'boolean',\n            default: false\n        },\n        // how many color buckets to visualise\n        buckets: {\n            type: 'number',\n            default: 10\n        },\n        choroplethScale: {\n            type: 'string',\n            default: 'quantile'\n        },\n        //\n        // specify one of the topojson geometry object for calculating\n        // the projected bounding box\n        boundGeometry: {\n            type: 'string'\n        },\n        // how much to zoom out, 1 = no zoom out, 0.95 to 0.8 are sensible values\n        boundScaleFactor: {\n            type: 'number',\n            default: 0.9\n        },\n        //\n        projection: {\n            type: 'string',\n            default: 'kavrayskiy7'\n        },\n        graticule: {\n            type: 'boolean',\n            default: false\n        },\n        leaflet: {\n            type: 'boolean',\n            default: false\n        },\n        scale: {\n            type: 'number',\n            default: 200\n        }\n    },\n\n    doDraw () {\n        var info = dataInfo(this.frame);\n        if (!info.topology) return warn ('Topojson data not available - cannot draw topology');\n        if (!this._geoPath) this.createGeoPath(info);\n        this.update(info);\n    },\n\n    update (info) {\n        var model = this.getModel(),\n            color = this.getModel('color'),\n            box = this.boundingBox(),\n            group = this.group(),\n            geogroup = this.group('geo'),\n            path = this._geoPath,\n            data = geodata(this.$, info, model);\n\n        if (!data) {\n            var objects = Object.keys(info.topology.objects).map(key => `\"${key}\"`).join(', ');\n            return warn(`Could not find *geometry* \"${model.geometry}\" in [${objects}] - cannot draw geochart`);\n        }\n\n        group\n            .transition(this.transition('group0'))\n            .attr(\"transform\", this.translate(box.padding.left, box.padding.top));\n        geogroup\n            .transition(this.transition('group1'))\n            .attr(\"transform\", this.translate(box.margin.left, box.margin.top));\n\n        var paths = geogroup.selectAll('.geometry').data(data),\n            fill = this.choropleth(data, box);\n\n        this.center(info);\n\n        paths\n            .enter()\n                .append(\"path\")\n                .attr(\"class\", \"geometry\")\n                .attr(\"d\", path)\n                .style('fill', 'none')\n                .style(\"stroke\", this.modelProperty('stroke', color))\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(paths)\n                .transition(this.transition('geometry'))\n                .attr(\"d\", path)\n                .style(\"stroke\", this.modelProperty('stroke', color))\n                .style(\"fill\", fill)\n                .style(\"fill-opacity\", color.fillOpacity);\n\n        paths\n            .exit()\n            .remove();\n    },\n\n    createGeoPath (info) {\n        var model = this.getModel(),\n            projection = this.getGeoProjection(model.projection).scale(model.scale),\n            $ = this.$,\n            path = $.geoPath().projection(projection),\n            self = this,\n            lefletMap;\n\n        this._geoPath = path;\n        this.center(info);\n\n        if (model.leaflet) {\n            var leafletId = `leaflet-${model.uid}`,\n                paper = this.paper();\n\n            this.visualParent.paper\n                    .append('div')\n                    .attr('id', leafletId);\n            lefletMap = new $.Map(leafletId, {center: [37.8, -96.9], zoom: 4})\n                            .addLayer(new $.TileLayer(\"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\")),\n            lefletMap.getPanes().overlayPane.appendChild(paper.element);\n            projection = $.transform({point: projectPoint});\n            lefletMap.on(\"viewreset\", () => self.update(info));\n        }\n\n        return path;\n\n        function projectPoint(x, y) {\n            var point = lefletMap.latLngToLayerPoint(new $.LatLng(y, x));\n            this.stream.point(point.x, point.y);\n        }\n    },\n\n    center (info) {\n        var model = this.getModel();\n        if (!model.boundGeometry) return;\n\n        var path = this._geoPath,\n            projection = path.projection(),\n            box = this.boundingBox(),\n            boundObject = info.topology.objects[model.boundGeometry],\n            boundGeometry = boundObject ? this.$.feature(info.topology, boundObject).features : null;\n\n        if (!boundGeometry) return warn(`Could not find *boundGeometry* \"${model.boundGeometry}\" for centering - skip centering geochart`);\n\n        projection.scale(1).translate([0, 0]);\n\n        var b = path.bounds(boundGeometry[0]),\n            topLeft = b[0],\n            bottomRight = b[1],\n            scaleX = (bottomRight[0] - topLeft[0]) / box.innerWidth,\n            scaleY = (bottomRight[1] - topLeft[1]) / box.innerHeight,\n            scale = Math.round(model.boundScaleFactor / Math.max(scaleX, scaleY)),\n            translate = [\n                (box.innerWidth - scale * (bottomRight[0] + topLeft[0])) / 2,\n                (box.innerHeight - scale * (bottomRight[1] + topLeft[1])) / 2\n            ];\n\n        projection.scale(scale).translate(translate);\n    },\n\n    // choropleth map based on data\n    choropleth (data, box) {\n        var model = this.getModel(),\n            dataLabelKey = model.dataLabelKey,\n            dataValueKey = model.dataValueKey;\n        let dataValue, valueRange, colors, buckets;\n\n        if (model.neighbors) {\n            dataValue = accessor('rank');\n            valueRange = extent(data, dataValue);\n            buckets = valueRange[1] + 1;\n        } else {\n            dataValue = (d) => d.data[dataValueKey];\n            buckets = Math.min(model.buckets, data.length);\n            valueRange = niceRange(extent(data, dataValue), buckets);\n        }\n\n        colors = this.getScale(model.choroplethScale).range(this.colors(buckets).reverse()).domain(valueRange);\n\n        this.legend({\n            type: 'color',\n            scale: colors\n        }, box);\n\n        return d => {\n            d.label = d.data[dataLabelKey] || d.id;\n            d.value = dataValue(d);\n            d.color = colors(d.value);\n            return d.color;\n        };\n    }\n\n});\n\n\nexport function dataInfo (frame) {\n    var info = {};\n    if (frame.type === 'frameCollection')\n        frame.frames.each(df => {\n            if (df.type === 'Topology') info.topology = df;\n            else if (df.type === 'dataframe') info.data = df.data;\n        });\n    else if (frame.type === 'Topology')\n        info.topology = frame;\n    return info;\n}\n\n\n//\n//  Create a geo data frame\n//  ===========================\n//\n//  * geo - d3-geo & topojson object\n//  * info - object with topology and data frame (optional)\nexport function geodata (geo, info, config) {\n    var geoKey = config.geoKey,\n        dataKey = config.dataKey;\n    let data = {}, features, key, props;\n\n    if (!info.topology) return warn('No topology object available');\n    var geometry = info.topology.objects[config.geometry];\n    if (!geometry) return warn(`Topology object ${config.geometry} is not available`);\n\n\n    var neighbors = config.neighbors ? geo.neighbors(geometry.geometries) : null;\n\n    features = geo.feature(info.topology, geometry).features;\n    if (info.data) data = info.data.reduce((o, d) => {o[d[dataKey]] = d; return o;}, {});\n\n    features = features.map(d => {\n        props = d.properties;\n        key = d[geoKey] || props[geoKey];\n        return {\n            id: key,\n            type: d.type,\n            geometry: d.geometry,\n            data: assign({}, props, data[key])\n        };\n    });\n\n    if (neighbors) features.forEach((d, i) => {\n        d.neighbors = neighbors[i];\n        d.rank = max(d.neighbors, j => features[j].rank) + 1 | 0;\n    });\n\n    return features;\n}\n","//\nexport {version as visualizeVersion} from './package.json';\n//\nexport {require} from './src/require';\n//\n// Data layer\nexport {default as DataFrame} from './src/data/dataframe';\nexport {default as DataStore} from './src/data/store';\nexport {default as dataSources} from './src/data/sources';\n//export {default as dataLocale} from './src/data/locale';\n\n//\n//  Core API\nexport {visuals} from './src/core/base';\nexport {default as createChart} from './src/core/chart';\nexport {default as createPaper, Svg, Div} from './src/core/paper';\nexport {default as visualTransform} from './src/transforms/base';\nexport {default as visualTransforms} from './src/transforms/index';\n//\n//  Components\nexport {default as visualComponents} from './src/components/index';\n\n// utilities\nexport {colorScales} from './src/plugins/color';\nexport {default as pyramid} from './src/transforms/pyramid';\nexport {default as niceRange} from './src/utils/nicerange';\nexport {default as slugify} from './src/utils/slugify';\n//\n//  Charts\n//  =========\n//\n//  Last import, important!\nexport {default as Visual} from './src/core/visual';\nexport {default as BarChart} from './src/charts/bar';\nexport {default as LineChart} from './src/charts/line';\nexport {default as AreaChart} from './src/charts/area';\nexport {default as PieChart} from './src/charts/pie';\nexport {default as PyramidChart} from './src/charts/pyramid';\nexport {default as Treemap} from './src/charts/treemap';\nexport {default as TextChart} from './src/charts/text';\nexport {default as Heatmap} from './src/charts/heatmap';\nexport {default as GeoChart} from './src/charts/geo';\nexport {default as createCompositeChart} from './src/charts/composite';\n","import {format} from 'd3-format';\n\nconst memorySymbols = ['K', 'M', 'G'].map((s, i) => {\n    return {\n        symbol: s,\n        size: 1 << (i+1)*10\n    };\n}).reverse();\n\nexport default function (fmt) {\n    const binaryFormat = format(fmt);\n\n    return function (value) {\n        for (let s=0; s<memorySymbols.length; ++s) {\n            if (value >= memorySymbols[s].size) {\n                value /= memorySymbols[s].size;\n                return binaryFormat(value) + memorySymbols[s].symbol + 'B';\n            }\n        }\n        return binaryFormat(value) + 'B';\n    };\n}\n","import {viewProviders} from 'd3-view';\n\n\nexport default {\n    props: ['url'],\n\n    render (data, props, el) {\n        var self = this,\n            inner = this.select(el).html();\n\n        return viewProviders.require('marked').then(marked => {\n            if (data.url) {\n                return this.fetchText(data.url).then(text => {\n                    text = marked(text);\n                    return self.viewElement(`<div class=\"doc\">${text}</div>`);\n                });\n            } else {\n                var text = marked(inner);\n                return self.viewElement(`<div class=\"doc\">${text}</div>`);\n            }\n        });\n    }\n};\n","import {timeFormat} from 'd3-time-format';\n\nconst format = timeFormat('%d %b %Y, %H:%M');\nconst labels = ['system', 'arch', 'processor', 'cpus', 'python'];\nconst template = `<div class=\"card\">\n<dic class=\"card-body\">\n<dl class=\"row\" d3-for=\"entry in info\">\n    <dt class=\"col-sm-4\" d3-html=\"entry.label\"></dt>\n    <dd class=\"col-sm-8\" d3-html=\"entry.value\"></dd>\n</dl>\n</div>\n</div>`;\n\nexport default {\n    model () {\n        return {\n            info: []\n        };\n    },\n    render () {\n        const model = this.model;\n        model.dataStore.onData('benchmarks.info', frame => {\n            model.info = info(frame.data[0]);\n        });\n        return this.viewElement(template);\n    }\n};\n\n\nfunction info (o) {\n    var date = new Date(o.date),\n        data = [\n            {\n                label: 'date',\n                value: format(date)\n            }\n        ];\n    labels.forEach(label => {\n        data.push({\n            label: label,\n            value: o[label]\n        });\n    });\n    return data;\n}\n","import {assign, inBrowser} from 'd3-let';\nimport {view, viewForms, viewBootstrapForms, viewReady, viewEvents, viewProviders} from 'd3-view';\nimport {visualComponents, visuals, colorScales} from 'd3-visualize';\nimport {interpolateRdBu} from 'd3-scale-chromatic';\n\nimport binaryFormat from './bytes';\nimport marked from './marked';\nimport info from './info';\n\n\nif (inBrowser) {\n    if (window.development) viewProviders.setDebug(true);\n}\n\n\ncolorScales.set('redyellowblue', (d3) => d3.scaleSequential(interpolateRdBu));\n\n\nassign(visuals.options.dataContext, {\n    $binaryFormat: binaryFormat\n});\n\n\nexport function start () {\n    viewReady(() => {\n        appView().mount('body');\n    });\n}\n\n\nexport function appView () {\n    var vm = view({\n            components: {\n                marked,\n                info\n            }\n        })\n        .use(viewForms)\n        .use(viewBootstrapForms)\n        .use(visualComponents);\n\n        viewEvents.on('component-mounted', (cm) => {\n            if (cm.name === 'd3form') {\n                cm.model.$on(() => formListener(cm));\n            }\n        });\n\n    return vm;\n}\n\nfunction formListener () {\n\n}\n"],"names":["exports","version","crossfilter_identity","d","permute","array","index","i","n","length","copy","Array","bisect","crossfilter","bisect_by","by","f","bisectLeft","a","x","lo","hi","mid","bisectRight","right","left","heap","heap_by","sort","t","sift","child","heapselect","heapselect_by","k","queue","Math","min","insertionsort","insertionsort_by","j","quicksort","quicksort_by","quicksort_sizeThreshold","sixth","i1","i5","i3","i4","e1","x1","e2","i2","x2","e3","x3","e4","x4","e5","x5","pivot1","pivotValue1","pivot2","pivotValue2","less","pivotsEqual","great","ek","xk","greatValue","lessValue","crossfilter_array8","crossfilter_arrayUntyped","crossfilter_array16","crossfilter_array32","crossfilter_arrayLengthen","crossfilter_arrayLengthenUntyped","crossfilter_arrayWiden","crossfilter_arrayWidenUntyped","Uint8Array","Uint16Array","Uint32Array","constructor","set","width","Error","crossfilter_filterExact","value","values","crossfilter_filterRange","range","max","crossfilter_filterAll","crossfilter_null","crossfilter_zero","crossfilter_reduceIncrement","p","crossfilter_reduceDecrement","crossfilter_reduceAdd","v","crossfilter_reduceSubtract","add","removeData","dimension","groupAll","size","data","newData","n0","n1","concat","filters","forEach","l","newIndex","crossfilter_index","removed","push","filter","filterExact","filterRange","filterFunction","filterAll","top","bottom","group","dispose","one","m","newValues","refilter","lo0","hi0","unshift","preAdd","postAdd","M","map","crossfilter_range","bounds","lo1","hi1","refilterFunction","oldValues","oldIndex","i0","reIndex","filterIndexBounds","added","isArray","filterIndexFunction","zero","key","all","reduce","reduceCount","reduceSum","order","orderNatural","groups","groupCapacity","crossfilter_capacity","groupWidth","reduceAdd","reduceRemove","reduceInitial","update","reset","resetNeeded","arguments","oldGroups","initial","k0","groupIndex","x0","g0","g","filterListeners","indexOf","updateMany","resetMany","updateOne","resetOne","groupIncrement","oldK","seenGroups","filterOne","select","remove","valueOf","splice","indexListeners","removeDataListeners","dataListeners","reduceValue","w","this","module","require","field","DataFrame","store","defineProperties","dimensions","prototype","serie","_inner","cf","name","keepExisting","current","accessor","new","Infinity","total","pivoter","Object","pk","pv","o","record","mapper","config","_data","isObject","asFrame","prefix","msg","logger","warn","schemes","isString","split","CSV","isUrl","url","fetch","viewProviders","self","then","parse","response","ct","headers","get","has","text","csvParse","tsvParse","json","source","expression","viewExpression","context","sources","Promise","getData","fc","frames","merge","mergeFrames","FrameCollection","frame","model","$child","assign","eval","isPromise","type","result","options","transform","schema","jsonValidator","dummyValidator","transformFactory","valid","validate","logError","doTransform","expr","safeEval","err","error","stack","fill","operations","scalar_operations","agg","count","undefined","fields","ops","as","groupby","countAll","fillArray","aggregate","op","entries","oo","entry","query","dim","q","sortby","timeseries","newframe","tmp","series","globalOptions","dateFormat","converters","utcParse","parseFloat","mappers","converter","each","DEFAULT_METHOD","DEFAULT_PERIOD","DEFAULT_ALPHA","MAXALPHA","method","fieldto","y","s","period","cumulate","buffer","alpha","minmax","sum","children","cutoff","difference","df","zeros","z","dd","prev","applyTransforms","transforms","applyt","slice","res","ts","dataEvents","dispatch","dataSourcePrototype","properties","transformStore","DataSource","cfg","getConfig","initDataSource","dataSource","dataName","pop","initialise","addTransforms","call","dataSources","remote","composite","DataStore","dataCount","isFunction","viewModel","create","ds","cachedFrame","resolve","cache","ctx","dataStore","def","round","pow","WIDTH","HEIGHT","sizeValue","getSize","element","height","getWidth","widthElement","getWidthElement","getHeight","heightElement","getHeightElement","windowHeight","el","getParentElementRect","elementWidth","elementHeight","window","innerHeight","getBoundingClientRect","padding","style","parent","node","tagName","parentNode","substring","clone","CONTAINERS","visuals","defaultsFromProperties","prop","schemaDef","default","definitions","visualPrototype","fetchData","drawing","event","toString","events","on","redraw","draw","visualType","uid","visualParent","getModel","$new","$update","$on","me","refSize","minSize","maxSize","container","idx","live","getVisualSchema","proto","Visual","visualRoot","viewBase","types","createVisual","append","classed","sel","layers","drawCount","__visual__","layer","activate","deactivate","fit","clear","visual","VisualClass","resize","currentSize","viewDebug","paperElement","paper","__paper","render","paperType","PaperType","papers","gname","inBrowser","observer","MutationObserver","visualManager","observe","document","documentElement","records","nodes","removedNodes","querySelectorAll","selectAll","destroy","viz","visualPlugins","protos","vizPrototype","chartPrototype","apply","extendVisualPrototype","plugins","keys","active","callback","transition","getVisual","getPaperGroup","childGroup","xt","yt","$","toUpperCase","doDraw","boundingBox","_drawArgs","requires","args","displayError","createPaper","Paper","paperPrototype","box","attr","cname","ge","enter","Svg","svg","Div","div","obj","$events","getScale","scale","getD3","extendObject","menu","display","insert","refreshMenu","minHeight","maxHeight","Ds","$visual","getContext","isViz","root","setupLayer","setupVisual","addSources","$set","formats","specifier","fmt","format","timeFormat","dataContext","cachedFormat","cachedFormatTime","formatter","e","font","fontSizeMultiplier","resizeDelay","viewDebounce","title","__title","stroke","offset","vizHeight","vizWidth","translate","margin","innerWidth","menuTitle","number","html","px","KEYS","LEFTRIGHT","clearCache","clearBBCache","__boundingBox","calculate","$nomargins","margins","marginv","axisDefaults","xAxis","yAxis","getAxis","orientation","xAxis1","location","axis","_axis","ga","applyTransform","translateAxis","axisTitle","yAxis1","rotate","titleRotate","titleOffset","tickSize","tickSizeOuter","isDate","tickFormat","ticks","formatAxis","hide","abs","ancor","getSymbol","symbol","getCurve","getStack","stackOrder","stackOffset","factory","extend","definition","Color","darker","brighter","reI","reN","reP","reHex3","reHex6","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","define","color","rgb","displayable","trim","toLowerCase","exec","parseInt","Rgb","rgbn","rgba","hsla","hasOwnProperty","NaN","r","b","rgbConvert","opacity","isNaN","h","Hsl","hslConvert","hsl","m2","m1","hsl2rgb","deg2rad","PI","rad2deg","Kn","Xn","Yn","Zn","t0","t1","t2","t3","labConvert","Lab","Hcl","cos","c","sin","rgb2xyz","xyz2lab","lab","lab2xyz","xyz2rgb","hclConvert","atan2","sqrt","hcl","A","B","C","D","E","ED","EB","BC_DA","cubehelixConvert","Cubehelix","bl","cubehelix","cosh","sinh","colorScales","d3","scaleSequential","interpolateViridis","interpolateInferno","interpolateMagma","interpolatePlasma","interpolateWarm","interpolateCool","interpolateRainbow","interpolateCubehelixDefault","getColorScale","colors","reversed","scaleDef","minPoints","scaleMinPoints","interpolator","scaleOffset","npoints","points","domain","reverse","shift","modelProperty","linearGradient","col","gid","defs","grad","colto","stops","legend","getLegend","vizModel","legendType","vizSize","fontSize","minFontSize","maxFontSize","orient","titleWidth","titleMinWidth","titleMaxWidth","labelFormat","shapeWidth","shapeHeight","gl","bb","getBBox","locations","topLeft","topRight","bottomLeft","bottomRight","offsetY","offsetX","constant","mouseStrategies","darkerStrategy","fillStrategy","mouse","mouseOver","__mouse_over__","strategy","over","mouseOut","out","filldarker","darkerFactor","fillColor","tooltip","noop","tooltipHtml","show","functor","point","locationCallbacks","selectNode","body","createSVGPoint","target","snode","content","poffset","dir","scrollTop","scrollLeft","coords","bbox","getScreenBBox","offsetWidth","offsetHeight","targetel","getScreenCTM","matrix","tbbox","nw","matrixTransform","ne","se","sw","expand","__expanded","hasMargin","button","floor","buttonText","collapseText","expandText","firstPass","radius","textColor","fontFamily","family","click","fillOver","pd","mg","uname","idname","duration","brushX","brushY","brush","vizComponent","props","attrs","inner","getSchema","build","input","catch","createElement","class","VisualContainer","visualDashboard","visualDrawOnMount","addVisual","vm","addComponent","dashboard","identity","pad","base","pyramid","fraction","v0","ph","pj","polygons","descending","_","splits","dx","log10","ndx","ceil","nx0","white","black","dy","wd","lineHeight","lines","word","words","done","tspan","join","getComputedTextLength","curveTypes","scales","baselines","heightShifts","createChart","lineWidth","cornerRadius","axisX","axisY","scaleY","chart","barChart","VerticalBarChart","HorizontalBarChart","stacked","gframe","pivot","sz","normalize","domainX","sx","grouped","vertical","init","rangeRound","sy","barChartPrototype","scaleX","bars","xrect","yrect","yi","rects","nice","y0","bandwidth","bardim","exit","stackedData","label","labels","baseline","labelLocation","heightShift","labelWidth","labelOffset","labelTranslate","fillLabel","labelText","textWrap","labelAlign","colorContrast","paddingInner","maxValue","gx","gh","groupData","gy","strokeOpacity","grouper","normalizeData","GroupedData","vals","extent","acc","acc0","acc1","curve","info","rangeX","domainY","rangeY","sxshift","line","xl","yl","line_","gradient","lineDarken","areas","areagroup","arealine","fillOpacity","xx","y1","area_","area","spacing","pi","rad","proportional","minimum","outerRadius","innerRadius","angles","pie","padAngle","startAngle","endAngle","arcs","arc","proportionalData","slices","center","centerFontSize","centerOpacity","legendLabel","fractionFormat","funnel","fr","bi","pim","moveTo","lineTo","closePath","inverted","marks","polygon","xy","segments","objectOnly","labelAccessor","valueAccessor","valueFormat","hierarchy","rootData","eachBefore","dataColor","treemap","tile","camelFunction","leaves","cell","singleData","_counter","textData","hideChildren","_children","widthWrap","sizing","sizeReduction","layout","zrange","heat","heatmap","shape","shapes","heatLabel","sizes","buckets","labelsX","labelsY","xp","yp","xv","yv","zv","niceRange","cols","reverseColors","getGeoProjection","dataInfo","topology","_geoPath","createGeoPath","geogroup","path","geodata","objects","geometry","paths","choropleth","projection","geoPath","lefletMap","leaflet","leafletId","Map","zoom","addLayer","TileLayer","getPanes","overlayPane","appendChild","projectPoint","latLngToLayerPoint","LatLng","stream","boundGeometry","boundObject","feature","features","boundScaleFactor","dataLabelKey","dataValueKey","dataValue","valueRange","neighbors","choroplethScale","id","geo","geoKey","dataKey","geometries","rank","memorySymbols","binaryFormat","fetchText","marked","viewElement","template","onData","date","Date","development","setDebug","interpolateRdBu","start","mount","appView","view","use","viewForms","viewBootstrapForms","visualComponents","cm","formListener"],"mappings":"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"}